<div class="dashboard-wrapper">
  <!-- ヘッダー -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1 class="app-name">SIApp</h1>
    </div>
    <div class="header-right">
      <span class="user-info">
        <span class="user-name">{{ userName }}</span>
      </span>
      <button class="logout-button" (click)="logout()">ログアウト</button>
    </div>
  </header>

  <!-- メインコンテンツエリア -->
  <div class="dashboard-body">
    <!-- サイドバー -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <button
          *ngFor="let tab of tabs"
          class="sidebar-item"
          [class.active]="currentTab === tab.name"
          (click)="switchTab(tab.name)"
        >
          {{ tab.name }}
        </button>
      </nav>
    </aside>

    <!-- メインコンテンツ -->
    <main class="main-content">
      <div class="content-area">
        <!-- 社会保険料ページ -->
        <ng-container *ngIf="currentTab === '社会保険料'">
          <div class="insurance-list-page">
            <h2 class="page-title">社会保険料一覧</h2>
            
            <!-- 事業主負担額合計 -->
            <div class="employer-burden-summary">
              <div class="summary-card">
                <span class="summary-label">事業主負担額合計:</span>
                <span class="summary-value">{{ getTotalEmployerBurden() | number:'1.0-0' }}円</span>
              </div>
            </div>
            
            <div class="table-container">
              <table class="insurance-table">
                <thead>
                  <tr>
                    <th>社員番号</th>
                    <th>氏名</th>
                    <th>固定的賃金</th>
                    <th>標準報酬月額</th>
                    <th>健康保険料</th>
                    <th>介護保険料</th>
                    <th>厚生年金保険料</th>
                    <th>社員負担額</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of insuranceList; trackBy: trackByEmployeeNumber">
                    <td>{{ item.employeeNumber }}</td>
                    <td>{{ item.name }}</td>
                    <td class="number-cell">{{ item.fixedSalary | number:'1.0-0' }}円</td>
                    <td class="number-cell">{{ item.standardMonthlySalary | number:'1.0-0' }}円</td>
                    <td class="number-cell">{{ formatInsuranceAmount(item.healthInsurance) }}円</td>
                    <td class="number-cell">{{ formatInsuranceAmount(item.nursingInsurance) }}円</td>
                    <td class="number-cell">{{ formatInsuranceAmount(item.pensionInsurance) }}円</td>
                    <td class="number-cell total-cell">{{ item.employeeBurden | number:'1.0-0' }}円</td>
                  </tr>
                  <tr *ngIf="insuranceList && insuranceList.length === 0">
                    <td colspan="8" class="empty-message">データがありません</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ng-container>

        <!-- 給与ページ -->
        <ng-container *ngIf="currentTab === '給与'">
          <h2 class="page-title">給与</h2>
          <div class="page-description">
            <p>給与の管理ページです。</p>
          </div>
        </ng-container>

        <!-- 賞与ページ -->
        <ng-container *ngIf="currentTab === '賞与'">
          <h2 class="page-title">賞与</h2>
          <div class="page-description">
            <p>賞与の管理ページです。</p>
          </div>
        </ng-container>

        <!-- 設定ページ -->
        <ng-container *ngIf="currentTab === '設定'">
          <div class="settings-page">
            <h2 class="page-title">設定</h2>
            
            <form [formGroup]="settingsForm">
              <!-- 健康保険設定 -->
              <section class="settings-section">
                <h3 class="section-title">健康保険設定</h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="healthInsuranceType">健康保険種別</label>
                    <select 
                      id="healthInsuranceType" 
                      formControlName="healthInsuranceType" 
                      class="form-input"
                      (change)="onHealthInsuranceTypeChange()"
                    >
                      <option value="協会けんぽ">協会けんぽ</option>
                      <option value="組合保険">組合保険</option>
                    </select>
                  </div>
                  <div class="form-group" *ngIf="settingsForm.get('healthInsuranceType')?.value === '協会けんぽ'">
                    <label for="prefecture">都道府県 <span class="required">*</span></label>
                    <select 
                      id="prefecture" 
                      formControlName="prefecture" 
                      class="form-input"
                      (change)="onPrefectureChange()"
                    >
                      <option value="">選択してください</option>
                      <option *ngFor="let rate of kenpoRates" [value]="rate.prefecture">
                        {{ rate.prefecture }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="section-actions">
                  <button type="button" class="save-section-button" (click)="saveHealthInsuranceSetting()">
                    健康保険設定を保存
                  </button>
                </div>
              </section>

              <!-- 保険料率設定 -->
              <section class="settings-section">
                <h3 class="section-title">保険料率設定</h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="healthInsuranceRate">健康保険料率 (%)</label>
                    <input 
                      type="number" 
                      id="healthInsuranceRate" 
                      formControlName="healthInsuranceRate" 
                      class="form-input"
                      step="0.01"
                      min="0"
                      max="100"
                      placeholder="例: 5.0"
                    >
                  </div>
                  <div class="form-group">
                    <label for="nursingInsuranceRate">介護保険料率 (%)</label>
                    <input 
                      type="number" 
                      id="nursingInsuranceRate" 
                      formControlName="nursingInsuranceRate" 
                      class="form-input"
                      step="0.01"
                      min="0"
                      max="100"
                      placeholder="例: 1.0"
                    >
                  </div>
                  <div class="form-group">
                    <label for="pensionInsuranceRate">厚生年金保険料率 (%)</label>
                    <input 
                      type="number" 
                      id="pensionInsuranceRate" 
                      formControlName="pensionInsuranceRate" 
                      class="form-input"
                      step="0.01"
                      min="0"
                      max="100"
                      placeholder="例: 9.15"
                    >
                  </div>
                </div>
                <div class="section-actions">
                  <button type="button" class="save-section-button" (click)="saveInsuranceRates()">
                    保険料率設定を保存
                  </button>
                </div>
              </section>
            </form>
          </div>
        </ng-container>
      </div>
    </main>
  </div>
</div>

