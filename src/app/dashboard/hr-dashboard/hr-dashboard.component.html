<div class="dashboard-wrapper">
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1 class="app-name">SIApp</h1>
    </div>
    <div class="header-right">
      <span class="hr-info">
        <span class="hr-name">{{ hrName }}</span>
      </span>
      <button class="logout-button" (click)="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  </header>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
  <div class="dashboard-body">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <ng-container *ngFor="let tab of tabs">
          <button
            *ngIf="tab.name !== 'æ–‡æ›¸ä½œæˆãƒ»ç®¡ç†' && tab.name !== 'ä¿é™ºè¨¼ç®¡ç†'"
            class="sidebar-item"
            [class.active]="currentTab === tab.name"
            (click)="switchTab(tab.name)"
          >
            {{ tab.name }}
          </button>
        </ng-container>
      </nav>
    </aside>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
      <div class="content-area">
        <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰'">
          <div class="dashboard-page">
            
              <!-- ç¤¾å“¡æƒ…å ±ç®¡ç†è¡¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§ -->
              <section class="dashboard-section">
                <div class="section-header">
                  <div class="section-header-left">
                    <h3 class="section-title">
                      <span class="section-icon">ğŸ‘¥</span>
                      ç¤¾å“¡æƒ…å ±ç®¡ç†è¡¨
                    </h3>
                  </div>
                </div>
                <div class="status-cards">
                  <div class="status-card" (click)="navigateToEmployeeManagement('å¿…é ˆæƒ…å ±ä¸è¶³')">
                    <div class="status-label">å¿…é ˆæƒ…å ±ä¸è¶³</div>
                    <div class="status-count" 
                         [class.count-zero]="getEmployeeStatusCount('å¿…é ˆæƒ…å ±ä¸è¶³') === 0"
                         [class.count-red]="getEmployeeStatusCount('å¿…é ˆæƒ…å ±ä¸è¶³') > 0"
                         [class.count-green]="getEmployeeStatusCount('å¿…é ˆæƒ…å ±ä¸è¶³') === 0">
                      {{ getEmployeeStatusCount('å¿…é ˆæƒ…å ±ä¸è¶³') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToEmployeeManagement('æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³')">
                    <div class="status-label">æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³</div>
                    <div class="status-count" 
                         [class.count-zero]="getEmployeeStatusCount('æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³') === 0"
                         [class.count-red]="getEmployeeStatusCount('æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³') > 0"
                         [class.count-green]="getEmployeeStatusCount('æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³') === 0">
                      {{ getEmployeeStatusCount('æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToEmployeeManagement('å…¥åŠ›å®Œäº†')">
                    <div class="status-label">å…¥åŠ›å®Œäº†</div>
                    <div class="status-count" 
                         [class.count-zero]="getEmployeeStatusCount('å…¥åŠ›å®Œäº†') === 0"
                         [class.count-red]="false"
                         [class.count-green]="true">
                      {{ getEmployeeStatusCount('å…¥åŠ›å®Œäº†') }}
                    </div>
                  </div>
                </div>
              </section>
            
              <!-- ç”³è«‹ç®¡ç†ç¥¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§ -->
              <section class="dashboard-section">
                <div class="section-header">
                  <div class="section-header-left">
                    <h3 class="section-title">
                      <span class="section-icon">ğŸ“‹</span>
                      ç”³è«‹ç®¡ç†è¡¨
                    </h3>
                  </div>
                </div>
                <div class="status-cards">
                  <div class="status-card" (click)="navigateToApplicationManagement('æ‰¿èªå¾…ã¡')">
                    <div class="status-label">æ‰¿èªå¾…ã¡</div>
                    <div class="status-count" 
                         [class.count-zero]="getApplicationStatusCount('æ‰¿èªå¾…ã¡') === 0"
                         [class.count-red]="getApplicationStatusCount('æ‰¿èªå¾…ã¡') > 0"
                         [class.count-green]="getApplicationStatusCount('æ‰¿èªå¾…ã¡') === 0">
                      {{ getApplicationStatusCount('æ‰¿èªå¾…ã¡') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToApplicationManagement('ç¢ºèªä¸­')">
                    <div class="status-label">ç¢ºèªä¸­</div>
                    <div class="status-count" 
                         [class.count-zero]="getApplicationStatusCount('ç¢ºèªä¸­') === 0"
                         [class.count-red]="getApplicationStatusCount('ç¢ºèªä¸­') > 0"
                         [class.count-green]="getApplicationStatusCount('ç¢ºèªä¸­') === 0">
                      {{ getApplicationStatusCount('ç¢ºèªä¸­') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToApplicationManagement('å´ä¸‹ãƒ»å·®ã—æˆ»ã—')">
                    <div class="status-label">å·®ã—æˆ»ã—</div>
                    <div class="status-count" 
                         [class.count-zero]="(getApplicationStatusCount('å´ä¸‹') + getApplicationStatusCount('å·®ã—æˆ»ã—')) === 0"
                         [class.count-red]="(getApplicationStatusCount('å´ä¸‹') + getApplicationStatusCount('å·®ã—æˆ»ã—')) > 0"
                         [class.count-green]="(getApplicationStatusCount('å´ä¸‹') + getApplicationStatusCount('å·®ã—æˆ»ã—')) === 0">
                      {{ getApplicationStatusCount('å´ä¸‹') + getApplicationStatusCount('å·®ã—æˆ»ã—') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToApplicationManagement('å†ç”³è«‹')">
                    <div class="status-label">å†ç”³è«‹</div>
                    <div class="status-count" 
                         [class.count-zero]="(getApplicationStatusCount('å†ç”³è«‹') + getApplicationStatusCount('å†æå‡º')) === 0"
                         [class.count-red]="(getApplicationStatusCount('å†ç”³è«‹') + getApplicationStatusCount('å†æå‡º')) > 0"
                         [class.count-green]="(getApplicationStatusCount('å†ç”³è«‹') + getApplicationStatusCount('å†æå‡º')) === 0">
                      {{ getApplicationStatusCount('å†ç”³è«‹') + getApplicationStatusCount('å†æå‡º') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToApplicationManagement('æ‰¿èªæ¸ˆã¿')">
                    <div class="status-label">æ‰¿èªæ¸ˆã¿</div>
                    <div class="status-count" 
                         [class.count-zero]="(getApplicationStatusCount('æ‰¿èªæ¸ˆã¿') + getApplicationStatusCount('æ‰¿èª')) === 0"
                         [class.count-red]="false"
                         [class.count-green]="true">
                      {{ getApplicationStatusCount('æ‰¿èªæ¸ˆã¿') + getApplicationStatusCount('æ‰¿èª') }}
                    </div>
                  </div>
                </div>
              </section>
            
              <!-- å…¥ç¤¾æ‰‹ç¶šãè¡¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§ -->
              <section class="dashboard-section">
                <div class="section-header">
                  <div class="section-header-left">
                    <h3 class="section-title">
                      <span class="section-icon">ğŸ‘”</span>
                      å…¥ç¤¾æ‰‹ç¶šãè¡¨
                    </h3>
                  </div>
                </div>
                <div class="status-cards">
                  <div class="status-card" (click)="navigateToOnboarding('ç”³è«‹å¾…ã¡')">
                    <div class="status-label">ç”³è«‹å¾…ã¡</div>
                    <div class="status-count" 
                         [class.count-zero]="getOnboardingStatusCount('ç”³è«‹å¾…ã¡') === 0"
                         [class.count-red]="getOnboardingStatusCount('ç”³è«‹å¾…ã¡') > 0"
                         [class.count-green]="getOnboardingStatusCount('ç”³è«‹å¾…ã¡') === 0">
                      {{ getOnboardingStatusCount('ç”³è«‹å¾…ã¡') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToOnboarding('ç”³è«‹æ¸ˆã¿')">
                    <div class="status-label">ç”³è«‹æ¸ˆã¿</div>
                    <div class="status-count" 
                         [class.count-zero]="getOnboardingStatusCount('ç”³è«‹æ¸ˆã¿') === 0"
                         [class.count-red]="getOnboardingStatusCount('ç”³è«‹æ¸ˆã¿') > 0"
                         [class.count-green]="getOnboardingStatusCount('ç”³è«‹æ¸ˆã¿') === 0">
                      {{ getOnboardingStatusCount('ç”³è«‹æ¸ˆã¿') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToOnboarding('å·®ã—æˆ»ã—')">
                    <div class="status-label">å·®ã—æˆ»ã—</div>
                    <div class="status-count" 
                         [class.count-zero]="getOnboardingStatusCount('å·®ã—æˆ»ã—') === 0"
                         [class.count-red]="getOnboardingStatusCount('å·®ã—æˆ»ã—') > 0"
                         [class.count-green]="getOnboardingStatusCount('å·®ã—æˆ»ã—') === 0">
                      {{ getOnboardingStatusCount('å·®ã—æˆ»ã—') }}
                    </div>
                  </div>
                  <div class="status-card" (click)="navigateToOnboarding('æº–å‚™å®Œäº†')">
                    <div class="status-label">æº–å‚™å®Œäº†</div>
                    <div class="status-count" 
                         [class.count-zero]="getOnboardingStatusCount('æº–å‚™å®Œäº†') === 0"
                         [class.count-red]="getOnboardingStatusCount('æº–å‚™å®Œäº†') > 0"
                         [class.count-green]="getOnboardingStatusCount('æº–å‚™å®Œäº†') === 0">
                      {{ getOnboardingStatusCount('æº–å‚™å®Œäº†') }}
                    </div>
                  </div>
                </div>
              </section>
            
              <!-- ä¿é™ºè¨¼ç®¡ç†ç¥¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§ï¼ˆä¸€æ—¦ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰ -->
              <!--
              <section class="dashboard-section">
                <h3 class="section-title">ä¿é™ºè¨¼ç®¡ç†ç¥¨</h3>
                <div class="status-cards">
                  <div class="status-card">
                    <div class="status-label">æº–å‚™ä¸­</div>
                    <div class="status-count" 
                         [class.count-zero]="getInsuranceCardStatusCount('æº–å‚™ä¸­') === 0"
                         [class.count-red]="getInsuranceCardStatusCount('æº–å‚™ä¸­') > 0"
                         [class.count-green]="false">
                      {{ getInsuranceCardStatusCount('æº–å‚™ä¸­') }}
                    </div>
                  </div>
                  <div class="status-card">
                    <div class="status-label">å†ç™ºè¡Œä¸­</div>
                    <div class="status-count" 
                         [class.count-zero]="getInsuranceCardStatusCount('å†ç™ºè¡Œä¸­') === 0"
                         [class.count-red]="getInsuranceCardStatusCount('å†ç™ºè¡Œä¸­') > 0"
                         [class.count-green]="false">
                      {{ getInsuranceCardStatusCount('å†ç™ºè¡Œä¸­') }}
                    </div>
                  </div>
                  <div class="status-card">
                    <div class="status-label">é…å¸ƒæ¸ˆã¿</div>
                    <div class="status-count" 
                         [class.count-zero]="getInsuranceCardStatusCount('é…å¸ƒæ¸ˆã¿') === 0"
                         [class.count-red]="false"
                         [class.count-green]="getInsuranceCardStatusCount('é…å¸ƒæ¸ˆã¿') > 0">
                      {{ getInsuranceCardStatusCount('é…å¸ƒæ¸ˆã¿') }}
                    </div>
                  </div>
                  <div class="status-card">
                    <div class="status-label">å›åå¾…ã¡</div>
                    <div class="status-count" 
                         [class.count-zero]="getInsuranceCardStatusCount('å›åå¾…ã¡') === 0"
                         [class.count-red]="getInsuranceCardStatusCount('å›åå¾…ã¡') > 0"
                         [class.count-green]="false">
                      {{ getInsuranceCardStatusCount('å›åå¾…ã¡') }}
                    </div>
                  </div>
                  <div class="status-card">
                    <div class="status-label">å›åæ¸ˆã¿</div>
                    <div class="status-count" 
                         [class.count-zero]="getInsuranceCardStatusCount('å›åæ¸ˆã¿') === 0"
                         [class.count-red]="false"
                         [class.count-green]="getInsuranceCardStatusCount('å›åæ¸ˆã¿') > 0">
                      {{ getInsuranceCardStatusCount('å›åæ¸ˆã¿') }}
                    </div>
                  </div>
                </div>
              </section>
              -->
          </div>
        </ng-container>
        
        <!-- ç”³è«‹è¦æ±‚ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div *ngIf="showApplicationRequestModal" class="modal-overlay">
          <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
              <h3 class="modal-title">ç”³è«‹ã‚’è¦æ±‚</h3>
              <button class="modal-close" (click)="closeApplicationRequestModal()">Ã—</button>
            </div>
            
            <div class="modal-body">
              <form [formGroup]="applicationRequestForm" (ngSubmit)="submitApplicationRequest()">
                <div class="form-group">
                  <label for="requestEmployeeNumber">ç¤¾å“¡ <span class="required">*</span></label>
                  <select 
                    id="requestEmployeeNumber" 
                    formControlName="employeeNumber" 
                    class="form-input"
                  >
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option *ngFor="let emp of employees" [value]="emp.employeeNumber">
                      {{ emp.employeeNumber }} - {{ emp.name }}
                    </option>
                  </select>
                  <div *ngIf="applicationRequestForm.get('employeeNumber')?.invalid && applicationRequestForm.get('employeeNumber')?.touched" class="error-message">
                    ç¤¾å“¡ã‚’é¸æŠã—ã¦ãã ã•ã„
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="requestApplicationType">ç”³è«‹ç¨®é¡ <span class="required">*</span></label>
                  <select 
                    id="requestApplicationType" 
                    formControlName="applicationType" 
                    class="form-input"
                  >
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option *ngFor="let type of availableApplicationTypes" [value]="type">
                      {{ type }}
                    </option>
                  </select>
                  <div *ngIf="applicationRequestForm.get('applicationType')?.invalid && applicationRequestForm.get('applicationType')?.touched" class="error-message">
                    ç”³è«‹ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„
                  </div>
                </div>
                
                <div class="modal-actions">
                  <button type="button" class="cancel-button" (click)="closeApplicationRequestModal()">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                  </button>
                  <button type="submit" class="submit-button" [disabled]="applicationRequestForm.invalid">
                    è¦æ±‚ã‚’é€ä¿¡
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- è¨­å®šãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'è¨­å®š'">
          <div class="settings-page">
            <h2 class="page-title">è¨­å®š</h2>
            
            <form [formGroup]="settingsForm">
              <!-- ä¼æ¥­æƒ…å ±è¨­å®š -->
              <section class="settings-section">
                <h3 class="section-title">ä¼æ¥­æƒ…å ±è¨­å®š</h3>
                <div class="form-grid">
                  <div class="form-group full-width">
                    <label for="officeName">äº‹æ¥­æ‰€åç§° <span class="required">*</span></label>
                    <input 
                      type="text" 
                      id="officeName" 
                      formControlName="officeName" 
                      class="form-input"
                      placeholder="ä¾‹: æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«"
                    >
                  </div>
                  <div class="form-group">
                    <label for="officePostalCode">äº‹æ¥­æ‰€éƒµä¾¿ç•ªå· <span class="required">*</span></label>
                    <input 
                      type="text" 
                      id="officePostalCode" 
                      formControlName="officePostalCode" 
                      class="form-input"
                      placeholder="ä¾‹: 1234567"
                      maxlength="7"
                      pattern="[0-9]{7}"
                      title="7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                      (input)="formatOfficePostalCode($event)"
                    >
                    <small class="form-hint">7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
                    <div *ngIf="settingsForm.get('officePostalCode')?.invalid && settingsForm.get('officePostalCode')?.touched" class="error-message">
                      <span *ngIf="settingsForm.get('officePostalCode')?.errors?.['required']">äº‹æ¥­æ‰€éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                      <span *ngIf="settingsForm.get('officePostalCode')?.errors?.['pattern']">7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                  <div class="form-group full-width">
                    <label for="officeAddress">äº‹æ¥­æ‰€ä½æ‰€ <span class="required">*</span></label>
                    <textarea 
                      id="officeAddress" 
                      formControlName="officeAddress" 
                      class="form-input" 
                      rows="3"
                      placeholder="ä½æ‰€ã‚’å…¥åŠ›"
                    ></textarea>
                    <div *ngIf="settingsForm.get('officeAddress')?.invalid && settingsForm.get('officeAddress')?.touched" class="error-message">
                      äº‹æ¥­æ‰€ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="officeNumber">äº‹æ¥­æ‰€ç•ªå· <span class="required">*</span></label>
                    <input 
                      type="text" 
                      id="officeNumber" 
                      formControlName="officeNumber" 
                      class="form-input"
                      placeholder="ä¾‹: 12345"
                      maxlength="5"
                      pattern="[0-9]{5}"
                      title="5æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                    >
                    <small class="form-hint">5æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
                    <div *ngIf="settingsForm.get('officeNumber')?.invalid && settingsForm.get('officeNumber')?.touched" class="error-message">
                      <span *ngIf="settingsForm.get('officeNumber')?.errors?.['required']">äº‹æ¥­æ‰€ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                      <span *ngIf="settingsForm.get('officeNumber')?.errors?.['pattern']">5æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="employerName">äº‹æ¥­ä¸»æ°å <span class="required">*</span></label>
                    <input 
                      type="text" 
                      id="employerName" 
                      formControlName="employerName" 
                      class="form-input"
                      placeholder="ä¾‹: å±±ç”° å¤ªéƒ"
                    >
                    <div *ngIf="settingsForm.get('employerName')?.invalid && settingsForm.get('employerName')?.touched" class="error-message">
                      äº‹æ¥­ä¸»æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="officePhoneNumber">äº‹æ¥­æ‰€é›»è©±ç•ªå· <span class="required">*</span></label>
                    <input 
                      type="text" 
                      id="officePhoneNumber" 
                      formControlName="officePhoneNumber" 
                      class="form-input"
                      placeholder="ä¾‹: 0312345678"
                      maxlength="11"
                      pattern="[0-9]{1,11}"
                      title="æœ€å¤§11æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰"
                      (input)="formatOfficePhoneNumber($event)"
                    >
                    <small class="form-hint">æœ€å¤§11æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰</small>
                    <div *ngIf="settingsForm.get('officePhoneNumber')?.invalid && settingsForm.get('officePhoneNumber')?.touched" class="error-message">
                      <span *ngIf="settingsForm.get('officePhoneNumber')?.errors?.['required']">äº‹æ¥­æ‰€é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                      <span *ngIf="settingsForm.get('officePhoneNumber')?.errors?.['pattern']">æœ€å¤§11æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="corporateNumber">æ³•äººç•ªå· <span class="required">*</span></label>
                    <input 
                      type="text" 
                      id="corporateNumber" 
                      formControlName="corporateNumber" 
                      class="form-input"
                      placeholder="ä¾‹: 1234567890123"
                      maxlength="13"
                      pattern="[0-9]{13}"
                      title="13æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                      (input)="formatCorporateNumber($event)"
                    >
                    <small class="form-hint">13æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
                    <div *ngIf="settingsForm.get('corporateNumber')?.invalid && settingsForm.get('corporateNumber')?.touched" class="error-message">
                      <span *ngIf="settingsForm.get('corporateNumber')?.errors?.['required']">æ³•äººç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                      <span *ngIf="settingsForm.get('corporateNumber')?.errors?.['pattern']">13æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="officeCodePart1">äº‹æ¥­æ‰€æ•´ç†ç•ªå· <span class="required">*</span></label>
                    <div class="office-code-container">
                      <div class="office-code-inputs">
                        <input 
                          type="text" 
                          id="officeCodePart1" 
                          formControlName="officeCodePart1" 
                          class="form-input office-code-part"
                          placeholder="00"
                          maxlength="2"
                          pattern="[0-9]{2}"
                          title="æ•°å­—2æ¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                          (input)="formatOfficeCodePart1($event)"
                        >
                        <span class="office-code-separator">-</span>
                        <input 
                          type="text" 
                          id="officeCodePart2" 
                          formControlName="officeCodePart2" 
                          class="form-input office-code-part"
                          placeholder="ä¾‹: ã‚¢123"
                          maxlength="4"
                          pattern="[ã‚¡-ãƒ¶ãƒ¼A-Za-z0-9]{1,4}"
                          title="ã‚«ã‚¿ã‚«ãƒŠã¾ãŸã¯è‹±æ•°å­—4æ¡ä»¥å†…ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                          (input)="formatOfficeCodePart2($event)"
                        >
                      </div>
                      <small class="form-hint">ç¬¬1éƒ¨: æ•°å­—2æ¡ã€ç¬¬2éƒ¨: ã‚«ã‚¿ã‚«ãƒŠã¾ãŸã¯è‹±æ•°å­—4æ¡ä»¥å†…</small>
                      <div *ngIf="(settingsForm.get('officeCodePart1')?.invalid || settingsForm.get('officeCodePart2')?.invalid) && (settingsForm.get('officeCodePart1')?.touched || settingsForm.get('officeCodePart2')?.touched)" class="error-message">
                        <span *ngIf="settingsForm.get('officeCodePart1')?.errors?.['required'] || settingsForm.get('officeCodePart2')?.errors?.['required']">äº‹æ¥­æ‰€æ•´ç†ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                        <span *ngIf="settingsForm.get('officeCodePart1')?.errors?.['pattern']">ç¬¬1éƒ¨ã¯æ•°å­—2æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                        <span *ngIf="settingsForm.get('officeCodePart2')?.errors?.['pattern']">ç¬¬2éƒ¨ã¯ã‚«ã‚¿ã‚«ãƒŠã¾ãŸã¯è‹±æ•°å­—4æ¡ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="section-actions">
                  <button type="button" class="save-section-button" (click)="saveCompanyInfo()">
                    ä¼æ¥­æƒ…å ±ã‚’ä¿å­˜
                  </button>
                </div>
              </section>

            </form>
          </div>
        </ng-container>

        <!-- ç”³è«‹ç®¡ç†ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ç”³è«‹ç®¡ç†'">
          <div class="application-management-page">
            <div class="page-header-with-button">
              <h2 class="page-title">ç”³è«‹ç®¡ç†</h2>
              <button 
                type="button" 
                class="request-application-button"
                (click)="openApplicationRequestModal()"
              >
                ç”³è«‹ã‚’è¦æ±‚
              </button>
            </div>
            
            <div class="filter-section">
              <label for="applicationStatusFilter">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:</label>
              <select 
                id="applicationStatusFilter" 
                [(ngModel)]="applicationStatusFilter" 
                (change)="onApplicationStatusFilterChange()"
                class="status-filter-select"
              >
                <option *ngFor="let status of applicationStatuses" [value]="status">{{ status }}</option>
              </select>
            </div>
            
            <div class="table-container">
              <table class="application-management-table">
                <thead>
                  <tr>
                    <th>ç”³è«‹ID</th>
                    <th>ç”³è«‹ç¨®é¡</th>
                    <th>ç”³è«‹è€…</th>
                    <th>ç¤¾å“¡ç•ªå·</th>
                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                    <th>ç”³è«‹æ—¥</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let application of filteredApplications" class="application-row" (click)="openApplicationDetail(application)">
                    <td>{{ application.applicationId }}</td>
                    <td>{{ application.applicationType }}</td>
                    <td>{{ application.employeeName || '-' }}</td>
                    <td>{{ application.employeeNumber || '-' }}</td>
                    <td>
                      <span class="status-badge" 
                            [class.status-pending]="application.status === 'æ‰¿èªå¾…ã¡'"
                            [class.status-reviewing]="application.status === 'ç¢ºèªä¸­'"
                            [class.status-approved]="application.status === 'æ‰¿èª' || application.status === 'æ‰¿èªæ¸ˆã¿'"
                            [class.status-rejected]="application.status === 'å´ä¸‹' || application.status === 'å·®ã—æˆ»ã—'"
                            [class.status-resubmitted]="application.status === 'å†ç”³è«‹' || application.status === 'å†æå‡º'"
                            [class.status-cancelled]="application.status === 'å–ã‚Šæ¶ˆã—'">
                        {{ application.status }}
                      </span>
                    </td>
                    <td>{{ getApplicationDate(application) | date:'yyyy/MM/dd' }}</td>
                  </tr>
                  <tr *ngIf="filteredApplications.length === 0">
                    <td colspan="6" class="empty-message">ç”³è«‹ãŒã‚ã‚Šã¾ã›ã‚“</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ng-container>

        <!-- å…¥ç¤¾æ‰‹ç¶šããƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'å…¥ç¤¾æ‰‹ç¶šã'">
          <div class="onboarding-page">
            <div class="page-header-with-button">
              <h2 class="page-title">å…¥ç¤¾æ‰‹ç¶šã</h2>
              <div class="header-buttons">
                <button 
                  *ngIf="hasReadyEmployees()" 
                  class="onboarding-process-button" 
                  (click)="openOnboardingProcessModal()"
                >
                  å…¥ç¤¾å‡¦ç†å®Ÿè¡Œ
                </button>
                <button class="add-employee-button" (click)="openAddModal()">
                  ç¤¾å“¡ã‚’è¿½åŠ 
                </button>
              </div>
            </div>

            <div class="filter-section">
              <label for="onboardingStatusFilter">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:</label>
              <select 
                id="onboardingStatusFilter" 
                [(ngModel)]="onboardingStatusFilter" 
                (change)="onOnboardingStatusFilterChange()"
                class="status-filter-select"
              >
                <option *ngFor="let status of onboardingStatuses" [value]="status">{{ status }}</option>
              </select>
            </div>

            <!-- æ–°å…¥ç¤¾å“¡ä¸€è¦§è¡¨ -->
            <div class="table-container">
              <table class="employee-table">
                <thead>
                  <tr>
                    <th>ç¤¾å“¡ç•ªå·</th>
                    <th>æ°å</th>
                    <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                    <th>é›‡ç”¨å½¢æ…‹</th>
                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                  </tr>
                </thead>
                <tbody>
                  <tr 
                    *ngFor="let employee of onboardingEmployees" 
                    class="employee-row"
                    (click)="openOnboardingEmployeeModal(employee)"
                  >
                    <td>{{ employee.employeeNumber }}</td>
                    <td>{{ employee.name }}</td>
                    <td>{{ employee.email }}</td>
                    <td>{{ employee.employmentType }}</td>
                    <td>
                      <span class="status-badge" 
                            [class.status-pending]="employee.status === 'ç”³è«‹å¾…ã¡'"
                            [class.status-resubmitted]="employee.status === 'ç”³è«‹æ¸ˆã¿'"
                            [class.status-rejected]="employee.status === 'å·®ã—æˆ»ã—'"
                            [class.status-approved]="employee.status === 'æº–å‚™å®Œäº†'">
                        {{ employee.status }}
                      </span>
                    </td>
                  </tr>
                  <tr *ngIf="onboardingEmployees.length === 0">
                    <td colspan="5" class="empty-message">æ–°å…¥ç¤¾å“¡ãŒã‚ã‚Šã¾ã›ã‚“</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ng-container>

        <!-- æ–‡æ›¸ä½œæˆãƒ»ç®¡ç†ãƒšãƒ¼ã‚¸ï¼ˆéè¡¨ç¤ºï¼‰ -->
        <ng-container *ngIf="false && currentTab === 'æ–‡æ›¸ä½œæˆãƒ»ç®¡ç†'">
          <div class="document-management-page">
            <h2 class="page-title">æ–‡æ›¸ä½œæˆãƒ»ç®¡ç†</h2>
            
            <!-- æ–‡æ›¸é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="document-selection-section">
              <h3 class="section-title">æ–‡æ›¸ã‚’é¸æŠ</h3>
              <div class="form-group">
                <label for="documentType">æ–‡æ›¸ç¨®é¡ <span class="required">*</span></label>
                <select 
                  id="documentType" 
                  class="form-input"
                  [(ngModel)]="selectedDocumentType"
                  (change)="onDocumentTypeChange()"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option *ngFor="let docType of documentTypes" [value]="docType">
                    {{ docType }}
                  </option>
                </select>
              </div>
            </section>

            <!-- å¾“æ¥­å“¡é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="employee-selection-section">
              <h3 class="section-title">å¾“æ¥­å“¡ã‚’é¸æŠ</h3>
              
              <!-- å¾“æ¥­å“¡æ¤œç´¢ -->
              <div class="form-group">
                <label for="employeeSearch">å¾“æ¥­å“¡æ¤œç´¢</label>
                <div class="employee-search-container">
                  <input 
                    type="text" 
                    id="employeeSearch" 
                    class="form-input"
                    [(ngModel)]="employeeSearchQuery"
                    (input)="onEmployeeSearch()"
                    placeholder="ç¤¾å“¡ç•ªå·ã€æ°åã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§æ¤œç´¢"
                    [disabled]="!!selectedEmployee"
                  >
                  <button 
                    *ngIf="selectedEmployee" 
                    type="button" 
                    class="clear-button"
                    (click)="clearEmployeeSelection()"
                  >
                    ã‚¯ãƒªã‚¢
                  </button>
                </div>
              </div>

              <!-- é¸æŠã•ã‚ŒãŸå¾“æ¥­å“¡è¡¨ç¤º -->
              <div *ngIf="selectedEmployee" class="selected-employee-card">
                <div class="selected-employee-info">
                  <div class="employee-info-item">
                    <span class="info-label">ç¤¾å“¡ç•ªå·:</span>
                    <span class="info-value">{{ selectedEmployee.employeeNumber }}</span>
                  </div>
                  <div class="employee-info-item">
                    <span class="info-label">æ°å:</span>
                    <span class="info-value">{{ selectedEmployee.name }}</span>
                  </div>
                  <div class="employee-info-item">
                    <span class="info-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                    <span class="info-value">{{ selectedEmployee.email }}</span>
                  </div>
                  <div class="employee-info-item">
                    <span class="info-label">é›‡ç”¨å½¢æ…‹:</span>
                    <span class="info-value">{{ selectedEmployee.employmentType }}</span>
                  </div>
                </div>
              </div>

              <!-- å¾“æ¥­å“¡æ¤œç´¢çµæœãƒªã‚¹ãƒˆ -->
              <div *ngIf="!selectedEmployee && employeeSearchQuery && filteredEmployees.length > 0" class="employee-search-results">
                <div class="search-results-header">
                  <span class="results-count">æ¤œç´¢çµæœ: {{ filteredEmployees.length }}ä»¶</span>
                </div>
                <div class="employee-list">
                  <div 
                    *ngFor="let employee of filteredEmployees" 
                    class="employee-item"
                    (click)="selectEmployee(employee)"
                  >
                    <div class="employee-item-content">
                      <div class="employee-item-main">
                        <span class="employee-number">{{ employee.employeeNumber }}</span>
                        <span class="employee-name">{{ employee.name }}</span>
                      </div>
                      <div class="employee-item-sub">
                        <span class="employee-email">{{ employee.email }}</span>
                        <span class="employee-type">{{ employee.employmentType }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- æ¤œç´¢çµæœãªã— -->
              <div *ngIf="!selectedEmployee && employeeSearchQuery && filteredEmployees.length === 0" class="no-results">
                <p>è©²å½“ã™ã‚‹å¾“æ¥­å“¡ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
              </div>

              <!-- æ¤œç´¢å‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
              <div *ngIf="!selectedEmployee && !employeeSearchQuery" class="search-prompt">
                <p>ä¸Šè¨˜ã®æ¤œç´¢æ¬„ã§å¾“æ¥­å“¡ã‚’æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚</p>
              </div>
            </section>

            <!-- æ–‡æ›¸ä½œæˆãƒœã‚¿ãƒ³ -->
            <section class="document-action-section" *ngIf="selectedDocumentType && selectedEmployee">
              <button 
                class="create-document-button" 
                (click)="createDocument()"
                [disabled]="isCreatingDocument"
              >
                <span *ngIf="!isCreatingDocument">æ–‡æ›¸ã‚’ä½œæˆ</span>
                <span *ngIf="isCreatingDocument">ä½œæˆä¸­...</span>
              </button>
              <button 
                class="show-info-button" 
                (click)="showDocumentInfo()"
                style="background: #2196F3; color: white; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem; margin-left: 0.5rem;"
              >
                å¿…è¦ãªæƒ…å ±ã‚’è¡¨ç¤º
              </button>
              <p class="action-note" *ngIf="!isCreatingDocument">
                é¸æŠã—ãŸå¾“æ¥­å“¡ã®æƒ…å ±ã‚’PDFã«è¨˜å…¥ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™
              </p>
            </section>

            <!-- åº§æ¨™ç¢ºèªç”¨ãƒ‡ãƒãƒƒã‚°ãƒœã‚¿ãƒ³ï¼ˆé–‹ç™ºç”¨ï¼‰ -->
            <section class="document-action-section" *ngIf="selectedDocumentType">
              <button 
                class="debug-button" 
                (click)="debugPdfCoordinates()"
                style="background: #ff9800; color: white; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem;"
              >
                åº§æ¨™ç¢ºèªç”¨PDFã‚’ç”Ÿæˆ
              </button>
              <p class="action-note" style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">
                é¸æŠã—ãŸæ–‡æ›¸ã®åº§æ¨™ã‚°ãƒªãƒƒãƒ‰ã‚’è¡¨ç¤ºã—ãŸPDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ï¼ˆé–‹ç™ºç”¨ï¼‰
              </p>
              <p class="action-note loading-note" *ngIf="isCreatingDocument">
                PDFã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„...
              </p>
            </section>
          </div>
        </ng-container>

        <!-- ä¿é™ºè¨¼ç®¡ç†ãƒšãƒ¼ã‚¸ï¼ˆæ©Ÿèƒ½ã¯æ®‹ã™ãŒè¡¨ç¤ºã—ãªã„ï¼‰ -->
        <ng-container *ngIf="false && currentTab === 'ä¿é™ºè¨¼ç®¡ç†'">
          <div class="insurance-card-management-page">
            <h2 class="page-title">ä¿é™ºè¨¼ç®¡ç†</h2>
            
            <div class="insurance-card-controls">
              <div class="view-type-toggle">
                <button 
                  type="button"
                  class="toggle-button"
                  [class.active]="insuranceCardViewType === 'insured'"
                  (click)="switchInsuranceCardViewType('insured')"
                >
                  è¢«ä¿é™ºè€…
                </button>
                <button 
                  type="button"
                  class="toggle-button"
                  [class.active]="insuranceCardViewType === 'dependent'"
                  (click)="switchInsuranceCardViewType('dependent')"
                >
                  è¢«æ‰¶é¤Šè€…
                </button>
              </div>
              
              <div class="filter-section">
                <label for="insuranceCardStatusFilter">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:</label>
                <select 
                  id="insuranceCardStatusFilter" 
                  [(ngModel)]="insuranceCardStatusFilter" 
                  (change)="onInsuranceCardStatusFilterChange()"
                  class="status-filter-select"
                >
                  <option value="ã™ã¹ã¦">ã™ã¹ã¦</option>
                  <option *ngFor="let status of insuranceCardStatuses" [value]="status">{{ status }}</option>
                </select>
              </div>
            </div>
            
            <!-- è¢«ä¿é™ºè€…è¡¨ -->
            <div class="table-container" *ngIf="insuranceCardViewType === 'insured'">
              <table class="insurance-card-table">
                <thead>
                  <tr>
                    <th>ç¤¾å“¡ID</th>
                    <th>æ°å</th>
                    <th>è¢«ä¿é™ºè€…è¨˜å·</th>
                    <th>è¢«ä¿é™ºè€…ç•ªå·</th>
                    <th>ç™ºè¡Œæ—¥</th>
                    <th>å›åæ—¥</th>
                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                  </tr>
                </thead>
                <tbody>
                  <tr 
                    *ngFor="let card of filteredInsuranceCards" 
                    class="insurance-card-row"
                    (click)="openInsuranceCardStatusModal(card, 'insured')"
                  >
                    <td>{{ card.employeeNumber }}</td>
                    <td>{{ card.name }}</td>
                    <td>{{ card.insuranceSymbol || '-' }}</td>
                    <td>{{ card.insuranceNumber || '-' }}</td>
                    <td>{{ formatDate(card.issueDate) }}</td>
                    <td>{{ formatDate(card.returnDate) }}</td>
                    <td>
                      <span class="status-badge" 
                            [class.status-preparing]="card.status === 'æº–å‚™ä¸­'"
                            [class.status-distributed]="card.status === 'é…å¸ƒæ¸ˆã¿'"
                            [class.status-reissuing]="card.status === 'å†ç™ºè¡Œä¸­'"
                            [class.status-pending-return]="card.status === 'å›åå¾…ã¡'"
                            [class.status-returned]="card.status === 'å›åæ¸ˆã¿'">
                        {{ card.status || '-' }}
                      </span>
                    </td>
                  </tr>
                  <tr *ngIf="filteredInsuranceCards.length === 0">
                    <td colspan="7" class="empty-message">ä¿é™ºè¨¼ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <!-- è¢«æ‰¶é¤Šè€…è¡¨ -->
            <div class="table-container" *ngIf="insuranceCardViewType === 'dependent'">
              <table class="insurance-card-table">
                <thead>
                  <tr>
                    <th>ä¿é™ºè€…å</th>
                    <th>æ‰¶é¤Šè€…å</th>
                    <th>ç¶šæŸ„</th>
                    <th>ç™ºè¡Œæ—¥</th>
                    <th>å›åæ—¥</th>
                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                  </tr>
                </thead>
                <tbody>
                  <tr 
                    *ngFor="let card of filteredDependentInsuranceCards" 
                    class="insurance-card-row"
                    (click)="openInsuranceCardStatusModal(card, 'dependent')"
                  >
                    <td>{{ card.insuredName }}</td>
                    <td>{{ card.dependentName }}</td>
                    <td>{{ card.relationship || '-' }}</td>
                    <td>{{ formatDate(card.issueDate) }}</td>
                    <td>{{ formatDate(card.returnDate) }}</td>
                    <td>
                      <span class="status-badge" 
                            [class.status-preparing]="card.status === 'æº–å‚™ä¸­'"
                            [class.status-distributed]="card.status === 'é…å¸ƒæ¸ˆã¿'"
                            [class.status-reissuing]="card.status === 'å†ç™ºè¡Œä¸­'"
                            [class.status-pending-return]="card.status === 'å›åå¾…ã¡'"
                            [class.status-returned]="card.status === 'å›åæ¸ˆã¿'">
                        {{ card.status || '-' }}
                      </span>
                    </td>
                  </tr>
                  <tr *ngIf="filteredDependentInsuranceCards.length === 0">
                    <td colspan="6" class="empty-message">ä¿é™ºè¨¼ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ng-container>
        
        <!-- ä¿é™ºè¨¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div *ngIf="showInsuranceCardStatusModal" class="modal-overlay">
          <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
              <h3 class="modal-title">ä¿é™ºè¨¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´</h3>
              <button class="modal-close" (click)="closeInsuranceCardStatusModal()">Ã—</button>
            </div>
            
            <div class="modal-body">
              <div class="form-group">
                <label>ä¿é™ºè€…å:</label>
                <div class="readonly-field">{{ selectedInsuranceCardType === 'insured' ? selectedInsuranceCard?.name : selectedInsuranceCard?.insuredName }}</div>
              </div>
              
              <div class="form-group" *ngIf="selectedInsuranceCardType === 'dependent'">
                <label>æ‰¶é¤Šè€…å:</label>
                <div class="readonly-field">{{ selectedInsuranceCard?.dependentName }}</div>
              </div>
              
              <div class="form-group">
                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</label>
                <select 
                  [(ngModel)]="newInsuranceCardStatus" 
                  class="form-input"
                  [ngModelOptions]="{standalone: true}"
                >
                  <option *ngFor="let status of insuranceCardStatuses" [value]="status">{{ status }}</option>
                </select>
              </div>
              
              <div class="form-group">
                <button 
                  type="button" 
                  class="submit-button" 
                  (click)="updateInsuranceCardStatus()"
                >
                  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
                </button>
              </div>
              
              <div class="status-history-section" *ngIf="insuranceCardStatusHistory.length > 0">
                <h4>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´å±¥æ­´</h4>
                <div class="status-history-list">
                  <div 
                    *ngFor="let history of insuranceCardStatusHistory" 
                    class="status-history-item"
                  >
                    <div class="history-status">{{ history.status }}</div>
                    <div class="history-date">{{ formatDateForHistory(history.changedAt) }}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ç¤¾å“¡æƒ…å ±ç®¡ç†ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ç¤¾å“¡æƒ…å ±ç®¡ç†'">
          <div class="employee-management-page">
            <div class="page-header-with-button">
              <h2 class="page-title">ç¤¾å“¡æƒ…å ±ç®¡ç†</h2>
              <button 
                type="button" 
                class="add-employee-button"
                (click)="openAddEmployeeModal()"
              >
                ç¤¾å“¡ã‚’è¿½åŠ 
              </button>
            </div>
            
            <div class="filter-section">
              <label for="employeeStatusFilter">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:</label>
              <select 
                id="employeeStatusFilter" 
                [(ngModel)]="employeeStatusFilter" 
                (change)="onEmployeeStatusFilterChange()"
                class="status-filter-select"
              >
                <option *ngFor="let status of employeeStatuses" [value]="status">{{ status }}</option>
              </select>
            </div>

            <!-- ç¤¾å“¡ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« -->
            <div class="table-container">
            <table class="employee-table">
              <thead>
                <tr>
                  <th>ç¤¾å“¡ç•ªå·</th>
                  <th>æ°å</th>
                  <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                  <th>é›‡ç”¨å½¢æ…‹</th>
                  <th>åœ¨ç±çŠ¶æ³</th>
                  <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let employee of filteredEmployees" (click)="openEmployeeEditModal(employee.employeeNumber)" class="employee-row">
                  <td>{{ employee.employeeNumber }}</td>
                  <td>{{ employee.name }}</td>
                  <td>{{ employee.email }}</td>
                  <td>{{ employee.employmentType }}</td>
                  <td>{{ getEmploymentStatusDisplay(employee.employmentStatus) }}</td>
                  <td>
                    <span *ngIf="getEmploymentStatusDisplay(employee.employmentStatus) === 'é€€è·æ¸ˆã¿'" class="status-hyphen">-</span>
                    <span *ngIf="getEmploymentStatusDisplay(employee.employmentStatus) !== 'é€€è·æ¸ˆã¿'" 
                          class="status-badge" 
                          [class.status-incomplete]="employee.status === 'å¿…é ˆæƒ…å ±ä¸è¶³'"
                          [class.status-dependent-incomplete]="employee.status === 'æ‰¶é¤Šè€…æƒ…å ±ä¸è¶³'"
                          [class.status-complete]="employee.status === 'å…¥åŠ›å®Œäº†'">
                      {{ employee.status }}
                    </span>
                  </td>
                </tr>
                <tr *ngIf="filteredEmployees.length === 0">
                  <td colspan="6" class="empty-message">ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td>
                </tr>
              </tbody>
              </table>
            </div>
          </div>
        </ng-container>
      </div>
    </main>
  </div>

  <!-- ç¤¾å“¡è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div *ngIf="showAddModal" class="modal-overlay">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">æ–°è¦ç¤¾å“¡è¿½åŠ </h3>
        <button class="modal-close" (click)="closeAddModal()">Ã—</button>
      </div>
      
      <form [formGroup]="addEmployeeForm" (ngSubmit)="addEmployees()" class="add-employee-form">
        <div formArrayName="employees">
          <div 
            *ngFor="let employee of employeesFormArray.controls; let i = index"
            [formGroupName]="i"
            class="employee-form-row"
          >
            <div class="form-row-header">
              <h4>ç¤¾å“¡ {{ i + 1 }}</h4>
              <button 
                *ngIf="employeesFormArray.length > 1 && !isAddingEmployees"
                type="button" 
                class="remove-row-button" 
                (click)="removeEmployeeRow(i)"
              >
                å‰Šé™¤
              </button>
            </div>
            
            <div class="form-grid">
              <div class="form-group">
                <label [for]="'lastName' + i">å§“ <span class="required">*</span></label>
                <input 
                  type="text" 
                  [id]="'lastName' + i"
                  formControlName="lastName" 
                  class="form-input"
                  placeholder="ä¾‹: å±±ç”°"
                >
              </div>
              <div class="form-group">
                <label [for]="'firstName' + i">å <span class="required">*</span></label>
                <input 
                  type="text" 
                  [id]="'firstName' + i"
                  formControlName="firstName" 
                  class="form-input"
                  placeholder="ä¾‹: å¤ªéƒ"
                >
              </div>
              <div class="form-group">
                <label [for]="'lastNameKana' + i">å§“ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰ <span class="required">*</span></label>
                <input 
                  type="text" 
                  [id]="'lastNameKana' + i"
                  formControlName="lastNameKana" 
                  class="form-input"
                  placeholder="ä¾‹: ãƒ¤ãƒãƒ€"
                >
                <div *ngIf="employeesFormArray.at(i).get('lastNameKana')?.invalid && employeesFormArray.at(i).get('lastNameKana')?.touched" class="error-message">
                  <span *ngIf="employeesFormArray.at(i).get('lastNameKana')?.errors?.['required']">
                    å§“ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('lastNameKana')?.errors?.['katakana']">
                    ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                </div>
              </div>
              <div class="form-group">
                <label [for]="'firstNameKana' + i">åï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰ <span class="required">*</span></label>
                <input 
                  type="text" 
                  [id]="'firstNameKana' + i"
                  formControlName="firstNameKana" 
                  class="form-input"
                  placeholder="ä¾‹: ã‚¿ãƒ­ã‚¦"
                >
                <div *ngIf="employeesFormArray.at(i).get('firstNameKana')?.invalid && employeesFormArray.at(i).get('firstNameKana')?.touched" class="error-message">
                  <span *ngIf="employeesFormArray.at(i).get('firstNameKana')?.errors?.['required']">
                    åï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('firstNameKana')?.errors?.['katakana']">
                    ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                </div>
              </div>
              <div class="form-group">
                <label [for]="'employeeNumber' + i">ç¤¾å“¡ç•ªå· <span class="required">*</span></label>
                <input 
                  type="text" 
                  [id]="'employeeNumber' + i"
                  formControlName="employeeNumber" 
                  class="form-input"
                  placeholder="ä¾‹: EMP001"
                >
                <div *ngIf="employeesFormArray.at(i).get('employeeNumber')?.touched && employeesFormArray.at(i).get('employeeNumber')?.errors" class="error-message">
                  <span *ngIf="employeesFormArray.at(i).get('employeeNumber')?.errors?.['duplicate']">
                    ã“ã®ç¤¾å“¡ç•ªå·ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('employeeNumber')?.errors?.['duplicateInForm']">
                    åŒã˜ãƒ•ã‚©ãƒ¼ãƒ å†…ã§ç¤¾å“¡ç•ªå·ãŒé‡è¤‡ã—ã¦ã„ã¾ã™
                  </span>
                </div>
              </div>
              <div class="form-group">
                <label [for]="'email' + i">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
                <input 
                  type="email" 
                  [id]="'email' + i"
                  formControlName="email" 
                  class="form-input"
                  placeholder="ä¾‹: example@email.com"
                >
                <div *ngIf="employeesFormArray.at(i).get('email')?.invalid && employeesFormArray.at(i).get('email')?.touched" class="error-message">
                  <span *ngIf="employeesFormArray.at(i).get('email')?.errors?.['required']">
                    ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('email')?.errors?.['email']">
                    æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('email')?.errors?.['duplicate']">
                    ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('email')?.errors?.['duplicateInForm']">
                    åŒã˜ãƒ•ã‚©ãƒ¼ãƒ å†…ã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒé‡è¤‡ã—ã¦ã„ã¾ã™
                  </span>
                </div>
              </div>
              <div class="form-group">
                <label [for]="'employmentType' + i">é›‡ç”¨å½¢æ…‹ <span class="required">*</span></label>
                <select 
                  [id]="'employmentType' + i"
                  formControlName="employmentType" 
                  class="form-input"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option *ngFor="let type of employmentTypes" [value]="type">{{ type }}</option>
                </select>
              </div>
              <div class="form-group">
                <label [for]="'initialPassword' + i">åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="required">*</span></label>
                <input 
                  type="password" 
                  [id]="'initialPassword' + i"
                  formControlName="initialPassword" 
                  class="form-input"
                  placeholder="åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆ6æ–‡å­—ä»¥ä¸Šï¼‰"
                >
                <div *ngIf="employeesFormArray.at(i).get('initialPassword')?.invalid && employeesFormArray.at(i).get('initialPassword')?.touched" class="error-message">
                  <span *ngIf="employeesFormArray.at(i).get('initialPassword')?.errors?.['required']">
                    åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                  <span *ngIf="employeesFormArray.at(i).get('initialPassword')?.errors?.['minlength']">
                    ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="add-row-button" (click)="addEmployeeRow()">
            + è¡Œã‚’è¿½åŠ 
          </button>
        </div>

        <div class="modal-actions">
          <button type="button" class="cancel-button" (click)="closeAddModal()">
            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
          </button>
          <button type="submit" class="submit-button" [attr.disabled]="addEmployeeForm.invalid || isAddingEmployees ? '' : null">
            {{ isAddingEmployees ? 'è¿½åŠ ä¸­...' : 'è¿½åŠ ' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ç¤¾å“¡æƒ…å ±ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div *ngIf="showEmployeeEditModal" class="modal-overlay">
    <div class="modal-content employee-edit-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">ç¤¾å“¡æƒ…å ±ç·¨é›†</h3>
        <button class="modal-close" (click)="closeEmployeeEditModal()">Ã—</button>
      </div>
      
      <form [formGroup]="employeeEditForm" (ngSubmit)="saveEmployeeData()" class="employee-edit-form" [class.form-disabled]="isSaving">
        <!-- åŸºæœ¬æƒ…å ±æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-lastName">å§“ <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-lastName" 
                formControlName="lastName" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-firstName">å <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-firstName" 
                formControlName="firstName" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-lastNameKana">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-lastNameKana" 
                formControlName="lastNameKana" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-firstNameKana">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-firstNameKana" 
                formControlName="firstNameKana" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-birthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
              <div class="birth-date-container">
                <input 
                  type="date" 
                  id="hr-birthDate" 
                  formControlName="birthDate" 
                  class="form-input"
                  (change)="onBirthDateChange()"
                >
                <span *ngIf="age !== null" class="age-display">ï¼ˆ{{ age }}æ­³ï¼‰</span>
              </div>
            </div>
            <div class="form-group">
              <label for="hr-gender">æˆ¸ç±ä¸Šã®æ€§åˆ¥ <span class="required">*</span></label>
              <select 
                id="hr-gender" 
                formControlName="gender" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="hr-email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
              <input 
                type="email" 
                id="hr-email" 
                formControlName="email" 
                class="form-input"
              >
            </div>
            <div class="form-group full-width">
              <label for="hr-idDocument">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜</label>
              <input 
                type="file" 
                id="hr-idDocument" 
                class="form-input"
                accept=".pdf,.jpg,.jpeg,.png"
                (change)="onFileSelected($event, 'idDocument')"
              >
              <div *ngIf="idDocumentFile" class="file-name">{{ idDocumentFile.name }}</div>
              <div *ngIf="!idDocumentFile && existingIdDocumentFileUrl" class="file-info" style="margin-top: 0.5rem;">
                <a [href]="existingIdDocumentFileUrl" target="_blank" class="file-link">
                  {{ existingIdDocumentFileName || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                </a>
              </div>
            </div>
          </div>
        </section>

        <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
          <div class="form-grid">
            <div class="form-group full-width">
              <label for="hr-myNumberPart1">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</label>
              <div class="my-number-container">
                <div class="my-number-inputs">
                  <input 
                    type="text" 
                    id="hr-myNumberPart1" 
                    formControlName="myNumberPart1" 
                    class="form-input my-number-part"
                    [type]="showMyNumber ? 'text' : 'password'"
                    [readonly]="!showMyNumber"
                    maxlength="4"
                    (input)="formatMyNumberInput($event, 1)"
                    placeholder="0000"
                  >
                  <span class="my-number-separator">-</span>
                  <input 
                    type="text" 
                    id="hr-myNumberPart2" 
                    formControlName="myNumberPart2" 
                    class="form-input my-number-part"
                    [type]="showMyNumber ? 'text' : 'password'"
                    [readonly]="!showMyNumber"
                    maxlength="4"
                    (input)="formatMyNumberInput($event, 2)"
                    placeholder="0000"
                  >
                  <span class="my-number-separator">-</span>
                  <input 
                    type="text" 
                    id="hr-myNumberPart3" 
                    formControlName="myNumberPart3" 
                    class="form-input my-number-part"
                    [type]="showMyNumber ? 'text' : 'password'"
                    [readonly]="!showMyNumber"
                    maxlength="4"
                    (input)="formatMyNumberInput($event, 3)"
                    placeholder="0000"
                  >
                </div>
                <button 
                  type="button" 
                  class="toggle-button" 
                  (click)="toggleMyNumber()"
                >
                  {{ showMyNumber ? 'éè¡¨ç¤º' : 'è¡¨ç¤º' }}
                </button>
              </div>
            </div>
            <div class="form-group full-width">
              <label for="hr-myNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</label>
              <input 
                type="file" 
                id="hr-myNumberCard" 
                class="form-input"
                accept=".pdf,.jpg,.jpeg,.png"
                (change)="onFileSelected($event, 'myNumberCard')"
              >
              <div *ngIf="myNumberCardFile" class="file-name">{{ myNumberCardFile.name }}</div>
              <div *ngIf="!myNumberCardFile && existingMyNumberCardFileUrl" class="file-info" style="margin-top: 0.5rem;">
                <a [href]="existingMyNumberCardFileUrl" target="_blank" class="file-link">
                  {{ existingMyNumberCardFileName || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                </a>
              </div>
            </div>
          </div>
        </section>

        <!-- å…¥é€€ç¤¾æƒ…å ±æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">å…¥é€€ç¤¾æƒ…å ±</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-employmentStatus">åœ¨ç±çŠ¶æ³ <span class="required">*</span></label>
              <select 
                id="hr-employmentStatus" 
                formControlName="employmentStatus" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let status of employmentStatuses" [value]="status">{{ status }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="hr-joinDate">å…¥ç¤¾å¹´æœˆæ—¥ <span class="required">*</span></label>
              <input 
                type="date" 
                id="hr-joinDate" 
                formControlName="joinDate" 
                class="form-input"
              >
            </div>
            <div class="form-group" *ngIf="employeeEditForm.get('employmentStatus')?.value !== 'åœ¨ç±'">
              <label for="hr-resignationDate">é€€è·å¹´æœˆæ—¥ <span class="required">*</span></label>
              <input 
                type="date" 
                id="hr-resignationDate" 
                formControlName="resignationDate" 
                class="form-input"
              >
            </div>
            <div class="form-group full-width" *ngIf="employeeEditForm.get('employmentStatus')?.value !== 'åœ¨ç±'">
              <label for="hr-resignationReason">é€€è·äº‹ç”±</label>
              <textarea 
                id="hr-resignationReason" 
                formControlName="resignationReason" 
                class="form-input" 
                rows="3"
              ></textarea>
            </div>
          </div>
        </section>

        <!-- æ¥­å‹™æƒ…å ±æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">æ¥­å‹™æƒ…å ±</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-employeeNumber">ç¤¾å“¡ç•ªå· <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-employeeNumber" 
                formControlName="employeeNumber" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-employmentType">é›‡ç”¨å½¢æ…‹ <span class="required">*</span></label>
              <select 
                id="hr-employmentType" 
                formControlName="employmentType" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let type of employmentTypes" [value]="type">{{ type }}</option>
              </select>
            </div>
          </div>
        </section>

        <!-- éƒ¨ç½²ãƒ»å½¹è·æƒ…å ± -->
        <section class="form-section">
          <h3 class="section-title">éƒ¨ç½²ãƒ»å½¹è·æƒ…å ±</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-department">éƒ¨ç½²</label>
              <select 
                id="hr-department" 
                formControlName="department" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="hr-position">å½¹è·</label>
              <select 
                id="hr-position" 
                formControlName="position" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let pos of positions" [value]="pos">{{ pos }}</option>
              </select>
            </div>
          </div>
        </section>

        <!-- ç¾ä½æ‰€ã¨é€£çµ¡å…ˆæ¬„ -->
        <section class="form-section">
          <h3 class="section-title">ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ</h3>
          <div class="form-grid">
            <div class="form-group full-width">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  formControlName="isOverseasResident"
                >
                æµ·å¤–ã«åœ¨ä½
              </label>
            </div>
            <div class="form-group" *ngIf="!employeeEditForm.get('isOverseasResident')?.value">
              <label for="hr-postalCode">éƒµä¾¿ç•ªå·</label>
              <input 
                type="text" 
                id="hr-postalCode" 
                formControlName="postalCode" 
                class="form-input"
                placeholder="ä¾‹: 1234567"
                maxlength="7"
                pattern="[0-9]{7}"
                title="7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
              >
              <small class="form-hint">7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
            </div>
            <div class="form-group full-width" *ngIf="!employeeEditForm.get('isOverseasResident')?.value">
              <label for="hr-currentAddress">ç¾ä½æ‰€ <span class="required">*</span></label>
              <textarea 
                id="hr-currentAddress" 
                formControlName="currentAddress" 
                class="form-input" 
                rows="2"
              ></textarea>
            </div>
            <div class="form-group full-width" *ngIf="!employeeEditForm.get('isOverseasResident')?.value">
              <label for="hr-currentAddressKana">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <textarea 
                id="hr-currentAddressKana" 
                formControlName="currentAddressKana" 
                class="form-input" 
                rows="2"
              ></textarea>
            </div>
            <div class="form-group full-width" *ngIf="employeeEditForm.get('isOverseasResident')?.value">
              <label for="hr-overseasAddress">ä½æ‰€ï¼ˆæµ·å¤–ï¼‰ <span class="required">*</span></label>
              <textarea 
                id="hr-overseasAddress" 
                formControlName="overseasAddress" 
                class="form-input" 
                rows="2"
              ></textarea>
              <div *ngIf="employeeEditForm.get('overseasAddress')?.invalid && employeeEditForm.get('overseasAddress')?.touched" class="error-message">
                æµ·å¤–ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </div>
            </div>
            <div class="form-group">
              <label for="hr-phoneNumber">é›»è©±ç•ªå·ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—æœ€å¤§11æ¡ï¼‰ <span class="required">*</span></label>
              <input 
                type="tel" 
                id="hr-phoneNumber" 
                formControlName="phoneNumber" 
                class="form-input"
                maxlength="11"
                pattern="[0-9]*"
              >
            </div>
          </div>
        </section>

        <!-- ä½æ°‘ç¥¨ä½æ‰€æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">ä½æ°‘ç¥¨ä½æ‰€</h3>
          <div class="form-grid">
            <div class="form-group full-width">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  formControlName="skipResidentAddress"
                >
                ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„
              </label>
            </div>
            <div class="form-group full-width" *ngIf="employeeEditForm.get('skipResidentAddress')?.value">
              <label for="hr-residentAddressSkipReason">ç†ç”±</label>
              <input 
                type="text" 
                id="hr-residentAddressSkipReason" 
                formControlName="residentAddressSkipReason" 
                class="form-input"
                readonly
              >
            </div>
            <div class="form-group full-width" *ngIf="employeeEditForm.get('skipResidentAddress')?.value && employeeEditForm.get('residentAddressSkipReason')?.value === 'ãã®ä»–'">
              <label for="hr-residentAddressSkipReasonOther">ç†ç”±ï¼ˆãã®ä»–ï¼‰</label>
              <input 
                type="text" 
                id="hr-residentAddressSkipReasonOther" 
                formControlName="residentAddressSkipReasonOther" 
                class="form-input"
                readonly
              >
            </div>
            <div class="form-group full-width" *ngIf="!employeeEditForm.get('skipResidentAddress')?.value">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [checked]="sameAsCurrentAddress" 
                  (change)="onSameAddressChange($event)"
                >
                ä½æ‰€ï¼ˆç¾ä½æ‰€ã¨åŒã˜ï¼‰
              </label>
            </div>
            <div class="form-group" *ngIf="!employeeEditForm.get('skipResidentAddress')?.value">
              <label for="hr-residentPostalCode">éƒµä¾¿ç•ªå·</label>
              <input 
                type="text" 
                id="hr-residentPostalCode" 
                formControlName="residentPostalCode" 
                class="form-input"
                placeholder="ä¾‹: 1234567"
                maxlength="7"
                pattern="[0-9]{7}"
                title="7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                [readonly]="sameAsCurrentAddress"
              >
            </div>
            <div class="form-group full-width" *ngIf="!employeeEditForm.get('skipResidentAddress')?.value">
              <label for="hr-residentAddress">ä½æ‰€ <span class="required">*</span></label>
              <textarea 
                id="hr-residentAddress" 
                formControlName="residentAddress" 
                class="form-input" 
                rows="2"
                [readonly]="sameAsCurrentAddress"
              ></textarea>
            </div>
            <div class="form-group full-width" *ngIf="!employeeEditForm.get('skipResidentAddress')?.value">
              <label for="hr-residentAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <textarea 
                id="hr-residentAddressKana" 
                formControlName="residentAddressKana" 
                class="form-input" 
                rows="2"
                [readonly]="sameAsCurrentAddress"
              ></textarea>
            </div>
          </div>
        </section>

        <!-- å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸</h3>
          <div class="form-grid">
            <div class="form-group full-width">
              <label for="hr-resume">å±¥æ­´æ›¸æ·»ä»˜</label>
              <input 
                type="file" 
                id="hr-resume" 
                class="form-input"
                accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                (change)="onFileSelected($event, 'resume')"
              >
              <div *ngIf="resumeFile" class="file-name">{{ resumeFile.name }}</div>
              <div *ngIf="!resumeFile && existingResumeFileUrl" class="file-info" style="margin-top: 0.5rem;">
                <a [href]="existingResumeFileUrl" target="_blank" class="file-link">
                  {{ existingResumeFileName || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
                </a>
              </div>
            </div>
            <div class="form-group full-width">
              <label for="hr-careerHistory">è·å‹™çµŒæ­´æ›¸æ·»ä»˜</label>
              <input 
                type="file" 
                id="hr-careerHistory" 
                class="form-input"
                accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                (change)="onFileSelected($event, 'careerHistory')"
              >
              <div *ngIf="careerHistoryFile" class="file-name">{{ careerHistoryFile.name }}</div>
              <div *ngIf="!careerHistoryFile && existingCareerHistoryFileUrl" class="file-info" style="margin-top: 0.5rem;">
                <a [href]="existingCareerHistoryFileUrl" target="_blank" class="file-link">
                  {{ existingCareerHistoryFileName || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
                </a>
              </div>
            </div>
          </div>
        </section>

        <!-- ç·Šæ€¥é€£çµ¡å…ˆæ¬„ -->
        <section class="form-section">
          <h3 class="section-title">ç·Šæ€¥é€£çµ¡å…ˆ</h3>
          <div formGroupName="emergencyContact" class="nested-form">
            <div class="form-grid">
              <div class="form-group">
                <label for="hr-emergencyName">æ°å</label>
                <input 
                  type="text" 
                  id="hr-emergencyName" 
                  formControlName="name" 
                  class="form-input"
                >
              </div>
              <div class="form-group">
                <label for="hr-emergencyNameKana">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
                <input 
                  type="text" 
                  id="hr-emergencyNameKana" 
                  formControlName="nameKana" 
                  class="form-input"
                >
              </div>
              <div class="form-group">
                <label for="hr-emergencyRelationship">ç¶šæŸ„</label>
                <input 
                  type="text" 
                  id="hr-emergencyRelationship" 
                  formControlName="relationship" 
                  class="form-input"
                >
              </div>
              <div class="form-group">
                <label for="hr-emergencyPhone">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·</label>
                <input 
                  type="tel" 
                  id="hr-emergencyPhone" 
                  formControlName="phone" 
                  class="form-input"
                >
              </div>
              <div class="form-group full-width">
                <label>
                  <input 
                    type="checkbox" 
                    [checked]="sameAsCurrentAddressForEmergency"
                    (change)="onSameAddressForEmergencyChange($event)"
                    class="checkbox-input"
                  >
                  ç¾ä½æ‰€ã¨åŒã˜
                </label>
              </div>
              <div class="form-group full-width">
                <label for="hr-emergencyAddress">ä½æ‰€</label>
                <textarea 
                  id="hr-emergencyAddress" 
                  formControlName="address" 
                  class="form-input" 
                  rows="2"
                  [readonly]="sameAsCurrentAddressForEmergency"
                ></textarea>
              </div>
              <div class="form-group full-width">
                <label for="hr-emergencyAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
                <textarea 
                  id="hr-emergencyAddressKana" 
                  formControlName="addressKana" 
                  class="form-input" 
                  rows="2"
                  [readonly]="sameAsCurrentAddressForEmergency"
                ></textarea>
              </div>
            </div>
          </div>
        </section>

        <!-- å£åº§æƒ…å ±æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">å£åº§æƒ…å ±</h3>
          <div formGroupName="bankAccount" class="nested-form">
            <div class="form-grid">
              <div class="form-group">
                <label for="hr-bankName">éŠ€è¡Œå</label>
                <input 
                  type="text" 
                  id="hr-bankName" 
                  formControlName="bankName" 
                  class="form-input"
                >
              </div>
              <div class="form-group">
                <label for="hr-accountType">é é‡‘ç¨®åˆ¥</label>
                <select 
                  id="hr-accountType" 
                  formControlName="accountType" 
                  class="form-input"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="æ™®é€š">æ™®é€š</option>
                  <option value="å½“åº§">å½“åº§</option>
                  <option value="è²¯è“„">è²¯è“„</option>
                </select>
              </div>
              <div class="form-group">
                <label for="hr-accountHolder">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰</label>
                <input 
                  type="text" 
                  id="hr-accountHolder" 
                  formControlName="accountHolder" 
                  class="form-input"
                >
              </div>
              <div class="form-group">
                <label for="hr-branchName">æ”¯åº—å</label>
                <input 
                  type="text" 
                  id="hr-branchName" 
                  formControlName="branchName" 
                  class="form-input"
                >
              </div>
              <div class="form-group">
                <label for="hr-accountNumber">å£åº§ç•ªå·</label>
                <input 
                  type="text" 
                  id="hr-accountNumber" 
                  formControlName="accountNumber" 
                  class="form-input"
                >
              </div>
            </div>
          </div>
        </section>

        <!-- ç¤¾ä¼šä¿é™ºæ¬„ -->
        <section class="form-section">
          <h3 class="section-title">ç¤¾ä¼šä¿é™º</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-healthInsuranceNumber">å¥åº·ä¿é™ºã®è¢«ä¿é™ºè€…æ•´ç†ç•ªå· <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-healthInsuranceNumber" 
                formControlName="healthInsuranceNumber" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-pensionInsuranceNumber">åšç”Ÿå¹´é‡‘ä¿é™ºã®è¢«ä¿é™ºè€…æ•´ç†ç•ªå· <span class="required">*</span></label>
              <input 
                type="text" 
                id="hr-pensionInsuranceNumber" 
                formControlName="pensionInsuranceNumber" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="hr-basicPensionNumberPart1">åŸºç¤å¹´é‡‘ç•ªå· <span class="required">*</span></label>
              <div class="basic-pension-number-container">
                <input 
                  type="text" 
                  id="hr-basicPensionNumberPart1" 
                  formControlName="basicPensionNumberPart1" 
                  class="form-input basic-pension-part"
                  maxlength="4"
                  (input)="formatBasicPensionNumberInput($event, 1)"
                  placeholder="0000"
                >
                <span class="basic-pension-separator">-</span>
                <input 
                  type="text" 
                  id="hr-basicPensionNumberPart2" 
                  formControlName="basicPensionNumberPart2" 
                  class="form-input basic-pension-part"
                  maxlength="6"
                  (input)="formatBasicPensionNumberInput($event, 2)"
                  placeholder="000000"
                >
              </div>
            </div>
            <div class="form-group">
              <label for="hr-pensionHistoryStatus">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´</label>
              <select 
                id="hr-pensionHistoryStatus" 
                formControlName="pensionHistoryStatus" 
                class="form-input" 
                (change)="onPensionHistoryChange($event)"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let option of pensionHistoryOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="form-group full-width" *ngIf="hasPensionHistory">
              <label for="hr-pensionHistory">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ï¼ˆè©³ç´°ï¼‰</label>
              <textarea 
                id="hr-pensionHistory" 
                formControlName="pensionHistory" 
                class="form-input" 
                rows="4"
              ></textarea>
            </div>
            <div class="form-group">
              <label for="hr-socialInsuranceAcquisitionDate">ç¤¾ä¼šä¿é™ºã®è³‡æ ¼å–å¾—å¹´æœˆæ—¥ <span class="required">*</span></label>
              <input 
                type="date" 
                id="hr-socialInsuranceAcquisitionDate" 
                formControlName="socialInsuranceAcquisitionDate" 
                class="form-input"
              >
            </div>
            <div class="form-group" *ngIf="employeeEditForm.get('employmentStatus')?.value !== 'åœ¨ç±'">
              <label for="hr-socialInsuranceLossDate">ç¤¾ä¼šä¿é™ºã®è³‡æ ¼å–ªå¤±å¹´æœˆæ—¥ <span class="required">*</span></label>
              <input 
                type="date" 
                id="hr-socialInsuranceLossDate" 
                formControlName="socialInsuranceLossDate" 
                class="form-input"
              >
            </div>
            <div class="form-group full-width">
              <label for="hr-basicPensionNumberDoc">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡æ·»ä»˜</label>
              <input 
                type="file" 
                id="hr-basicPensionNumberDoc" 
                class="form-input"
                accept=".pdf,.jpg,.jpeg,.png"
                (change)="onFileSelected($event, 'basicPensionNumberDoc')"
              >
              <div *ngIf="basicPensionNumberDocFile" class="file-name">{{ basicPensionNumberDocFile.name }}</div>
              <div *ngIf="!basicPensionNumberDocFile && existingBasicPensionNumberDocFileUrl" class="file-info" style="margin-top: 0.5rem;">
                <a [href]="existingBasicPensionNumberDocFileUrl" target="_blank" class="file-link">
                  {{ existingBasicPensionNumberDocFileName || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
                </a>
              </div>
            </div>
          </div>
        </section>

        <!-- æ‰¶é¤Šè€…æƒ…å ±æ¬„ -->
        <section class="form-section">
          <h3 class="section-title">æ‰¶é¤Šè€…æƒ…å ±</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-dependentStatus">è¢«æ‰¶é¤Šè€…</label>
              <div class="readonly-field">
                {{ employeeDependentStatus || '-' }}
              </div>
            </div>
          </div>
        </section>


        <!-- ä¿é™ºè€…ç¨®åˆ¥æ¬„ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
        <section class="form-section hr-only-section">
          <h3 class="section-title">ä¿é™ºè€…ç¨®åˆ¥ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="hr-healthInsuranceType">å¥åº·ä¿é™ºè€…ç¨®åˆ¥ <span class="required">*</span></label>
              <select 
                id="hr-healthInsuranceType" 
                formControlName="healthInsuranceType" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let type of healthInsuranceTypes" [value]="type">{{ type }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="hr-nursingInsuranceType">ä»‹è­·ä¿é™ºè€…ç¨®åˆ¥ <span class="required">*</span></label>
              <select 
                id="hr-nursingInsuranceType" 
                formControlName="nursingInsuranceType" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let type of nursingInsuranceTypes" [value]="type">{{ type }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="hr-pensionInsuranceType">åšç”Ÿå¹´é‡‘ä¿é™ºè€…ç¨®åˆ¥ <span class="required">*</span></label>
              <select 
                id="hr-pensionInsuranceType" 
                formControlName="pensionInsuranceType" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option *ngFor="let type of pensionInsuranceTypes" [value]="type">{{ type }}</option>
              </select>
            </div>
          </div>
        </section>

        <!-- ãã®ä»–è³‡æ ¼æƒ…å ±æ¬„ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
        <section class="form-section hr-only-section">
          <h3 class="section-title">ãã®ä»–è³‡æ ¼æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>äºŒä»¥ä¸Šäº‹æ¥­æ‰€å‹¤å‹™è€…ã®å–å¾—ã‹ <span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="multipleWorkplaceAcquisition" 
                    value="ã¯ã„"
                    name="multipleWorkplaceAcquisition"
                  >
                  ã¯ã„
                </label>
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="multipleWorkplaceAcquisition" 
                    value="ã„ã„ãˆ"
                    name="multipleWorkplaceAcquisition"
                  >
                  ã„ã„ãˆ
                </label>
              </div>
              <div *ngIf="employeeEditForm.get('multipleWorkplaceAcquisition')?.invalid && employeeEditForm.get('multipleWorkplaceAcquisition')?.touched" class="error-message">
                äºŒä»¥ä¸Šäº‹æ¥­æ‰€å‹¤å‹™è€…ã®å–å¾—ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
            <div class="form-group">
              <label>é€€è·å¾Œã®ç¶™ç¶šå†é›‡ç”¨è€…ã®å–å¾—ã‹ <span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="reemploymentAfterRetirement" 
                    value="ã¯ã„"
                    name="reemploymentAfterRetirement"
                  >
                  ã¯ã„
                </label>
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="reemploymentAfterRetirement" 
                    value="ã„ã„ãˆ"
                    name="reemploymentAfterRetirement"
                  >
                  ã„ã„ãˆ
                </label>
              </div>
              <div *ngIf="employeeEditForm.get('reemploymentAfterRetirement')?.invalid && employeeEditForm.get('reemploymentAfterRetirement')?.touched" class="error-message">
                é€€è·å¾Œã®ç¶™ç¶šå†é›‡ç”¨è€…ã®å–å¾—ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
            <div class="form-group">
              <label>ãã®ä»– <span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="otherQualificationAcquisition" 
                    value="ã¯ã„"
                    name="otherQualificationAcquisition"
                    (change)="onEmployeeOtherQualificationAcquisitionChange($event)"
                  >
                  ã¯ã„
                </label>
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="otherQualificationAcquisition" 
                    value="ã„ã„ãˆ"
                    name="otherQualificationAcquisition"
                    (change)="onEmployeeOtherQualificationAcquisitionChange($event)"
                  >
                  ã„ã„ãˆ
                </label>
              </div>
              <div *ngIf="employeeEditForm.get('otherQualificationAcquisition')?.invalid && employeeEditForm.get('otherQualificationAcquisition')?.touched" class="error-message">
                ãã®ä»–ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
            <div class="form-group">
              <div *ngIf="employeeEditForm.get('reemploymentAfterRetirement')?.invalid && employeeEditForm.get('reemploymentAfterRetirement')?.touched" class="error-message">
                é€€è·å¾Œã®ç¶™ç¶šå†é›‡ç”¨è€…ã®å–å¾—ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
            <div class="form-group">
              <div *ngIf="employeeEditForm.get('otherQualificationAcquisition')?.invalid && employeeEditForm.get('otherQualificationAcquisition')?.touched" class="error-message">
                ãã®ä»–ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
            <div class="form-group full-width" *ngIf="employeeEditForm.get('otherQualificationAcquisition')?.value === 'ã¯ã„'">
              <label for="employee-otherQualificationReason">ç†ç”± <span class="required">*</span></label>
              <input 
                type="text" 
                id="employee-otherQualificationReason" 
                formControlName="otherQualificationReason" 
                class="form-input"
                placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
              >
              <div *ngIf="employeeEditForm.get('otherQualificationReason')?.invalid && employeeEditForm.get('otherQualificationReason')?.touched" class="error-message">
                ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </div>
            </div>
          </div>
        </section>

        <!-- å‘å†…å“¡æ¬„ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
        <section class="form-section hr-only-section">
          <h3 class="section-title">å‘å†…å“¡ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>å‘å†…å“¡ã§ã‚ã‚‹ã‹ <span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="isMiner" 
                    value="ã¯ã„"
                    name="isMiner"
                  >
                  ã¯ã„
                </label>
                <label class="radio-label">
                  <input 
                    type="radio" 
                    formControlName="isMiner" 
                    value="ã„ã„ãˆ"
                    name="isMiner"
                  >
                  ã„ã„ãˆ
                </label>
              </div>
              <div *ngIf="employeeEditForm.get('isMiner')?.invalid && employeeEditForm.get('isMiner')?.touched" class="error-message">
                å‘å†…å“¡ã§ã‚ã‚‹ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
          </div>
        </section>

      <!-- æ‰¶é¤Šè€…æƒ…å ±æ¬„ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
        <section class="form-section hr-only-section">
          <h3 class="section-title">æ‰¶é¤Šè€…æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
          <div class="dependents-container">
            <div class="dependents-header">
              <h4>æ‰¶é¤Šè€…ä¸€è¦§</h4>
            </div>
            
            <div *ngFor="let dependent of dependents; let i = index" class="dependent-item">
              <div class="dependent-header" (click)="toggleDependentExpanded(i)" style="cursor: pointer;">
                <h5>æ‰¶é¤Šè€… {{ i + 1 }} <span class="expand-icon">{{ isDependentExpanded(i) ? 'â–¼' : 'â–¶' }}</span></h5>
                <button type="button" class="remove-dependent-button" (click)="removeDependent(i); $event.stopPropagation()">
                  å‰Šé™¤
                </button>
              </div>
              <div class="form-grid" *ngIf="isDependentExpanded(i)">
                <div class="form-group">
                  <label [for]="'hr-dependent-name-' + i">æ°å</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-name-' + i"
                    [(ngModel)]="dependent.name"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: å±±ç”° èŠ±å­"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-nameKana-' + i">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-nameKana-' + i"
                    [(ngModel)]="dependent.nameKana"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: ãƒ¤ãƒãƒ€ ãƒãƒŠã‚³"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-relationship-' + i">ç¶šæŸ„</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-relationship-' + i"
                    [(ngModel)]="dependent.relationship"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: å¦»ã€é•·ç”·"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-birthDate-' + i">ç”Ÿå¹´æœˆæ—¥</label>
                  <input 
                    type="date" 
                    [id]="'hr-dependent-birthDate-' + i"
                    [(ngModel)]="dependent.birthDate"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-gender-' + i">æ€§åˆ¥</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-gender-' + i"
                    [(ngModel)]="dependent.gender"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: ç”·æ€§ã€å¥³æ€§"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-phoneNumber-' + i">é›»è©±ç•ªå·</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-phoneNumber-' + i"
                    [(ngModel)]="dependent.phoneNumber"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: 090-1234-5678"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-occupation-' + i">è·æ¥­</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-occupation-' + i"
                    [(ngModel)]="dependent.occupation"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: ä¼šç¤¾å“¡"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-annualIncome-' + i">å¹´é–“åå…¥è¦‹è¾¼ã¿é¡</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-annualIncome-' + i"
                    [(ngModel)]="dependent.annualIncome"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: 1000000"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-monthlyIncome-' + i">æœˆé¡åå…¥è¦‹è¾¼ã¿é¡</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-monthlyIncome-' + i"
                    [(ngModel)]="dependent.monthlyIncome"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: 100000"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-dependentStartDate-' + i">ç¤¾ä¼šä¿é™ºã®æ‰¶é¤Šè€…ã¨ãªã£ãŸæ—¥</label>
                  <input 
                    type="date" 
                    [id]="'hr-dependent-dependentStartDate-' + i"
                    [(ngModel)]="dependent.dependentStartDate"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                  >
                </div>
                <div class="form-group full-width">
                  <label [for]="'hr-dependent-dependentReason-' + i">æ‰¶é¤Šã«è¿½åŠ ã•ã‚ŒãŸç†ç”±</label>
                  <textarea 
                    [id]="'hr-dependent-dependentReason-' + i"
                    [(ngModel)]="dependent.dependentReason"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input" 
                    rows="2"
                    placeholder="æ‰¶é¤Šã«è¿½åŠ ã•ã‚ŒãŸç†ç”±ã‚’å…¥åŠ›"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-myNumber-' + i">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-myNumber-' + i"
                    [(ngModel)]="dependent.myNumber"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: 1234-5678-9012"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-livingTogether-' + i">åŒå±…/åˆ¥å±…</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-livingTogether-' + i"
                    [(ngModel)]="dependent.livingTogether"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: åŒå±…ã€åˆ¥å±…"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-postalCode-' + i">éƒµä¾¿ç•ªå·</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-postalCode-' + i"
                    [(ngModel)]="dependent.postalCode"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: 123-4567"
                  >
                </div>
                <div class="form-group full-width">
                  <label [for]="'hr-dependent-address-' + i">ä½æ‰€</label>
                  <textarea 
                    [id]="'hr-dependent-address-' + i"
                    [(ngModel)]="dependent.address"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input" 
                    rows="2"
                    placeholder="ä½æ‰€ã‚’å…¥åŠ›"
                  ></textarea>
                </div>
                <div class="form-group full-width">
                  <label [for]="'hr-dependent-addressKana-' + i">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-addressKana-' + i"
                    [(ngModel)]="dependent.addressKana"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: ãƒˆã‚¦ã‚­ãƒ§ã‚¦ãƒˆã‚·ãƒ³ã‚¸ãƒ¥ã‚¯ã‚¯..."
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-addressChangeDate-' + i">ä½æ‰€å¤‰æ›´å¹´æœˆæ—¥</label>
                  <input 
                    type="date" 
                    [id]="'hr-dependent-addressChangeDate-' + i"
                    [(ngModel)]="dependent.addressChangeDate"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                  >
                </div>
                <div class="form-group">
                  <label [for]="'hr-dependent-basicPensionNumber-' + i">åŸºç¤å¹´é‡‘ç•ªå·</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-basicPensionNumber-' + i"
                    [(ngModel)]="dependent.basicPensionNumber"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: 0000-000000"
                  >
                </div>
                <!-- æ·»ä»˜æ›¸é¡ -->
                <div class="form-group full-width" *ngIf="dependent.basicPensionNumberDocFileUrl">
                  <label [for]="'hr-dependent-basicPensionNumberDoc-' + i">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡</label>
                  <div class="file-link-container">
                    <a [href]="dependent.basicPensionNumberDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.basicPensionNumberDocFileUrl, dependent.basicPensionNumberDocFileName) }}</a>
                  </div>
                </div>
                <div class="form-group full-width" *ngIf="dependent.myNumberDocFileUrl">
                  <label [for]="'hr-dependent-myNumberDoc-' + i">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ç¢ºèªæ›¸é¡</label>
                  <div class="file-link-container">
                    <a [href]="dependent.myNumberDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.myNumberDocFileUrl, dependent.myNumberDocFileName) }}</a>
                  </div>
                </div>
                <div class="form-group full-width" *ngIf="dependent.identityDocFileUrl">
                  <label [for]="'hr-dependent-identityDoc-' + i">èº«å…ƒç¢ºèªæ›¸é¡</label>
                  <div class="file-link-container">
                    <a [href]="dependent.identityDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.identityDocFileUrl, dependent.identityDocFileName) }}</a>
                  </div>
                </div>
                <div class="form-group full-width" *ngIf="dependent.disabilityCardFileUrl">
                  <label [for]="'hr-dependent-disabilityCardFile-' + i">éšœãŒã„è€…æ‰‹å¸³ã®ç”»åƒ</label>
                  <div class="file-link-container">
                    <a [href]="dependent.disabilityCardFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.disabilityCardFileUrl, dependent.disabilityCardFileName) }}</a>
                  </div>
                </div>
                <div class="form-group" *ngIf="dependent.disabilityCategory || dependent.disabilityCardType || dependent.disabilityCardIssueDate">
                  <label [for]="'hr-dependent-disabilityCategory-' + i">éšœãŒã„è€…åŒºåˆ†</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-disabilityCategory-' + i"
                    [(ngModel)]="dependent.disabilityCategory"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: èº«ä½“éšœå®³"
                  >
                </div>
                <div class="form-group" *ngIf="dependent.disabilityCategory || dependent.disabilityCardType || dependent.disabilityCardIssueDate">
                  <label [for]="'hr-dependent-disabilityCardType-' + i">éšœãŒã„è€…æ‰‹å¸³ã®ç¨®é¡</label>
                  <input 
                    type="text" 
                    [id]="'hr-dependent-disabilityCardType-' + i"
                    [(ngModel)]="dependent.disabilityCardType"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                    placeholder="ä¾‹: èº«ä½“éšœå®³è€…æ‰‹å¸³"
                  >
                </div>
                <div class="form-group" *ngIf="dependent.disabilityCategory || dependent.disabilityCardType || dependent.disabilityCardIssueDate">
                  <label [for]="'hr-dependent-disabilityCardIssueDate-' + i">éšœãŒã„è€…æ‰‹å¸³ã®äº¤ä»˜å¹´æœˆæ—¥</label>
                  <input 
                    type="date" 
                    [id]="'hr-dependent-disabilityCardIssueDate-' + i"
                    [(ngModel)]="dependent.disabilityCardIssueDate"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input"
                  >
                </div>
                <div class="form-group full-width">
                  <label [for]="'hr-dependent-notes-' + i">å‚™è€ƒ</label>
                  <textarea 
                    [id]="'hr-dependent-notes-' + i"
                    [(ngModel)]="dependent.notes"
                    [ngModelOptions]="{standalone: true}"
                    class="form-input" 
                    rows="2"
                    placeholder="å‚™è€ƒã‚’å…¥åŠ›"
                  ></textarea>
                </div>
              </div>
            </div>
            
            <div *ngIf="dependents.length === 0" class="no-data">
              æ‰¶é¤Šè€…ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
            </div>
          </div>
        </section>


        <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
        <div class="modal-actions">
          <button type="button" class="cancel-button" (click)="closeEmployeeEditModal()">
            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
          </button>
          <button type="submit" class="submit-button" [disabled]="employeeEditForm.invalid || isSaving">
            {{ isSaving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ç”³è«‹è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆäººäº‹å´ï¼‰ -->
<div class="modal-overlay" *ngIf="showApplicationDetailModal">
  <div class="modal-content application-detail-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">ç”³è«‹è©³ç´°</h2>
      <button class="modal-close-button" (click)="closeApplicationDetailModal()">Ã—</button>
    </div>
    
    <div class="application-detail-content" *ngIf="selectedApplication">
      <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´æ¬„ -->
      <section class="status-change-section-top" *ngIf="statusChangeForm">
        <h3 class="section-title">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´</h3>
        <form [formGroup]="statusChangeForm" (ngSubmit)="updateApplicationStatus()">
          <div class="status-change-form">
            <div class="form-group">
              <label for="statusSelect">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ <span class="required">*</span></label>
              <select 
                id="statusSelect" 
                formControlName="status" 
                class="form-input status-select"
                (change)="onStatusChange()"
              >
                <option value="æ‰¿èªå¾…ã¡">æ‰¿èªå¾…ã¡</option>
                <option value="ç¢ºèªä¸­">ç¢ºèªä¸­</option>
                <option value="æ‰¿èªæ¸ˆã¿">æ‰¿èªæ¸ˆã¿</option>
                <option value="å·®ã—æˆ»ã—">å·®ã—æˆ»ã—</option>
                <option value="å†ç”³è«‹">å†ç”³è«‹</option>
              </select>
              <div *ngIf="selectedApplication?.status === 'æ‰¿èªæ¸ˆã¿' || selectedApplication?.status === 'æ‰¿èª'" class="info-message" style="margin-top: 0.5rem; color: #666; font-size: 0.9rem;">
                æ‰¿èªæ¸ˆã¿ã®ç”³è«‹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯å¤‰æ›´ã§ãã¾ã›ã‚“
              </div>
              <div *ngIf="selectedApplication?.status === 'å–ã‚Šæ¶ˆã—'" class="info-message" style="margin-top: 0.5rem; color: #666; font-size: 0.9rem;">
                å–ã‚Šæ¶ˆã—æ¸ˆã¿ã®ç”³è«‹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯å¤‰æ›´ã§ãã¾ã›ã‚“
              </div>
            </div>
            <div class="form-group" *ngIf="statusChangeForm.get('status')?.value === 'å·®ã—æˆ»ã—'">
              <label for="statusComment">ã‚³ãƒ¡ãƒ³ãƒˆ <span class="required">*</span></label>
              <textarea 
                id="statusComment" 
                formControlName="comment" 
                class="form-input status-comment"
                [disabled]="isUpdatingStatus"
                rows="4"
                placeholder="å·®ã—æˆ»ã—ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
              ></textarea>
              <div *ngIf="statusChangeForm.get('comment')?.invalid && statusChangeForm.get('comment')?.touched" class="error-message">
                ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </div>
            </div>
            
            <!-- æ–‡æ›¸è‡ªå‹•ä½œæˆæ¬„ï¼ˆæ‰¿èªæ¸ˆã¿ã®å ´åˆã®ã¿è¡¨ç¤ºï¼‰ï¼ˆéè¡¨ç¤ºï¼‰ -->
            <div class="document-auto-generation-section" *ngIf="false && statusChangeForm.get('status')?.value === 'æ‰¿èªæ¸ˆã¿' && availableDocuments.length > 0">
              <h4 class="document-section-title">å¯¾å¿œã™ã‚‹æ–‡æ›¸ã‚’è‡ªå‹•ä½œæˆ</h4>
              <div class="document-checkboxes">
                <label *ngFor="let doc of availableDocuments" class="document-checkbox-label">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="documentCheckboxes[doc]"
                    [ngModelOptions]="{standalone: true}"
                    class="document-checkbox"
                  >
                  <span class="document-name">{{ doc }}</span>
                </label>
              </div>
              <p class="document-note">
                ãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ãŸæ–‡æ›¸ã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã¨è‡ªå‹•ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚
              </p>
            </div>
            
            <div class="status-change-actions">
              <button 
                type="submit" 
                class="status-update-button"
                [disabled]="selectedApplication?.status === 'æ‰¿èªæ¸ˆã¿' || selectedApplication?.status === 'æ‰¿èª' || isUpdatingStatus"
              >
                {{ isUpdatingStatus ? 'æ›´æ–°ä¸­...' : 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°' }}
              </button>
            </div>
          </div>
        </form>
      </section>
      
      <!-- ç”³è«‹åŸºæœ¬æƒ…å ± -->
      <section class="detail-section">
        <h3 class="section-title">ç”³è«‹åŸºæœ¬æƒ…å ±</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹ID:</span>
            <span class="detail-value">{{ selectedApplication.applicationId }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹ç¨®é¡:</span>
            <span class="detail-value">{{ selectedApplication.applicationType }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹è€…:</span>
            <span class="detail-value">{{ selectedApplication.employeeName || '-' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ç¤¾å“¡ç•ªå·:</span>
            <span class="detail-value">{{ selectedApplication.employeeNumber || '-' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</span>
            <span class="detail-value">
              <span class="status-badge" 
                    [class.status-pending]="selectedApplication.status === 'æ‰¿èªå¾…ã¡'"
                    [class.status-reviewing]="selectedApplication.status === 'ç¢ºèªä¸­'"
                    [class.status-approved]="selectedApplication.status === 'æ‰¿èª' || selectedApplication.status === 'æ‰¿èªæ¸ˆã¿'"
                    [class.status-rejected]="selectedApplication.status === 'å´ä¸‹' || selectedApplication.status === 'å·®ã—æˆ»ã—'"
                    [class.status-resubmitted]="selectedApplication.status === 'å†ç”³è«‹' || selectedApplication.status === 'å†æå‡º'"
                    [class.status-cancelled]="selectedApplication.status === 'å–ã‚Šæ¶ˆã—'">
                {{ selectedApplication.status }}
              </span>
            </span>
          </div>
          <div class="detail-item full-width" *ngIf="selectedApplication.status === 'å·®ã—æˆ»ã—' && selectedApplication.statusComment">
            <span class="detail-label">å·®ã—æˆ»ã—ã‚³ãƒ¡ãƒ³ãƒˆ:</span>
            <span class="detail-value">{{ selectedApplication.statusComment }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹æ—¥:</span>
            <span class="detail-value">{{ getApplicationDate(selectedApplication) | date:'yyyyå¹´MMæœˆddæ—¥' }}</span>
          </div>
        </div>
      </section>
      
      <!-- æ‰¶é¤Šå®¶æ—è¿½åŠ ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'æ‰¶é¤Šå®¶æ—è¿½åŠ '">
        <!-- ç¶šæŸ„æƒ…å ± -->
        <section class="detail-section">
          <h3 class="section-title">ç¶šæŸ„</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">ç¶šæŸ„ç¨®åˆ¥:</span>
              <span class="detail-value">{{ selectedApplication.relationshipType || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === 'é…å¶è€…'">
              <span class="detail-label">é…å¶è€…ç¨®åˆ¥:</span>
              <span class="detail-value">{{ selectedApplication.spouseType || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === 'é…å¶è€…ä»¥å¤–'">
              <span class="detail-label">ç¶šæŸ„:</span>
              <span class="detail-value">{{ selectedApplication.relationship || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- åŸºç¤å¹´é‡‘ç•ªå· -->
        <section class="detail-section">
          <h3 class="section-title">åŸºç¤å¹´é‡‘ç•ªå·</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·:</span>
              <span class="detail-value">{{ formatBasicPensionNumberForDisplay(selectedApplication.basicPensionNumber) }}</span>
            </div>
          </div>
        </section>
        
        <!-- åŸºæœ¬æƒ…å ± -->
        <section class="detail-section">
          <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">å§“:</span>
              <span class="detail-value">{{ selectedApplication.lastName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å:</span>
              <span class="detail-value">{{ selectedApplication.firstName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.lastNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.firstNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç”Ÿå¹´æœˆæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.birthDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">æ€§åˆ¥:</span>
              <span class="detail-value">{{ selectedApplication.gender || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">é›»è©±ç•ªå·:</span>
              <span class="detail-value">{{ selectedApplication.phoneNumber || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">è·æ¥­:</span>
              <span class="detail-value">{{ selectedApplication.occupation || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- åå…¥æƒ…å ± -->
        <section class="detail-section">
          <h3 class="section-title">åå…¥æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">æ‰¶é¤Šè¿½åŠ æ—¥ã‹ã‚‰ã®å¹´é–“åå…¥è¦‹è¾¼ã¿é¡:</span>
              <span class="detail-value">{{ selectedApplication.annualIncome ? (selectedApplication.annualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">æ‰¶é¤Šè¿½åŠ æ—¥ã‹ã‚‰ã®æœˆé¡åå…¥è¦‹è¾¼ã¿é¡:</span>
              <span class="detail-value">{{ selectedApplication.monthlyIncome ? (selectedApplication.monthlyIncome | number:'1.0-0') + 'å††' : '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç¤¾ä¼šä¿é™ºã®æ‰¶é¤Šè€…ã¨ãªã£ãŸæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.dependentStartDate || '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">æ‰¶é¤Šã«è¿½åŠ ã•ã‚ŒãŸç†ç”±:</span>
              <span class="detail-value">{{ selectedApplication.dependentReason || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼æƒ…å ± -->
        <section class="detail-section">
          <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã®æä¾›:</span>
              <span class="detail-value">{{ selectedApplication.provideMyNumber || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.provideMyNumber === 'æä¾›ã™ã‚‹'">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
              <span class="detail-value">{{ formatMyNumberForDisplay(selectedApplication.myNumber) }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.provideMyNumber === 'æä¾›ã™ã‚‹' && selectedApplication.myNumberCardFileUrl">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.provideMyNumber === 'æä¾›ã—ãªã„'">
              <span class="detail-label">æœªæä¾›ç†ç”±:</span>
              <span class="detail-value">{{ selectedApplication.myNumberNotProvidedReason || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- éšœãŒã„è€…æƒ…å ± -->
        <section class="detail-section" *ngIf="selectedApplication.disabilityCategory || selectedApplication.disabilityCardType || selectedApplication.disabilityCardIssueDate">
          <h3 class="section-title">éšœãŒã„è€…æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item" *ngIf="selectedApplication.disabilityCategory">
              <span class="detail-label">éšœãŒã„è€…åŒºåˆ†:</span>
              <span class="detail-value">{{ selectedApplication.disabilityCategory }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.disabilityCardType">
              <span class="detail-label">éšœãŒã„è€…æ‰‹å¸³ã®ç¨®é¡:</span>
              <span class="detail-value">{{ selectedApplication.disabilityCardType }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.disabilityCardIssueDate">
              <span class="detail-label">éšœãŒã„è€…æ‰‹å¸³ã®äº¤ä»˜å¹´æœˆæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.disabilityCardIssueDate }}</span>
            </div>
          </div>
        </section>
        
        <!-- ä½æ‰€æƒ…å ± -->
        <section class="detail-section">
          <h3 class="section-title">ä½æ‰€æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">åŒå±…/åˆ¥å±…:</span>
              <span class="detail-value">{{ selectedApplication.livingTogether || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
              <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
              <span class="detail-value">{{ selectedApplication.postalCode || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
              <span class="detail-label">ä½æ‰€:</span>
              <span class="detail-value">{{ selectedApplication.address || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
              <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.addressKana || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
              <span class="detail-label">ä½æ‰€å¤‰æ›´å¹´æœˆæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.addressChangeDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æ·»ä»˜æ›¸é¡ -->
        <section class="detail-section" *ngIf="selectedApplication.basicPensionNumberDocFileUrl || selectedApplication.myNumberDocFileUrl || selectedApplication.identityDocFileUrl || selectedApplication.disabilityCardFileUrl">
          <h3 class="section-title">æ·»ä»˜æ›¸é¡</h3>
          <div class="detail-grid">
            <div class="detail-item full-width" *ngIf="selectedApplication.basicPensionNumberDocFileUrl">
              <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.basicPensionNumberDocFileUrl, selectedApplication.basicPensionNumberDocFileName) }}</a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.myNumberDocFileUrl">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ç¢ºèªæ›¸é¡:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.myNumberDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.myNumberDocFileUrl, selectedApplication.myNumberDocFileName) }}</a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.identityDocFileUrl">
              <span class="detail-label">èº«å…ƒç¢ºèªæ›¸é¡:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.identityDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.identityDocFileUrl, selectedApplication.identityDocFileName) }}</a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.disabilityCardFileUrl">
              <span class="detail-label">éšœãŒã„è€…æ‰‹å¸³ã®ç”»åƒ:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.disabilityCardFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.disabilityCardFileUrl, selectedApplication.disabilityCardFileName) }}</a>
              </span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- æ‰¶é¤Šå‰Šé™¤ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'æ‰¶é¤Šå‰Šé™¤ç”³è«‹'">
        <!-- è¢«æ‰¶é¤Šè€…ç§»å‹•æ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">è¢«æ‰¶é¤Šè€…ç§»å‹•æ—¥</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">è¢«æ‰¶é¤Šè€…ç§»å‹•æ—¥:</span>
              <span class="detail-value">{{ selectedApplication.removalDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æ‰¶é¤Šå‰Šé™¤ã®ç†ç”± -->
        <section class="detail-section">
          <h3 class="section-title">æ‰¶é¤Šå‰Šé™¤ã®ç†ç”±</h3>
          <div class="detail-grid">
            <div class="detail-item full-width">
              <span class="detail-label">æ‰¶é¤Šå‰Šé™¤ã®ç†ç”±:</span>
              <span class="detail-value">{{ selectedApplication.removalReason || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- è¢«æ‰¶é¤Šè€…æƒ…å ± -->
        <section class="detail-section" *ngIf="selectedApplication.dependent">
          <h3 class="section-title">è¢«æ‰¶é¤Šè€…æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">æ°å:</span>
              <span class="detail-value">{{ selectedApplication.dependent.name || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.dependent.nameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç¶šæŸ„:</span>
              <span class="detail-value">{{ selectedApplication.dependent.relationship || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç”Ÿå¹´æœˆæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.dependent.birthDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
              <span class="detail-value">{{ selectedApplication.dependent.myNumber ? 'â—â—â—â—-â—â—â—â—-â—â—â—â—' : '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">ä½æ‰€:</span>
              <span class="detail-value">{{ selectedApplication.dependent.address || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.dependent.notes">
              <span class="detail-label">å‚™è€ƒ:</span>
              <span class="detail-value">{{ selectedApplication.dependent.notes }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- ä½æ‰€å¤‰æ›´ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ä½æ‰€å¤‰æ›´ç”³è«‹'">
        <!-- å¼•ã£è¶Šã—ã—ãŸæ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">å¼•ã£è¶Šã—ã—ãŸæ—¥</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">å¼•ã£è¶Šã—ã—ãŸæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.moveDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æ–°ã—ã„ä½æ‰€ -->
        <section class="detail-section" *ngIf="selectedApplication.newAddress">
          <h3 class="section-title">æ–°ã—ã„ä½æ‰€</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
              <span class="detail-value">{{ selectedApplication.newAddress.postalCode || '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">ä½æ‰€:</span>
              <span class="detail-value">{{ selectedApplication.newAddress.address || '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.newAddress.addressKana || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€ -->
        <section class="detail-section" *ngIf="selectedApplication.residentAddress">
          <h3 class="section-title">æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">å¤‰æ›´å‰ä½æ‰€ã¨åŒã˜:</span>
              <span class="detail-value">{{ selectedApplication.residentAddress.sameAsOldAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å¤‰æ›´å¾Œã®ä½æ‰€ã¨åŒã˜:</span>
              <span class="detail-value">{{ selectedApplication.residentAddress.sameAsNewAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
            </div>
            <div class="detail-item" *ngIf="!selectedApplication.residentAddress.sameAsOldAddress && !selectedApplication.residentAddress.sameAsNewAddress">
              <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
              <span class="detail-value">{{ selectedApplication.residentAddress.postalCode || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="!selectedApplication.residentAddress.sameAsOldAddress && !selectedApplication.residentAddress.sameAsNewAddress">
              <span class="detail-label">ä½æ‰€:</span>
              <span class="detail-value">{{ selectedApplication.residentAddress.address || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="!selectedApplication.residentAddress.sameAsOldAddress && !selectedApplication.residentAddress.sameAsNewAddress">
              <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.residentAddress.addressKana || '-' }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹'">
        <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.changeDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
        <section class="detail-section" *ngIf="selectedApplication.newMyNumber">
          <h3 class="section-title">æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">1-4æ¡ç›®:</span>
              <span class="detail-value">{{ selectedApplication.newMyNumber.part1 || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">5-8æ¡ç›®:</span>
              <span class="detail-value">{{ selectedApplication.newMyNumber.part2 || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">9-12æ¡ç›®:</span>
              <span class="detail-value">{{ selectedApplication.newMyNumber.part3 || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ -->
        <section class="detail-section" *ngIf="selectedApplication.myNumberCardFileUrl">
          <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</h3>
          <div class="detail-grid">
            <div class="detail-item full-width">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- æ°åå¤‰æ›´ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'æ°åå¤‰æ›´ç”³è«‹'">
        <!-- æ°åå¤‰æ›´ã—ãŸæ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">æ°åå¤‰æ›´ã—ãŸæ—¥</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">æ°åå¤‰æ›´ã—ãŸæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.changeDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æ–°ã—ã„æ°å -->
        <section class="detail-section" *ngIf="selectedApplication.newName">
          <h3 class="section-title">æ–°ã—ã„æ°å</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">å§“:</span>
              <span class="detail-value">{{ selectedApplication.newName.lastName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å:</span>
              <span class="detail-value">{{ selectedApplication.newName.firstName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.newName.lastNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.newName.firstNameKana || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- æœ¬äººç¢ºèªæ›¸é¡ -->
        <section class="detail-section">
          <h3 class="section-title">æœ¬äººç¢ºèªæ›¸é¡</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜:</span>
              <span class="detail-value">{{ selectedApplication.hasIdDocument ? 'ã‚ã‚Š' : 'ãªã—' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.idDocumentFileUrl">
              <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹'">
        <!-- å‡ºç”£äºˆå®šæ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">å‡ºç”£äºˆå®šæ—¥</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">å‡ºç”£äºˆå®šæ—¥:</span>
              <span class="detail-value">{{ selectedApplication.expectedDeliveryDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">åŒå­ä»¥ä¸Šã‹:</span>
              <span class="detail-value">{{ selectedApplication.isMultipleBirth || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å‡ºç”£äºˆå®šæ—¥ã‚’ç¢ºèªã§ãã‚‹æ›¸é¡æ·»ä»˜:</span>
              <span class="detail-value">{{ selectedApplication.hasDocument ? 'ã‚ã‚Š' : 'ãªã—' }}</span>
            </div>
          </div>
        </section>
        
        <!-- ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“ -->
        <section class="detail-section">
          <h3 class="section-title">ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">ç”£å‰ç”£å¾Œä¼‘æ¥­é–‹å§‹æ—¥:</span>
              <span class="detail-value">{{ selectedApplication.maternityLeaveStartDate || selectedApplication.preMaternityLeaveStartDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç”£å‰ç”£å¾Œä¼‘æ¥­çµ‚äº†æ—¥:</span>
              <span class="detail-value">{{ selectedApplication.maternityLeaveEndDate || selectedApplication.postMaternityLeaveEndDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ -->
        <section class="detail-section" *ngIf="selectedApplication.stayAddress">
          <h3 class="section-title">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ</h3>
          <div class="detail-grid">
            <div class="detail-item full-width">
              <span class="detail-label">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆï¼ˆç¾ä½æ‰€ã¨ç•°ãªã‚‹å ´åˆï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.stayAddress }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- é€€è·ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'é€€è·ç”³è«‹'">
        <!-- é€€è·æ—¥ãƒ»æœ€çµ‚å‡ºç¤¾æ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">é€€è·æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">é€€è·æ—¥:</span>
              <span class="detail-value">{{ selectedApplication.resignationDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">æœ€çµ‚å‡ºç¤¾æ—¥:</span>
              <span class="detail-value">{{ selectedApplication.lastWorkDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">é›¢è·ç¥¨ã®ç™ºè¡Œã«ã¤ã„ã¦:</span>
              <span class="detail-value">{{ selectedApplication.resignationCertificatePreference || selectedApplication.separationNotice || '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">é€€è·ç†ç”±:</span>
              <span class="detail-value">{{ selectedApplication.resignationReason || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- é€€è·å¾Œã®é€£çµ¡å…ˆ -->
        <section class="detail-section">
          <h3 class="section-title">é€€è·å¾Œã®é€£çµ¡å…ˆ</h3>
          <div class="detail-grid">
            <div class="detail-item full-width">
              <span class="detail-label">é€€è·å¾Œã®ä½æ‰€:</span>
              <span class="detail-value">{{ selectedApplication.postResignationAddress || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">é€€è·å¾Œã®é›»è©±ç•ªå·:</span>
              <span class="detail-value">{{ selectedApplication.postResignationPhoneNumber || selectedApplication.postResignationPhone || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
              <span class="detail-value">{{ selectedApplication.postResignationEmail || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ -->
        <section class="detail-section">
          <h3 class="section-title">é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥:</span>
              <span class="detail-value">{{ selectedApplication.postResignationSocialInsurance || selectedApplication.postResignationInsurance || '-' }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- ä¿é™ºè¨¼å†ç™ºè¡Œç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ä¿é™ºè¨¼å†ç™ºè¡Œç”³è«‹'">
        <!-- ç´›å¤±æƒ…å ± -->
        <section class="detail-section">
          <h3 class="section-title">ç´›å¤±æƒ…å ±</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">ç´›å¤±ã—ãŸæ—¥ä»˜:</span>
              <span class="detail-value">{{ selectedApplication.lostDate || '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">ã©ã“ã§å¤±ãã—ãŸã‹:</span>
              <span class="detail-value">{{ selectedApplication.lostLocation || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç›—é›£ã®å¯èƒ½æ€§:</span>
              <span class="detail-value">{{ selectedApplication.theftPossibility || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ä¿é™ºè¨¼å†ç™ºè¡Œã¾ã§ã«é€šé™¢ã™ã‚‹äºˆå®šãŒã‚ã‚‹ã‹:</span>
              <span class="detail-value">{{ selectedApplication.hasMedicalAppointment || '-' }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- å…¥ç¤¾æ™‚ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'å…¥ç¤¾æ™‚ç”³è«‹'">
        <!-- æ·»ä»˜è³‡æ–™ -->
        <section class="detail-section" *ngIf="selectedApplication.resumeFileUrl || selectedApplication.careerHistoryFileUrl || selectedApplication.basicPensionNumberDocFileUrl || selectedApplication.idDocumentFileUrl || selectedApplication.myNumberCardFileUrl">
          <h3 class="section-title">æ·»ä»˜è³‡æ–™</h3>
          <div class="detail-grid">
            <div class="detail-item full-width" *ngIf="selectedApplication.resumeFileUrl">
              <span class="detail-label">å±¥æ­´æ›¸:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.resumeFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.resumeFile || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.careerHistoryFileUrl">
              <span class="detail-label">è·å‹™çµŒæ­´æ›¸:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.careerHistoryFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.careerHistoryFile || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.basicPensionNumberDocFileUrl">
              <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.basicPensionNumberDocFile || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.idDocumentFileUrl">
              <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.myNumberCardFileUrl">
              <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
              <span class="detail-value">
                <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                  {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                </a>
              </span>
            </div>
          </div>
        </section>
      </ng-container>
    </div>
    
    <div class="modal-footer">
      <button 
        type="button" 
        class="cancel-application-button" 
        (click)="cancelApplication()"
        *ngIf="selectedApplication && selectedApplication.status !== 'å–ã‚Šæ¶ˆã—' && selectedApplication.status !== 'æ‰¿èªæ¸ˆã¿' && selectedApplication.status !== 'æ‰¿èª'"
        [disabled]="isUpdatingStatus"
      >å–ã‚Šæ¶ˆã—</button>
      <button type="button" class="close-detail-button" (click)="closeApplicationDetailModal()">é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>

<!-- æ–°å…¥ç¤¾å“¡è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div *ngIf="showOnboardingEmployeeModal" class="modal-overlay">
  <div class="modal-content employee-edit-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3 class="modal-title">æ–°å…¥ç¤¾å“¡è©³ç´°æƒ…å ±</h3>
      <button class="modal-close" (click)="closeOnboardingEmployeeModal()">Ã—</button>
    </div>
    
    <form [formGroup]="onboardingEmployeeEditForm" (ngSubmit)="saveOnboardingEmployeeData()" class="employee-edit-form">
      <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´æ¬„ï¼ˆä¸€ç•ªä¸Šï¼‰ -->
      <section class="form-section">
        <h3 class="section-title">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-status">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
            <select 
              id="onboarding-status"
              class="form-input"
              [ngModel]="pendingOnboardingStatus || selectedOnboardingEmployee?.status"
              [ngModelOptions]="{standalone: true}"
              (ngModelChange)="onOnboardingStatusChange($event)"
              [disabled]="(pendingOnboardingStatus || selectedOnboardingEmployee?.status) === 'ç”³è«‹å¾…ã¡'"
            >
              <option *ngIf="(pendingOnboardingStatus || selectedOnboardingEmployee?.status) === 'ç”³è«‹å¾…ã¡'" value="ç”³è«‹å¾…ã¡">ç”³è«‹å¾…ã¡</option>
              <option *ngIf="(pendingOnboardingStatus || selectedOnboardingEmployee?.status) !== 'ç”³è«‹å¾…ã¡'" value="ç”³è«‹å¾…ã¡" disabled>ç”³è«‹å¾…ã¡</option>
              <option value="ç”³è«‹æ¸ˆã¿">ç”³è«‹æ¸ˆã¿</option>
              <option value="å·®ã—æˆ»ã—">å·®ã—æˆ»ã—</option>
              <option value="æº–å‚™å®Œäº†">æº–å‚™å®Œäº†</option>
            </select>
            <div *ngIf="(pendingOnboardingStatus || selectedOnboardingEmployee?.status) === 'æº–å‚™å®Œäº†' && onboardingEmployeeEditForm.invalid" class="error-message" style="margin-top: 0.5rem;">
              å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="(pendingOnboardingStatus || selectedOnboardingEmployee?.status) === 'å·®ã—æˆ»ã—'">
            <label for="onboarding-statusComment">ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆå·®ã—æˆ»ã—ã®å ´åˆï¼‰</label>
            <textarea 
              id="onboarding-statusComment"
              class="form-input"
              [(ngModel)]="onboardingStatusComment"
              [ngModelOptions]="{standalone: true}"
              placeholder="å·®ã—æˆ»ã—ç†ç”±ãªã©ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
              rows="3"
            ></textarea>
          </div>
        </div>
        <div class="form-actions">
          <button 
            type="button" 
            class="status-button status-update"
            [disabled]="((pendingOnboardingStatus || selectedOnboardingEmployee?.status) === 'æº–å‚™å®Œäº†' && (onboardingEmployeeEditForm.invalid || onboardingIsSaving)) || onboardingIsSaving"
            (click)="updateOnboardingEmployeeStatus(pendingOnboardingStatus || selectedOnboardingEmployee?.status)"
          >
            {{ onboardingIsSaving ? 'æ›´æ–°ä¸­...' : 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°' }}
          </button>
        </div>
      </section>

      <!-- åŸºæœ¬æƒ…å ±æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-lastName">å§“ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-lastName" 
              formControlName="lastName" 
              class="form-input"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-firstName">å <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-firstName" 
              formControlName="firstName" 
              class="form-input"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-lastNameKana">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-lastNameKana" 
              formControlName="lastNameKana" 
              class="form-input"
            >
            <div *ngIf="onboardingEmployeeEditForm.get('lastNameKana')?.invalid && onboardingEmployeeEditForm.get('lastNameKana')?.touched" class="error-message">
              å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-firstNameKana">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-firstNameKana" 
              formControlName="firstNameKana" 
              class="form-input"
            >
            <div *ngIf="onboardingEmployeeEditForm.get('firstNameKana')?.invalid && onboardingEmployeeEditForm.get('firstNameKana')?.touched" class="error-message">
              åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-birthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
            <div class="birth-date-container">
              <input 
                type="date" 
                id="onboarding-birthDate" 
                formControlName="birthDate" 
                class="form-input"
                (change)="onOnboardingBirthDateChange()"
              >
              <span *ngIf="onboardingAge !== null" class="age-display">ï¼ˆ{{ onboardingAge }}æ­³ï¼‰</span>
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-gender">æˆ¸ç±ä¸Šã®æ€§åˆ¥ <span class="required">*</span></label>
            <select 
              id="onboarding-gender" 
              formControlName="gender" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="onboarding-email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
            <input 
              type="email" 
              id="onboarding-email" 
              formControlName="email" 
              class="form-input"
            >
          </div>
          <div class="form-group full-width">
            <label for="onboarding-idDocument">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-idDocument" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'idDocument')"
            >
            <div *ngIf="idDocumentFile" class="file-name">{{ idDocumentFile.name }}</div>
            <div *ngIf="!idDocumentFile && selectedOnboardingEmployee?.applicationData?.idDocumentFileUrl" class="file-info" style="margin-top: 0.5rem;">
              <a [href]="selectedOnboardingEmployee.applicationData.idDocumentFileUrl" target="_blank" class="file-link">
                {{ selectedOnboardingEmployee.applicationData.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="onboarding-myNumberPart1">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</label>
            <div class="my-number-container">
              <div class="my-number-inputs">
                <input 
                  type="text" 
                  id="onboarding-myNumberPart1" 
                  formControlName="myNumberPart1" 
                  class="form-input my-number-part"
                  [type]="onboardingShowMyNumber ? 'text' : 'password'"
                  [readonly]="!onboardingShowMyNumber"
                  maxlength="4"
                  (input)="formatMyNumberInput($event, 1)"
                  placeholder="0000"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="onboarding-myNumberPart2" 
                  formControlName="myNumberPart2" 
                  class="form-input my-number-part"
                  [type]="onboardingShowMyNumber ? 'text' : 'password'"
                  [readonly]="!onboardingShowMyNumber"
                  maxlength="4"
                  (input)="formatMyNumberInput($event, 2)"
                  placeholder="0000"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="onboarding-myNumberPart3" 
                  formControlName="myNumberPart3" 
                  class="form-input my-number-part"
                  [type]="onboardingShowMyNumber ? 'text' : 'password'"
                  [readonly]="!onboardingShowMyNumber"
                  maxlength="4"
                  (input)="formatMyNumberInput($event, 3)"
                  placeholder="0000"
                >
              </div>
              <button 
                type="button" 
                class="toggle-button" 
                (click)="toggleOnboardingMyNumber()"
              >
                {{ onboardingShowMyNumber ? 'éè¡¨ç¤º' : 'è¡¨ç¤º' }}
              </button>
            </div>
          </div>
          <div class="form-group full-width">
            <label for="onboardingMyNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboardingMyNumberCard" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'onboardingMyNumberCard')"
            >
            <div *ngIf="onboardingMyNumberCardFile" class="file-name">{{ onboardingMyNumberCardFile.name }}</div>
            <div *ngIf="!onboardingMyNumberCardFile && selectedOnboardingEmployee?.applicationData?.myNumberCardFileUrl" class="file-info" style="margin-top: 0.5rem;">
              <a [href]="selectedOnboardingEmployee.applicationData.myNumberCardFileUrl" target="_blank" class="file-link">
                {{ selectedOnboardingEmployee.applicationData.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- å…¥é€€ç¤¾æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰æ¬„ -->
      <section class="form-section hr-only-section">
        <h3 class="section-title">å…¥é€€ç¤¾æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-employmentStatus">åœ¨ç±çŠ¶æ³ <span class="required">*</span></label>
            <select 
              id="onboarding-employmentStatus" 
              formControlName="employmentStatus" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let status of employmentStatuses" [value]="status">{{ status }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="onboarding-joinDate">å…¥ç¤¾å¹´æœˆæ—¥ <span class="required">*</span></label>
            <input 
              type="date" 
              id="onboarding-joinDate" 
              formControlName="joinDate" 
              class="form-input"
            >
          </div>
          <div class="form-group" *ngIf="onboardingEmployeeEditForm.get('employmentStatus')?.value !== 'åœ¨ç±'">
            <label for="onboarding-resignationDate">é€€è·å¹´æœˆæ—¥</label>
            <input 
              type="date" 
              id="onboarding-resignationDate" 
              formControlName="resignationDate" 
              class="form-input"
            >
          </div>
          <div class="form-group full-width" *ngIf="onboardingEmployeeEditForm.get('employmentStatus')?.value !== 'åœ¨ç±'">
            <label for="onboarding-resignationReason">é€€è·äº‹ç”±</label>
            <textarea 
              id="onboarding-resignationReason" 
              formControlName="resignationReason" 
              class="form-input" 
              rows="3"
            ></textarea>
          </div>
        </div>
      </section>

      <!-- æ¥­å‹™æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰æ¬„ -->
      <section class="form-section hr-only-section">
        <h3 class="section-title">æ¥­å‹™æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-employeeNumber">ç¤¾å“¡ç•ªå· <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-employeeNumber" 
              formControlName="employeeNumber" 
              class="form-input"
              [readonly]="true"
              style="background: #f5f5f5;"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-employmentType">é›‡ç”¨å½¢æ…‹ <span class="required">*</span></label>
            <select 
              id="onboarding-employmentType" 
              formControlName="employmentType" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let type of employmentTypes" [value]="type">{{ type }}</option>
            </select>
            <div *ngIf="onboardingEmployeeEditForm.get('employmentType')?.invalid && onboardingEmployeeEditForm.get('employmentType')?.touched" class="error-message">
              é›‡ç”¨å½¢æ…‹ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- éƒ¨ç½²ãƒ»å½¹è·æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
      <section class="form-section hr-only-section">
        <h3 class="section-title">éƒ¨ç½²ãƒ»å½¹è·æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-department">éƒ¨ç½²</label>
            <select 
              id="onboarding-department" 
              formControlName="department" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="onboarding-position">å½¹è·</label>
            <select 
              id="onboarding-position" 
              formControlName="position" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let pos of positions" [value]="pos">{{ pos }}</option>
            </select>
          </div>
        </div>
      </section>

      <!-- ç¾ä½æ‰€ã¨é€£çµ¡å…ˆæ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="isOverseasResident"
                [checked]="onboardingEmployeeEditForm.get('isOverseasResident')?.value"
              >
              æµ·å¤–ã«åœ¨ä½
            </label>
          </div>
          <div class="form-group" *ngIf="!onboardingEmployeeEditForm.get('isOverseasResident')?.value">
            <label for="onboarding-postalCode">éƒµä¾¿ç•ªå·</label>
            <input 
              type="text" 
              id="onboarding-postalCode" 
              formControlName="postalCode" 
              class="form-input"
              placeholder="ä¾‹: 1234567"
              maxlength="7"
              pattern="[0-9]{7}"
              title="7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
              (input)="formatOnboardingPostalCode($event)"
            >
            <small class="form-hint">7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingEmployeeEditForm.get('isOverseasResident')?.value">
            <label for="onboarding-currentAddress">ç¾ä½æ‰€</label>
            <textarea 
              id="onboarding-currentAddress" 
              formControlName="currentAddress" 
              class="form-input" 
              rows="2"
            ></textarea>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingEmployeeEditForm.get('isOverseasResident')?.value">
            <label for="onboarding-currentAddressKana">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
            <textarea 
              id="onboarding-currentAddressKana" 
              formControlName="currentAddressKana" 
              class="form-input" 
              rows="2"
            ></textarea>
          </div>
          <div class="form-group full-width" *ngIf="onboardingEmployeeEditForm.get('isOverseasResident')?.value">
            <label for="onboarding-overseasAddress">ä½æ‰€ï¼ˆæµ·å¤–ï¼‰</label>
            <textarea 
              id="onboarding-overseasAddress" 
              formControlName="overseasAddress" 
              class="form-input" 
              rows="2"
              readonly
            ></textarea>
          </div>
          <div class="form-group">
            <label for="onboarding-phoneNumber">é›»è©±ç•ªå·</label>
            <input 
              type="tel" 
              id="onboarding-phoneNumber" 
              formControlName="phoneNumber" 
              class="form-input"
            >
          </div>
        </div>
      </section>

      <!-- ä½æ°‘ç¥¨ä½æ‰€æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ä½æ°‘ç¥¨ä½æ‰€</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="skipResidentAddress"
                [checked]="onboardingEmployeeEditForm.get('skipResidentAddress')?.value"
              >
              ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„
            </label>
          </div>
          <div class="form-group full-width" *ngIf="onboardingEmployeeEditForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentAddressSkipReason">ç†ç”±</label>
            <input 
              type="text" 
              id="onboarding-residentAddressSkipReason" 
              formControlName="residentAddressSkipReason" 
              class="form-input"
              readonly
            >
          </div>
          <div class="form-group full-width" *ngIf="onboardingEmployeeEditForm.get('skipResidentAddress')?.value && onboardingEmployeeEditForm.get('residentAddressSkipReason')?.value === 'ãã®ä»–'">
            <label for="onboarding-residentAddressSkipReasonOther">ç†ç”±ï¼ˆãã®ä»–ï¼‰</label>
            <input 
              type="text" 
              id="onboarding-residentAddressSkipReasonOther" 
              formControlName="residentAddressSkipReasonOther" 
              class="form-input"
              readonly
            >
          </div>
          <div class="form-group full-width" *ngIf="!onboardingEmployeeEditForm.get('skipResidentAddress')?.value">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                [checked]="onboardingSameAsCurrentAddress" 
                (change)="onOnboardingSameAddressChange($event)"
                [disabled]="true"
              >
              ä½æ‰€ï¼ˆç¾ä½æ‰€ã¨åŒã˜ï¼‰
            </label>
          </div>
          <div class="form-group" *ngIf="!onboardingEmployeeEditForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentPostalCode">éƒµä¾¿ç•ªå·</label>
            <input 
              type="text" 
              id="onboarding-residentPostalCode" 
              formControlName="residentPostalCode" 
              class="form-input"
              placeholder="ä¾‹: 1234567"
              maxlength="7"
              pattern="[0-9]{7}"
              title="7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
              readonly
            >
            <small class="form-hint">7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</small>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingEmployeeEditForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentAddress">ä½æ‰€</label>
            <textarea 
              id="onboarding-residentAddress" 
              formControlName="residentAddress" 
              class="form-input" 
              rows="2"
              readonly
            ></textarea>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingEmployeeEditForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
            <textarea 
              id="onboarding-residentAddressKana" 
              formControlName="residentAddressKana" 
              class="form-input" 
              rows="2"
              readonly
            ></textarea>
          </div>
        </div>
      </section>

      <!-- å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="onboarding-resume">å±¥æ­´æ›¸æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-resume" 
              class="form-input"
              accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'resume')"
            >
            <div *ngIf="resumeFile" class="file-name">{{ resumeFile.name }}</div>
            <div *ngIf="!resumeFile && selectedOnboardingEmployee?.applicationData?.resumeFileUrl" class="file-info" style="margin-top: 0.5rem;">
              <a [href]="selectedOnboardingEmployee.applicationData.resumeFileUrl" target="_blank" class="file-link">
                {{ selectedOnboardingEmployee.applicationData.resumeFile || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
              </a>
            </div>
          </div>
          <div class="form-group full-width">
            <label for="onboarding-careerHistory">è·å‹™çµŒæ­´æ›¸æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-careerHistory" 
              class="form-input"
              accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'careerHistory')"
            >
            <div *ngIf="careerHistoryFile" class="file-name">{{ careerHistoryFile.name }}</div>
            <div *ngIf="!careerHistoryFile && selectedOnboardingEmployee?.applicationData?.careerHistoryFileUrl" class="file-info" style="margin-top: 0.5rem;">
              <a [href]="selectedOnboardingEmployee.applicationData.careerHistoryFileUrl" target="_blank" class="file-link">
                {{ selectedOnboardingEmployee.applicationData.careerHistoryFile || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- ç·Šæ€¥é€£çµ¡å…ˆæ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ç·Šæ€¥é€£çµ¡å…ˆ</h3>
        <div formGroupName="emergencyContact" class="nested-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="onboarding-emergencyName">æ°å</label>
              <input 
                type="text" 
                id="onboarding-emergencyName" 
                formControlName="name" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-emergencyNameKana">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
              <input 
                type="text" 
                id="onboarding-emergencyNameKana" 
                formControlName="nameKana" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-emergencyRelationship">ç¶šæŸ„</label>
              <input 
                type="text" 
                id="onboarding-emergencyRelationship" 
                formControlName="relationship" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-emergencyPhone">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·</label>
              <input 
                type="tel" 
                id="onboarding-emergencyPhone" 
                formControlName="phone" 
                class="form-input"
              >
            </div>
            <div class="form-group full-width">
              <label>
                <input 
                  type="checkbox" 
                  [checked]="onboardingSameAsCurrentAddressForEmergency"
                  (change)="onOnboardingSameAddressForEmergencyChange($event)"
                  class="checkbox-input"
                >
                ç¾ä½æ‰€ã¨åŒã˜
              </label>
            </div>
            <div class="form-group full-width">
              <label for="onboarding-emergencyAddress">ä½æ‰€</label>
              <textarea 
                id="onboarding-emergencyAddress" 
                formControlName="address" 
                class="form-input" 
                rows="2"
                [readonly]="onboardingSameAsCurrentAddressForEmergency"
              ></textarea>
            </div>
            <div class="form-group full-width">
              <label for="onboarding-emergencyAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
              <textarea 
                id="onboarding-emergencyAddressKana" 
                formControlName="addressKana" 
                class="form-input" 
                rows="2"
                [readonly]="onboardingSameAsCurrentAddressForEmergency"
              ></textarea>
            </div>
          </div>
        </div>
      </section>

      <!-- å£åº§æƒ…å ±æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">å£åº§æƒ…å ±</h3>
        <div formGroupName="bankAccount" class="nested-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="onboarding-bankName">éŠ€è¡Œå</label>
              <input 
                type="text" 
                id="onboarding-bankName" 
                formControlName="bankName" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-accountType">é é‡‘ç¨®åˆ¥</label>
              <select 
                id="onboarding-accountType" 
                formControlName="accountType" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="æ™®é€š">æ™®é€š</option>
                <option value="å½“åº§">å½“åº§</option>
                <option value="è²¯è“„">è²¯è“„</option>
              </select>
            </div>
            <div class="form-group">
              <label for="onboarding-accountHolder">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰</label>
              <input 
                type="text" 
                id="onboarding-accountHolder" 
                formControlName="accountHolder" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-branchName">æ”¯åº—å</label>
              <input 
                type="text" 
                id="onboarding-branchName" 
                formControlName="branchName" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-accountNumber">å£åº§ç•ªå·</label>
              <input 
                type="text" 
                id="onboarding-accountNumber" 
                formControlName="accountNumber" 
                class="form-input"
              >
            </div>
          </div>
        </div>
      </section>

      <!-- ç¤¾ä¼šä¿é™ºï¼ˆäººäº‹å°‚ç”¨ï¼‰æ¬„ -->
      <section class="form-section hr-only-section">
        <h3 class="section-title">ç¤¾ä¼šä¿é™ºï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-healthInsuranceNumber">å¥åº·ä¿é™ºã®è¢«ä¿é™ºè€…æ•´ç†ç•ªå·</label>
            <input 
              type="text" 
              id="onboarding-healthInsuranceNumber" 
              formControlName="healthInsuranceNumber" 
              class="form-input"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-pensionInsuranceNumber">åšç”Ÿå¹´é‡‘ä¿é™ºã®è¢«ä¿é™ºè€…æ•´ç†ç•ªå·</label>
            <input 
              type="text" 
              id="onboarding-pensionInsuranceNumber" 
              formControlName="pensionInsuranceNumber" 
              class="form-input"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-basicPensionNumberPart1">åŸºç¤å¹´é‡‘ç•ªå· <span class="required">*</span></label>
            <div class="basic-pension-number-container">
              <input 
                type="text" 
                id="onboarding-basicPensionNumberPart1" 
                formControlName="basicPensionNumberPart1" 
                class="form-input basic-pension-part"
                maxlength="4"
                (input)="formatBasicPensionNumberInput($event, 1)"
                placeholder="0000"
              >
              <span class="basic-pension-separator">-</span>
              <input 
                type="text" 
                id="onboarding-basicPensionNumberPart2" 
                formControlName="basicPensionNumberPart2" 
                class="form-input basic-pension-part"
                maxlength="6"
                (input)="formatBasicPensionNumberInput($event, 2)"
                placeholder="000000"
              >
            </div>
            <div *ngIf="(onboardingEmployeeEditForm.get('basicPensionNumberPart1')?.invalid || onboardingEmployeeEditForm.get('basicPensionNumberPart2')?.invalid) && (onboardingEmployeeEditForm.get('basicPensionNumberPart1')?.touched || onboardingEmployeeEditForm.get('basicPensionNumberPart2')?.touched)" class="error-message">
              åŸºç¤å¹´é‡‘ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-pensionHistoryStatus">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´</label>
            <select 
              id="onboarding-pensionHistoryStatus" 
              formControlName="pensionHistoryStatus" 
              class="form-input" 
              (change)="onOnboardingPensionHistoryChange($event)"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let option of pensionHistoryOptions" [value]="option">{{ option }}</option>
            </select>
          </div>
          <div class="form-group full-width" *ngIf="onboardingHasPensionHistory">
            <label for="onboarding-pensionHistory">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ï¼ˆè©³ç´°ï¼‰</label>
            <textarea 
              id="onboarding-pensionHistory" 
              formControlName="pensionHistory" 
              class="form-input" 
              rows="4"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="onboarding-socialInsuranceAcquisitionDate">ç¤¾ä¼šä¿é™ºã®è³‡æ ¼å–å¾—å¹´æœˆæ—¥ <span class="required">*</span></label>
            <input 
              type="date" 
              id="onboarding-socialInsuranceAcquisitionDate" 
              formControlName="socialInsuranceAcquisitionDate" 
              class="form-input"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-socialInsuranceLossDate">ç¤¾ä¼šä¿é™ºã®è³‡æ ¼å–ªå¤±å¹´æœˆæ—¥</label>
            <input 
              type="date" 
              id="onboarding-socialInsuranceLossDate" 
              formControlName="socialInsuranceLossDate" 
              class="form-input"
            >
          </div>
          <div class="form-group">
            <label for="onboarding-expectedMonthlySalary">è¦‹è¾¼ã¿æœˆçµ¦é¡ï¼ˆçµ¦ä¸ï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-expectedMonthlySalary" 
              formControlName="expectedMonthlySalary" 
              class="form-input"
              (input)="formatNumericInput($event, 'expectedMonthlySalary')"
              placeholder="ä¾‹: 300000"
            >
            <div *ngIf="onboardingEmployeeEditForm.get('expectedMonthlySalary')?.invalid && onboardingEmployeeEditForm.get('expectedMonthlySalary')?.touched" class="error-message">
              è¦‹è¾¼ã¿æœˆçµ¦é¡ï¼ˆçµ¦ä¸ï¼‰ã¯å¿…é ˆã§ã™
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-expectedMonthlySalaryInKind">è¦‹è¾¼ã¿æœˆçµ¦é¡ï¼ˆç¾ç‰©ï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-expectedMonthlySalaryInKind" 
              formControlName="expectedMonthlySalaryInKind" 
              class="form-input"
              (input)="formatNumericInput($event, 'expectedMonthlySalaryInKind')"
              placeholder="ä¾‹: 50000"
            >
            <div *ngIf="onboardingEmployeeEditForm.get('expectedMonthlySalaryInKind')?.invalid && onboardingEmployeeEditForm.get('expectedMonthlySalaryInKind')?.touched" class="error-message">
              è¦‹è¾¼ã¿æœˆçµ¦é¡ï¼ˆç¾ç‰©ï¼‰ã¯å¿…é ˆã§ã™
            </div>
          </div>
          <div class="form-group full-width">
            <label for="onboarding-basicPensionNumberDoc">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-basicPensionNumberDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'basicPensionNumberDoc')"
            >
            <div *ngIf="basicPensionNumberDocFile" class="file-name">{{ basicPensionNumberDocFile.name }}</div>
            <div *ngIf="!basicPensionNumberDocFile && selectedOnboardingEmployee?.applicationData?.basicPensionNumberDocFileUrl" class="file-info" style="margin-top: 0.5rem;">
              <a [href]="selectedOnboardingEmployee.applicationData.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                {{ selectedOnboardingEmployee.applicationData.basicPensionNumberDocFile || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
              </a>
            </div>
          </div>
        </div>
      </section>


      <!-- å¹´é‡‘åŸºé‡‘åŠ å…¥æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">å¹´é‡‘åŸºé‡‘åŠ å…¥</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>å¹´é‡‘åŸºé‡‘ã«åŠ å…¥ã—ã¦ã„ã‚‹ã‹ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="pensionFundMembership" 
                  value="ã¯ã„"
                  name="pensionFundMembership"
                >
                ã¯ã„
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="pensionFundMembership" 
                  value="ã„ã„ãˆ"
                  name="pensionFundMembership"
                >
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="onboardingEmployeeEditForm.get('pensionFundMembership')?.invalid && onboardingEmployeeEditForm.get('pensionFundMembership')?.touched" class="error-message">
              å¹´é‡‘åŸºé‡‘ã«åŠ å…¥ã—ã¦ã„ã‚‹ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- å‘å†…å“¡æ¬„ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
      <section class="form-section hr-only-section">
        <h3 class="section-title">å‘å†…å“¡ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>å‘å†…å“¡ã§ã‚ã‚‹ã‹ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="isMiner" 
                  value="ã¯ã„"
                  name="isMiner"
                >
                ã¯ã„
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="isMiner" 
                  value="ã„ã„ãˆ"
                  name="isMiner"
                >
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="onboardingEmployeeEditForm.get('isMiner')?.invalid && onboardingEmployeeEditForm.get('isMiner')?.touched" class="error-message">
              å‘å†…å“¡ã§ã‚ã‚‹ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- ãã®ä»–è³‡æ ¼æƒ…å ±æ¬„ï¼ˆäººäº‹å°‚ç”¨ï¼‰ -->
      <section class="form-section hr-only-section">
        <h3 class="section-title">ãã®ä»–è³‡æ ¼æƒ…å ±ï¼ˆäººäº‹å°‚ç”¨ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>äºŒä»¥ä¸Šäº‹æ¥­æ‰€å‹¤å‹™è€…ã®å–å¾—ã‹ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="multipleWorkplaceAcquisition" 
                  value="ã¯ã„"
                  name="multipleWorkplaceAcquisition"
                >
                ã¯ã„
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="multipleWorkplaceAcquisition" 
                  value="ã„ã„ãˆ"
                  name="multipleWorkplaceAcquisition"
                >
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="onboardingEmployeeEditForm.get('multipleWorkplaceAcquisition')?.invalid && onboardingEmployeeEditForm.get('multipleWorkplaceAcquisition')?.touched" class="error-message">
              äºŒä»¥ä¸Šäº‹æ¥­æ‰€å‹¤å‹™è€…ã®å–å¾—ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label>é€€è·å¾Œã®ç¶™ç¶šå†é›‡ç”¨è€…ã®å–å¾—ã‹ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="reemploymentAfterRetirement" 
                  value="ã¯ã„"
                  name="reemploymentAfterRetirement"
                >
                ã¯ã„
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="reemploymentAfterRetirement" 
                  value="ã„ã„ãˆ"
                  name="reemploymentAfterRetirement"
                >
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="onboardingEmployeeEditForm.get('reemploymentAfterRetirement')?.invalid && onboardingEmployeeEditForm.get('reemploymentAfterRetirement')?.touched" class="error-message">
              é€€è·å¾Œã®ç¶™ç¶šå†é›‡ç”¨è€…ã®å–å¾—ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label>ãã®ä»– <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="otherQualificationAcquisition" 
                  value="ã¯ã„"
                  name="otherQualificationAcquisition"
                  (change)="onOtherQualificationAcquisitionChange($event)"
                >
                ã¯ã„
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="otherQualificationAcquisition" 
                  value="ã„ã„ãˆ"
                  name="otherQualificationAcquisition"
                  (change)="onOtherQualificationAcquisitionChange($event)"
                >
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="onboardingEmployeeEditForm.get('otherQualificationAcquisition')?.invalid && onboardingEmployeeEditForm.get('otherQualificationAcquisition')?.touched" class="error-message">
              ãã®ä»–ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="onboardingEmployeeEditForm.get('otherQualificationAcquisition')?.value === 'ã¯ã„'">
            <label for="onboarding-otherQualificationReason">ç†ç”± <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-otherQualificationReason" 
              formControlName="otherQualificationReason" 
              class="form-input"
              placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
            >
            <div *ngIf="onboardingEmployeeEditForm.get('otherQualificationReason')?.invalid && onboardingEmployeeEditForm.get('otherQualificationReason')?.touched" class="error-message">
              ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-qualificationCertificateRequired">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  id="onboarding-qualificationCertificateRequired-required"
                  formControlName="qualificationCertificateRequired"
                  value="å¿…è¦"
                >
                <span>å¿…è¦</span>
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  id="onboarding-qualificationCertificateRequired-notRequired"
                  formControlName="qualificationCertificateRequired"
                  value="ä¸è¦"
                >
                <span>ä¸è¦</span>
              </label>
            </div>
            <div *ngIf="onboardingEmployeeEditForm.get('qualificationCertificateRequired')?.invalid && onboardingEmployeeEditForm.get('qualificationCertificateRequired')?.touched" class="error-message">
              è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- è¢«æ‰¶é¤Šè€…æƒ…å ±æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">è¢«æ‰¶é¤Šè€…æƒ…å ±</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-dependentStatus">è¢«æ‰¶é¤Šè€…ï¼ˆæœ‰/ç„¡ï¼‰ <span class="required">*</span></label>
            <select 
              id="onboarding-dependentStatus" 
              formControlName="dependentStatus" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="æœ‰">æœ‰</option>
              <option value="ç„¡">ç„¡</option>
            </select>
            <div *ngIf="onboardingEmployeeEditForm.get('dependentStatus')?.invalid && onboardingEmployeeEditForm.get('dependentStatus')?.touched" class="error-message">
              è¢«æ‰¶é¤Šè€…ï¼ˆæœ‰/ç„¡ï¼‰ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="modal-actions">
        <button type="button" class="cancel-button" (click)="closeOnboardingEmployeeModal()">
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button type="submit" class="submit-button" [disabled]="onboardingEmployeeEditForm.invalid || onboardingIsSaving">
          {{ onboardingIsSaving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜' }}
        </button>
      </div>
    </form>
  </div>
</div>

  <!-- å…¥ç¤¾å‡¦ç†å®Ÿè¡Œãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div *ngIf="showOnboardingProcessModal" class="modal-overlay">
    <div class="modal-content onboarding-process-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">å…¥ç¤¾å‡¦ç†å®Ÿè¡Œ</h3>
        <button class="modal-close" (click)="closeOnboardingProcessModal()">Ã—</button>
      </div>
      
      <div class="modal-body">
        <p class="modal-description">æº–å‚™å®Œäº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç¤¾å“¡ã‚’é¸æŠã—ã¦ã€å…¥ç¤¾å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>
        
        <div class="process-actions">
          <button 
            type="button" 
            class="select-all-button" 
            (click)="toggleAllEmployees()"
          >
            {{ selectedEmployeeNumbers.size === readyEmployees.length ? 'å…¨è§£é™¤' : 'å…¨é¸æŠ' }}
          </button>
        </div>
        
        <div class="ready-employees-list">
          <table class="employee-table">
            <thead>
              <tr>
                <th style="width: 50px;">
                  <input 
                    type="checkbox" 
                    [checked]="selectedEmployeeNumbers.size === readyEmployees.length && readyEmployees.length > 0"
                    (change)="toggleAllEmployees()"
                  >
                </th>
                <th>ç¤¾å“¡ç•ªå·</th>
                <th>æ°å</th>
                <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                <th>é›‡ç”¨å½¢æ…‹</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let employee of readyEmployees" class="employee-row">
                <td>
                  <input 
                    type="checkbox" 
                    [checked]="selectedEmployeeNumbers.has(employee.employeeNumber)"
                    (change)="toggleEmployeeSelection(employee.employeeNumber)"
                  >
                </td>
                <td>{{ employee.employeeNumber }}</td>
                <td>{{ employee.name }}</td>
                <td>{{ employee.email }}</td>
                <td>{{ employee.employmentType }}</td>
              </tr>
              <tr *ngIf="readyEmployees.length === 0">
                <td colspan="5" class="empty-message">æº–å‚™å®Œäº†ã®ç¤¾å“¡ãŒã‚ã‚Šã¾ã›ã‚“</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="modal-actions">
        <button 
          type="button" 
          class="cancel-button" 
          (click)="closeOnboardingProcessModal()"
          [disabled]="isProcessingOnboarding"
        >
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button 
          type="button" 
          class="test-button" 
          (click)="generatePdfOnly()"
          [disabled]="selectedEmployeeNumbers.size === 0 || isProcessingOnboarding"
          style="background: #ff9800; color: white; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem; margin-right: 0.5rem;"
        >
          {{ isProcessingOnboarding ? 'ç”Ÿæˆä¸­...' : 'PDFã®ã¿ç”Ÿæˆ' }}
        </button>
        <button 
          type="button" 
          class="submit-button" 
          (click)="executeOnboardingProcess()"
          [disabled]="selectedEmployeeNumbers.size === 0 || isProcessingOnboarding"
        >
          {{ isProcessingOnboarding ? 'å‡¦ç†ä¸­...' : 'å…¥ç¤¾å‡¦ç†ã‚’å®Ÿè¡Œ' }}
        </button>
      </div>
    </div>
  </div>


