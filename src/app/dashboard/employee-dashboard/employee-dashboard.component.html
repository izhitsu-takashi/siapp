<div class="dashboard-wrapper">
  <!-- ヘッダー -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1 class="app-name">SIApp</h1>
    </div>
    <div class="header-right">
      <span class="employee-info">
        <span class="employee-number">社員番号: {{ employeeNumber }}</span>
        <span class="employee-name">{{ employeeName }}</span>
      </span>
      <button class="logout-button" (click)="logout()">ログアウト</button>
    </div>
  </header>

  <!-- メインコンテンツエリア -->
  <div class="dashboard-body">
    <!-- サイドバー -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <button
          *ngFor="let tab of tabs"
          class="sidebar-item"
          [class.active]="currentTab === tab.name"
          (click)="switchTab(tab.name)"
        >
          {{ tab.name }}
        </button>
      </nav>
    </aside>

    <!-- メインコンテンツ -->
    <main class="main-content">
      <div class="content-area">
        <!-- 情報設定ページ -->
        <ng-container *ngIf="currentTab === '情報設定'">
          <div class="page-header">
            <h2 class="page-title">社員情報</h2>
            <div class="page-actions">
              <button 
                *ngIf="!isEditMode" 
                class="edit-button" 
                (click)="startEdit()"
              >
                編集
              </button>
              <button 
                *ngIf="isEditMode" 
                class="cancel-button" 
                (click)="cancelEdit()"
              >
                キャンセル
              </button>
            </div>
          </div>

          <form [formGroup]="settingsForm" (ngSubmit)="onSubmit()" class="settings-form">
            
            <!-- 基本情報欄 -->
            <section class="form-section">
              <h3 class="section-title">基本情報</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="name">氏名 <span class="required">*</span></label>
                  <input 
                    type="text" 
                    id="name" 
                    formControlName="name" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="nameKana">氏名（ヨミガナ）</label>
                  <input 
                    type="text" 
                    id="nameKana" 
                    formControlName="nameKana" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="birthDate">生年月日 <span class="required">*</span></label>
                  <div class="birth-date-container">
                    <input 
                      type="date" 
                      id="birthDate" 
                      formControlName="birthDate" 
                      class="form-input"
                      [readonly]="!isEditMode"
                      (change)="onBirthDateChange()"
                    >
                    <span *ngIf="age !== null" class="age-display">（{{ age }}歳）</span>
                  </div>
                </div>
                <div class="form-group">
                  <label for="gender">戸籍上の性別 <span class="required">*</span></label>
                  <select 
                    id="gender" 
                    formControlName="gender" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="email">メールアドレス <span class="required">*</span></label>
                  <input 
                    type="email" 
                    id="email" 
                    formControlName="email" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group full-width">
                  <label for="idDocument">本人確認書類添付</label>
                  <input 
                    type="file" 
                    id="idDocument" 
                    class="form-input"
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'idDocument')"
                    [disabled]="!isEditMode"
                  >
                  <div *ngIf="idDocumentFile" class="file-name">{{ idDocumentFile.name }}</div>
                </div>
              </div>
            </section>

            <!-- マイナンバー欄 -->
            <section class="form-section">
              <h3 class="section-title">マイナンバー</h3>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label for="myNumberPart1">マイナンバー</label>
                  <div class="my-number-container">
                    <div class="my-number-inputs">
                      <input 
                        type="text" 
                        id="myNumberPart1" 
                        formControlName="myNumberPart1" 
                        class="form-input my-number-part"
                        [type]="showMyNumber ? 'text' : 'password'"
                        [readonly]="!showMyNumber || !isEditMode"
                        maxlength="4"
                        (input)="formatMyNumberInput($event, 1)"
                        placeholder="0000"
                      >
                      <span class="my-number-separator">-</span>
                      <input 
                        type="text" 
                        id="myNumberPart2" 
                        formControlName="myNumberPart2" 
                        class="form-input my-number-part"
                        [type]="showMyNumber ? 'text' : 'password'"
                        [readonly]="!showMyNumber || !isEditMode"
                        maxlength="4"
                        (input)="formatMyNumberInput($event, 2)"
                        placeholder="0000"
                      >
                      <span class="my-number-separator">-</span>
                      <input 
                        type="text" 
                        id="myNumberPart3" 
                        formControlName="myNumberPart3" 
                        class="form-input my-number-part"
                        [type]="showMyNumber ? 'text' : 'password'"
                        [readonly]="!showMyNumber || !isEditMode"
                        maxlength="4"
                        (input)="formatMyNumberInput($event, 3)"
                        placeholder="0000"
                      >
                    </div>
                    <span *ngIf="!showMyNumber && getMaskedMyNumber()" class="masked-value">
                      {{ getMaskedMyNumber() }}
                    </span>
                    <button 
                      *ngIf="isEditMode"
                      type="button" 
                      class="toggle-button" 
                      (click)="toggleMyNumber()"
                    >
                      {{ showMyNumber ? '非表示' : '表示' }}
                    </button>
                  </div>
                </div>
              </div>
            </section>

            <!-- 入退社情報欄 -->
            <section class="form-section">
              <h3 class="section-title">入退社情報</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="employmentStatus">在籍状況</label>
                  <select 
                    id="employmentStatus" 
                    formControlName="employmentStatus" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let status of employmentStatuses" [value]="status">{{ status }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="joinDate">入社年月日</label>
                  <input 
                    type="date" 
                    id="joinDate" 
                    formControlName="joinDate" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="resignationDate">退職年月日</label>
                  <input 
                    type="date" 
                    id="resignationDate" 
                    formControlName="resignationDate" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group full-width">
                  <label for="resignationReason">退職事由</label>
                  <textarea 
                    id="resignationReason" 
                    formControlName="resignationReason" 
                    class="form-input" 
                    rows="3"
                    [readonly]="!isEditMode"
                  ></textarea>
                </div>
              </div>
            </section>

            <!-- 業務情報欄 -->
            <section class="form-section">
              <h3 class="section-title">業務情報</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="employeeNumber">社員番号 <span class="required">*</span></label>
                  <input 
                    type="text" 
                    id="employeeNumber" 
                    formControlName="employeeNumber" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="office">事業所</label>
                  <select 
                    id="office" 
                    formControlName="office" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let office of offices" [value]="office">{{ office }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="workContent">業務内容</label>
                  <select 
                    id="workContent" 
                    formControlName="workContent" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let content of workContents" [value]="content">{{ content }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="employmentType">雇用形態</label>
                  <select 
                    id="employmentType" 
                    formControlName="employmentType" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let type of employmentTypes" [value]="type">{{ type }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="paymentType">給与支給形態</label>
                  <select 
                    id="paymentType" 
                    formControlName="paymentType" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let type of paymentTypes" [value]="type">{{ type }}</option>
                  </select>
                </div>
              </div>
            </section>

            <!-- 部署・役職情報 -->
            <section class="form-section">
              <h3 class="section-title">部署・役職情報</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="department">部署</label>
                  <select 
                    id="department" 
                    formControlName="department" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="position">役職</label>
                  <select 
                    id="position" 
                    formControlName="position" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let pos of positions" [value]="pos">{{ pos }}</option>
                  </select>
                </div>
              </div>
            </section>

            <!-- 現住所と連絡先欄 -->
            <section class="form-section">
              <h3 class="section-title">現住所と連絡先</h3>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label for="currentAddress">現住所</label>
                  <textarea 
                    id="currentAddress" 
                    formControlName="currentAddress" 
                    class="form-input" 
                    rows="2"
                    [readonly]="!isEditMode"
                  ></textarea>
                </div>
                <div class="form-group full-width">
                  <label for="currentAddressKana">現住所（ヨミガナ）</label>
                  <textarea 
                    id="currentAddressKana" 
                    formControlName="currentAddressKana" 
                    class="form-input" 
                    rows="2"
                    [readonly]="!isEditMode"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="phoneNumber">電話番号</label>
                  <input 
                    type="tel" 
                    id="phoneNumber" 
                    formControlName="phoneNumber" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="currentHouseholdHead">世帯主（本人/親族）</label>
                  <select 
                    id="currentHouseholdHead" 
                    formControlName="currentHouseholdHead" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let type of householdHeadTypes" [value]="type">{{ type }}</option>
                  </select>
                </div>
              </div>
            </section>

            <!-- 住民票住所欄 -->
            <section class="form-section">
              <h3 class="section-title">住民票住所</h3>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label class="checkbox-label">
                    <input 
                      type="checkbox" 
                      [checked]="sameAsCurrentAddress" 
                      (change)="onSameAddressChange($event)"
                    >
                    住所（現住所と同じ）
                  </label>
                </div>
                <div class="form-group full-width">
                  <label for="residentAddress">住所</label>
                  <textarea 
                    id="residentAddress" 
                    formControlName="residentAddress" 
                    class="form-input" 
                    rows="2"
                    [readonly]="!isEditMode || sameAsCurrentAddress"
                  ></textarea>
                </div>
                <div class="form-group full-width">
                  <label for="residentAddressKana">住所（ヨミガナ）</label>
                  <textarea 
                    id="residentAddressKana" 
                    formControlName="residentAddressKana" 
                    class="form-input" 
                    rows="2"
                    [readonly]="!isEditMode || sameAsCurrentAddress"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="residentHouseholdHead">世帯主（本人/親族）</label>
                  <select 
                    id="residentHouseholdHead" 
                    formControlName="residentHouseholdHead" 
                    class="form-input"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let type of householdHeadTypes" [value]="type">{{ type }}</option>
                  </select>
                </div>
              </div>
            </section>

            <!-- 履歴書・職務経歴書欄 -->
            <section class="form-section">
              <h3 class="section-title">履歴書・職務経歴書</h3>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label for="resume">履歴書添付</label>
                  <input 
                    type="file" 
                    id="resume" 
                    class="form-input"
                    accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'resume')"
                    [disabled]="!isEditMode"
                  >
                  <div *ngIf="resumeFile" class="file-name">{{ resumeFile.name }}</div>
                </div>
                <div class="form-group full-width">
                  <label for="careerHistory">職務経歴書添付</label>
                  <input 
                    type="file" 
                    id="careerHistory" 
                    class="form-input"
                    accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'careerHistory')"
                    [disabled]="!isEditMode"
                  >
                  <div *ngIf="careerHistoryFile" class="file-name">{{ careerHistoryFile.name }}</div>
                </div>
              </div>
            </section>

            <!-- 緊急連絡先欄 -->
            <section class="form-section">
              <h3 class="section-title">緊急連絡先</h3>
              <div formGroupName="emergencyContact" class="nested-form">
                <div class="form-grid">
                  <div class="form-group">
                    <label for="emergencyName">氏名</label>
                    <input 
                      type="text" 
                      id="emergencyName" 
                      formControlName="name" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group">
                    <label for="emergencyNameKana">氏名（ヨミガナ）</label>
                    <input 
                      type="text" 
                      id="emergencyNameKana" 
                      formControlName="nameKana" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group">
                    <label for="emergencyRelationship">続柄</label>
                    <input 
                      type="text" 
                      id="emergencyRelationship" 
                      formControlName="relationship" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group">
                    <label for="emergencyPhone">緊急連絡先電話番号</label>
                    <input 
                      type="tel" 
                      id="emergencyPhone" 
                      formControlName="phone" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group full-width">
                    <label>
                      <input 
                        type="checkbox" 
                        [checked]="sameAsCurrentAddressForEmergency"
                        (change)="onSameAddressForEmergencyChange($event)"
                        [disabled]="!isEditMode"
                        class="checkbox-input"
                      >
                      現住所と同じ
                    </label>
                  </div>
                  <div class="form-group full-width">
                    <label for="emergencyAddress">住所</label>
                    <textarea 
                      id="emergencyAddress" 
                      formControlName="address" 
                      class="form-input" 
                      rows="2"
                      [readonly]="!isEditMode || sameAsCurrentAddressForEmergency"
                    ></textarea>
                  </div>
                  <div class="form-group full-width">
                    <label for="emergencyAddressKana">住所（ヨミガナ）</label>
                    <textarea 
                      id="emergencyAddressKana" 
                      formControlName="addressKana" 
                      class="form-input" 
                      rows="2"
                      [readonly]="!isEditMode || sameAsCurrentAddressForEmergency"
                    ></textarea>
                  </div>
                </div>
              </div>
            </section>

            <!-- 口座情報欄 -->
            <section class="form-section">
              <h3 class="section-title">口座情報</h3>
              <div formGroupName="bankAccount" class="nested-form">
                <div class="form-grid">
                  <div class="form-group">
                    <label for="bankName">銀行名</label>
                    <input 
                      type="text" 
                      id="bankName" 
                      formControlName="bankName" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group">
                    <label for="accountType">預金種別</label>
                    <select 
                      id="accountType" 
                      formControlName="accountType" 
                      class="form-input"
                    >
                      <option value="">選択してください</option>
                      <option value="普通">普通</option>
                      <option value="当座">当座</option>
                      <option value="貯蓄">貯蓄</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="accountHolder">名義（カタカナ）</label>
                    <input 
                      type="text" 
                      id="accountHolder" 
                      formControlName="accountHolder" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group">
                    <label for="branchName">支店名</label>
                    <input 
                      type="text" 
                      id="branchName" 
                      formControlName="branchName" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                  <div class="form-group">
                    <label for="accountNumber">口座番号</label>
                    <input 
                      type="text" 
                      id="accountNumber" 
                      formControlName="accountNumber" 
                      class="form-input"
                      [readonly]="!isEditMode"
                    >
                  </div>
                </div>
              </div>
            </section>

            <!-- 社会保険欄 -->
            <section class="form-section">
              <h3 class="section-title">社会保険</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="healthInsuranceNumber">健康保険の被保険者整理番号</label>
                  <input 
                    type="text" 
                    id="healthInsuranceNumber" 
                    formControlName="healthInsuranceNumber" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="pensionInsuranceNumber">厚生年金保険の被保険者整理番号</label>
                  <input 
                    type="text" 
                    id="pensionInsuranceNumber" 
                    formControlName="pensionInsuranceNumber" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="basicPensionNumberPart1">基礎年金番号</label>
                  <div class="basic-pension-number-container">
                    <input 
                      type="text" 
                      id="basicPensionNumberPart1" 
                      formControlName="basicPensionNumberPart1" 
                      class="form-input basic-pension-part"
                      maxlength="4"
                      (input)="formatBasicPensionNumberInput($event, 1)"
                      placeholder="0000"
                      [readonly]="!isEditMode"
                    >
                    <span class="basic-pension-separator">-</span>
                    <input 
                      type="text" 
                      id="basicPensionNumberPart2" 
                      formControlName="basicPensionNumberPart2" 
                      class="form-input basic-pension-part"
                      maxlength="6"
                      (input)="formatBasicPensionNumberInput($event, 2)"
                      placeholder="000000"
                      [readonly]="!isEditMode"
                    >
                  </div>
                </div>
                <div class="form-group">
                  <label for="pensionHistoryStatus">厚生年金加入履歴</label>
                  <select 
                    id="pensionHistoryStatus" 
                    formControlName="pensionHistoryStatus" 
                    class="form-input" 
                    (change)="onPensionHistoryChange($event)"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let option of pensionHistoryOptions" [value]="option">{{ option }}</option>
                  </select>
                </div>
                <div class="form-group full-width" *ngIf="hasPensionHistory">
                  <label for="pensionHistory">厚生年金加入履歴（詳細）</label>
                  <textarea 
                    id="pensionHistory" 
                    formControlName="pensionHistory" 
                    class="form-input" 
                    rows="4"
                    [readonly]="!isEditMode"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="socialInsuranceAcquisitionDate">社会保険の資格取得年月日</label>
                  <input 
                    type="date" 
                    id="socialInsuranceAcquisitionDate" 
                    formControlName="socialInsuranceAcquisitionDate" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group">
                  <label for="socialInsuranceLossDate">社会保険の資格喪失年月日</label>
                  <input 
                    type="date" 
                    id="socialInsuranceLossDate" 
                    formControlName="socialInsuranceLossDate" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
                <div class="form-group full-width">
                  <label for="basicPensionNumberDoc">基礎年金番号確認書類添付</label>
                  <input 
                    type="file" 
                    id="basicPensionNumberDoc" 
                    class="form-input"
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'basicPensionNumberDoc')"
                    [disabled]="!isEditMode"
                  >
                  <div *ngIf="basicPensionNumberDocFile" class="file-name">{{ basicPensionNumberDocFile.name }}</div>
                </div>
              </div>
            </section>

            <!-- 配偶者情報欄 -->
            <section class="form-section">
              <h3 class="section-title">配偶者情報</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="spouseStatus">配偶者の有無</label>
                  <select 
                    id="spouseStatus" 
                    formControlName="spouseStatus" 
                    class="form-input"
                    (change)="onSpouseStatusChange($event)"
                  >
                    <option value="">選択してください</option>
                    <option *ngFor="let option of spouseOptions" [value]="option">{{ option }}</option>
                  </select>
                </div>
                <div class="form-group" *ngIf="hasSpouse">
                  <label for="spouseAnnualIncome">配偶者の年収</label>
                  <input 
                    type="number" 
                    id="spouseAnnualIncome" 
                    formControlName="spouseAnnualIncome" 
                    class="form-input"
                    [readonly]="!isEditMode"
                  >
                </div>
              </div>
            </section>

            <!-- 送信ボタン -->
            <div class="form-actions" *ngIf="isEditMode">
              <button type="submit" class="submit-button" [disabled]="settingsForm.invalid || isSaving">
                {{ isSaving ? '保存中...' : '保存' }}
              </button>
            </div>
          </form>
        </ng-container>

        <!-- 各種申請ページ -->
        <ng-container *ngIf="currentTab === '各種申請'">
          <div class="page-header">
            <h2 class="page-title">各種申請</h2>
          </div>
          
          <div class="application-grid">
            <button class="application-button" (click)="openApplicationModal('扶養家族追加')">
              <span class="application-icon">👨‍👩‍👧</span>
              <span class="application-label">扶養家族追加</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('扶養削除申請')">
              <span class="application-icon">❌</span>
              <span class="application-label">扶養削除申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('住所変更申請')">
              <span class="application-icon">🏠</span>
              <span class="application-label">住所変更申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('氏名変更申請')">
              <span class="application-icon">✏️</span>
              <span class="application-label">氏名変更申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('産前産後休業申請')">
              <span class="application-icon">🤰</span>
              <span class="application-label">産前産後休業申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('育児休業申請')">
              <span class="application-icon">👶</span>
              <span class="application-label">育児休業申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('介護休業申請')">
              <span class="application-icon">👴</span>
              <span class="application-label">介護休業申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('勤務形態変更申請')">
              <span class="application-icon">🔄</span>
              <span class="application-label">勤務形態変更申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('退職申請')">
              <span class="application-icon">🚪</span>
              <span class="application-label">退職申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('任意保険継続申請')">
              <span class="application-icon">🏥</span>
              <span class="application-label">任意保険継続申請</span>
            </button>
            
            <button class="application-button" (click)="openApplicationModal('保険証再発行申請')">
              <span class="application-icon">🆔</span>
              <span class="application-label">保険証再発行申請</span>
            </button>
          </div>
        </ng-container>

        <!-- メインページ -->
        <ng-container *ngIf="currentTab === 'メインページ'">
          <div class="main-page-layout">
            <!-- 上部エリア：自分の情報欄と人事からの依頼欄 -->
            <div class="main-page-top">
              <!-- 自分の情報欄 -->
              <div class="info-card my-info-card">
                <h3 class="card-title">自分の情報</h3>
                <div class="info-content" *ngIf="employeeData">
                  <div class="info-row">
                    <span class="info-label">社員番号:</span>
                    <span class="info-value">{{ employeeData.employeeNumber || employeeNumber }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">氏名:</span>
                    <span class="info-value">{{ employeeData.name || employeeName }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">部署:</span>
                    <span class="info-value">{{ employeeData.department || '-' }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">役職:</span>
                    <span class="info-value">{{ employeeData.position || '-' }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">雇用形態:</span>
                    <span class="info-value">{{ employeeData.employmentType || '-' }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">在籍状況:</span>
                    <span class="info-value">{{ employeeData.employmentStatus || '在籍' }}</span>
                  </div>
                </div>
                <div class="info-content" *ngIf="!employeeData">
                  <p class="no-data">情報を読み込み中...</p>
                </div>
              </div>

              <!-- 人事からの依頼欄 -->
              <div class="info-card hr-request-card">
                <h3 class="card-title">人事からの依頼</h3>
                <div class="request-content">
                  <div *ngIf="hrRequests.length === 0" class="no-data">
                    現在、依頼はありません
                  </div>
                  <div *ngFor="let request of hrRequests" class="request-item">
                    <div class="request-header">
                      <span class="request-title">{{ request.title }}</span>
                      <span class="request-date">{{ request.date | date:'yyyy/MM/dd' }}</span>
                    </div>
                    <p class="request-message">{{ request.message }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- 申請一覧テーブル -->
            <div class="application-list-section">
              <div class="section-header">
                <h3 class="section-title">申請一覧</h3>
              </div>
              <div class="table-container">
                <table class="application-table">
                  <thead>
                    <tr>
                      <th>申請ID</th>
                      <th>申請種類</th>
                      <th>ステータス</th>
                      <th>申請日</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let application of applications" class="application-row" (click)="openApplicationDetail(application)">
                      <td>{{ application.applicationId }}</td>
                      <td>{{ application.applicationType }}</td>
                      <td>
                        <span class="status-badge" [class.status-pending]="application.status === '承認待ち'"
                              [class.status-approved]="application.status === '承認'"
                              [class.status-rejected]="application.status === '却下'">
                          {{ application.status }}
                        </span>
                      </td>
                      <td>{{ getApplicationDate(application) | date:'yyyy/MM/dd' }}</td>
                    </tr>
                    <tr *ngIf="applications.length === 0">
                      <td colspan="4" class="empty-message">申請履歴がありません</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- その他のタブ -->
        <!-- 保険・扶養ページ -->
        <ng-container *ngIf="currentTab === '保険・扶養'">
          <div class="insurance-dependents-page">
            <h2 class="page-title">保険・扶養情報</h2>
            
            <!-- 保険者種別情報 -->
            <section class="info-section">
              <h3 class="section-title">保険者種別</h3>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">健康保険者種別:</span>
                  <span class="info-value">{{ insuranceData?.healthInsuranceType || '未設定' }}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">介護保険者種別:</span>
                  <span class="info-value">{{ insuranceData?.nursingInsuranceType || '未設定' }}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">厚生年金保険者種別:</span>
                  <span class="info-value">{{ insuranceData?.pensionInsuranceType || '未設定' }}</span>
                </div>
              </div>
            </section>

            <!-- 扶養者情報 -->
            <section class="info-section">
              <h3 class="section-title">扶養者情報</h3>
              <div class="dependents-list">
                <div *ngIf="dependentsData.length === 0" class="no-data-message">
                  扶養者が登録されていません。
                </div>
                <div *ngFor="let dependent of dependentsData; let i = index" class="dependent-card">
                  <div class="dependent-header">
                    <h4 class="dependent-title">扶養者 {{ i + 1 }}</h4>
                  </div>
                  <div class="dependent-info-grid">
                    <div class="dependent-info-item">
                      <span class="dependent-label">氏名:</span>
                      <span class="dependent-value">{{ dependent.name || '-' }}</span>
                    </div>
                    <div class="dependent-info-item">
                      <span class="dependent-label">氏名（ヨミガナ）:</span>
                      <span class="dependent-value">{{ dependent.nameKana || '-' }}</span>
                    </div>
                    <div class="dependent-info-item">
                      <span class="dependent-label">続柄:</span>
                      <span class="dependent-value">{{ dependent.relationship || '-' }}</span>
                    </div>
                    <div class="dependent-info-item">
                      <span class="dependent-label">生年月日:</span>
                      <span class="dependent-value">{{ dependent.birthDate ? (dependent.birthDate | date:'yyyy年MM月dd日') : '-' }}</span>
                    </div>
                    <div class="dependent-info-item">
                      <span class="dependent-label">マイナンバー:</span>
                      <span class="dependent-value">{{ dependent.myNumber ? '●●●●-●●●●-●●●●' : '-' }}</span>
                    </div>
                    <div class="dependent-info-item full-width">
                      <span class="dependent-label">住所:</span>
                      <span class="dependent-value">{{ dependent.address || '-' }}</span>
                    </div>
                    <div class="dependent-info-item full-width" *ngIf="dependent.notes">
                      <span class="dependent-label">備考:</span>
                      <span class="dependent-value">{{ dependent.notes }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </ng-container>

        <!-- ナレッジページ（その他のページ） -->
        <ng-container *ngIf="currentTab !== '情報設定' && currentTab !== '各種申請' && currentTab !== 'メインページ' && currentTab !== '保険・扶養'">
          <h2 class="page-title">{{ currentTab }}のページです</h2>
        </ng-container>
      </div>
    </main>
  </div>
</div>

<!-- 申請モーダル -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === '扶養家族追加'" (click)="closeApplicationModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">扶養家族追加申請</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">×</button>
    </div>
    
    <form [formGroup]="dependentApplicationForm" (ngSubmit)="submitDependentApplication()" class="application-form">
      <!-- 続柄欄 -->
      <section class="form-section">
        <h3 class="section-title">続柄 <span class="required">*</span></h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="relationshipType" value="配偶者" (change)="onRelationshipTypeChange()">
            配偶者
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="relationshipType" value="配偶者以外" (change)="onRelationshipTypeChange()">
            配偶者以外
          </label>
        </div>
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.invalid && dependentApplicationForm.get('relationshipType')?.touched" class="error-message">
          続柄を選択してください
        </div>
        
        <!-- 配偶者選択時 -->
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.value === '配偶者'" class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="spouseType" value="妻" (change)="onSpouseTypeChange()">
            妻
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="spouseType" value="夫" (change)="onSpouseTypeChange()">
            夫
          </label>
        </div>
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.value === '配偶者' && dependentApplicationForm.get('spouseType')?.invalid && dependentApplicationForm.get('spouseType')?.touched" class="error-message">
          妻または夫を選択してください
        </div>
        
        <!-- 配偶者以外選択時 -->
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.value === '配偶者以外'" class="form-group">
          <label for="relationship">続柄 <span class="required">*</span></label>
          <input type="text" id="relationship" formControlName="relationship" class="form-input" placeholder="例: 長男、長女">
        </div>
      </section>
      
      <!-- 基礎年金番号 -->
      <section class="form-section">
        <h3 class="section-title">基礎年金番号</h3>
        <div class="form-group">
          <label>基礎年金番号</label>
          <div class="basic-pension-number-container">
            <input 
              type="text" 
              id="dependentBasicPensionNumberPart1" 
              formControlName="basicPensionNumberPart1" 
              class="form-input basic-pension-part"
              maxlength="4"
              (input)="formatDependentBasicPensionNumberInput($event, 1)"
              placeholder="0000"
              aria-label="基礎年金番号（前半4桁）"
            >
            <span class="basic-pension-separator">-</span>
            <input 
              type="text" 
              id="dependentBasicPensionNumberPart2" 
              formControlName="basicPensionNumberPart2" 
              class="form-input basic-pension-part"
              maxlength="6"
              (input)="formatDependentBasicPensionNumberInput($event, 2)"
              placeholder="000000"
              aria-label="基礎年金番号（後半6桁）"
            >
          </div>
        </div>
        <div class="form-group">
          <label for="dependentBasicPensionNumberDoc">基礎年金番号確認書類添付</label>
          <input 
            type="file" 
            id="dependentBasicPensionNumberDoc" 
            class="form-input"
            accept=".pdf,.jpg,.jpeg,.png"
            (change)="onDependentFileSelected($event, 'basicPensionNumberDoc')"
          >
          <div *ngIf="dependentBasicPensionNumberDocFile" class="file-name">{{ dependentBasicPensionNumberDocFile.name }}</div>
        </div>
      </section>
      
      <!-- 基本情報 -->
      <section class="form-section">
        <h3 class="section-title">基本情報</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="dependentLastName">姓 <span class="required">*</span></label>
            <input type="text" id="dependentLastName" formControlName="lastName" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentFirstName">名 <span class="required">*</span></label>
            <input type="text" id="dependentFirstName" formControlName="firstName" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentLastNameKana">姓（ヨミガナ）</label>
            <input type="text" id="dependentLastNameKana" formControlName="lastNameKana" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentFirstNameKana">名（ヨミガナ）</label>
            <input type="text" id="dependentFirstNameKana" formControlName="firstNameKana" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentBirthDate">生年月日 <span class="required">*</span></label>
            <input type="date" id="dependentBirthDate" formControlName="birthDate" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentGender">性別 <span class="required">*</span></label>
            <select id="dependentGender" formControlName="gender" class="form-input">
              <option value="">選択してください</option>
              <option value="男性">男性</option>
              <option value="女性">女性</option>
            </select>
          </div>
          <div class="form-group">
            <label for="dependentPhoneNumber">電話番号</label>
            <input type="tel" id="dependentPhoneNumber" formControlName="phoneNumber" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentOccupation">職業</label>
            <input type="text" id="dependentOccupation" formControlName="occupation" class="form-input">
          </div>
        </div>
      </section>
      
      <!-- 収入情報 -->
      <section class="form-section">
        <h3 class="section-title">収入情報</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="dependentAnnualIncome">扶養追加日からの年間収入見込み額</label>
            <input type="number" id="dependentAnnualIncome" formControlName="annualIncome" class="form-input" placeholder="円">
          </div>
          <div class="form-group">
            <label for="dependentMonthlyIncome">扶養追加日からの月額収入見込み額</label>
            <input type="number" id="dependentMonthlyIncome" formControlName="monthlyIncome" class="form-input" placeholder="円">
          </div>
          <div class="form-group">
            <label for="dependentStartDate">社会保険の扶養者となった日 <span class="required">*</span></label>
            <input type="date" id="dependentStartDate" formControlName="dependentStartDate" class="form-input">
          </div>
          <div class="form-group full-width">
            <label for="dependentReason">扶養に追加された理由</label>
            <textarea id="dependentReason" formControlName="dependentReason" class="form-input" rows="3"></textarea>
          </div>
        </div>
      </section>
      
      <!-- マイナンバー -->
      <section class="form-section">
        <h3 class="section-title">マイナンバー</h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="provideMyNumber" value="提供する" (change)="onProvideMyNumberChange()">
            提供する
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="provideMyNumber" value="提供しない" (change)="onProvideMyNumberChange()">
            提供しない
          </label>
        </div>
        
        <!-- マイナンバー提供する場合 -->
        <div *ngIf="dependentApplicationForm.get('provideMyNumber')?.value === '提供する'">
          <div class="form-group">
            <label>マイナンバー <span class="required">*</span></label>
            <div class="my-number-container">
              <div class="my-number-inputs">
                <input 
                  type="text" 
                  id="dependentMyNumberPart1" 
                  formControlName="myNumberPart1" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 1)"
                  placeholder="0000"
                  aria-label="マイナンバー（前半4桁）"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="dependentMyNumberPart2" 
                  formControlName="myNumberPart2" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 2)"
                  placeholder="0000"
                  aria-label="マイナンバー（中盤4桁）"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="dependentMyNumberPart3" 
                  formControlName="myNumberPart3" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 3)"
                  placeholder="0000"
                  aria-label="マイナンバー（後半4桁）"
                >
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="dependentMyNumberDoc">番号確認書類添付 <span class="required">*</span></label>
            <input 
              type="file" 
              id="dependentMyNumberDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'myNumberDoc')"
            >
            <div *ngIf="dependentMyNumberDocFile" class="file-name">{{ dependentMyNumberDocFile.name }}</div>
          </div>
          <div class="form-group">
            <label for="dependentIdentityDoc">身元確認書類添付 <span class="required">*</span></label>
            <input 
              type="file" 
              id="dependentIdentityDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'identityDoc')"
            >
            <div *ngIf="dependentIdentityDocFile" class="file-name">{{ dependentIdentityDocFile.name }}</div>
          </div>
        </div>
        
        <!-- マイナンバー提供しない場合 -->
        <div *ngIf="dependentApplicationForm.get('provideMyNumber')?.value === '提供しない'" class="form-group">
          <label for="dependentMyNumberNotProvidedReason">未提供理由 <span class="required">*</span></label>
          <textarea id="dependentMyNumberNotProvidedReason" formControlName="myNumberNotProvidedReason" class="form-input" rows="3"></textarea>
        </div>
      </section>
      
      <!-- 障がい者情報 -->
      <section class="form-section">
        <h3 class="section-title">障がい者情報</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="dependentDisabilityCategory">障がい者区分</label>
            <input type="text" id="dependentDisabilityCategory" formControlName="disabilityCategory" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentDisabilityCardType">障がい者手帳の種類</label>
            <input type="text" id="dependentDisabilityCardType" formControlName="disabilityCardType" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentDisabilityCardIssueDate">障がい者手帳の交付年月日</label>
            <input type="date" id="dependentDisabilityCardIssueDate" formControlName="disabilityCardIssueDate" class="form-input">
          </div>
          <div class="form-group full-width">
            <label for="dependentDisabilityCard">障がい者手帳の画像添付</label>
            <input 
              type="file" 
              id="dependentDisabilityCard" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'disabilityCard')"
            >
            <div *ngIf="dependentDisabilityCardFile" class="file-name">{{ dependentDisabilityCardFile.name }}</div>
          </div>
        </div>
      </section>
      
      <!-- 住所情報 -->
      <section class="form-section">
        <h3 class="section-title">住所情報 <span class="required">*</span></h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="livingTogether" value="同居" (change)="onLivingTogetherChange()">
            同居
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="livingTogether" value="別居" (change)="onLivingTogetherChange()">
            別居
          </label>
        </div>
        <div *ngIf="dependentApplicationForm.get('livingTogether')?.invalid && dependentApplicationForm.get('livingTogether')?.touched" class="error-message">
          同居/別居を選択してください
        </div>
        
        <!-- 別居の場合 -->
        <div *ngIf="dependentApplicationForm.get('livingTogether')?.value === '別居'" class="form-grid">
          <div class="form-group">
            <label for="dependentPostalCode">郵便番号 <span class="required">*</span></label>
            <input type="text" id="dependentPostalCode" formControlName="postalCode" class="form-input" placeholder="例: 123-4567">
          </div>
          <div class="form-group full-width">
            <label for="dependentAddress">住所 <span class="required">*</span></label>
            <textarea id="dependentAddress" formControlName="address" class="form-input" rows="2"></textarea>
          </div>
          <div class="form-group full-width">
            <label for="dependentAddressKana">住所（ヨミガナ）</label>
            <textarea id="dependentAddressKana" formControlName="addressKana" class="form-input" rows="2"></textarea>
          </div>
          <div class="form-group">
            <label for="dependentAddressChangeDate">住所変更年月日</label>
            <input type="date" id="dependentAddressChangeDate" formControlName="addressChangeDate" class="form-input">
          </div>
        </div>
      </section>
      
      <!-- 送信ボタン -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()">キャンセル</button>
        <button type="submit" class="submit-button" [disabled]="dependentApplicationForm.invalid">申請</button>
      </div>
    </form>
  </div>
</div>

<!-- 申請詳細モーダル -->
<div class="modal-overlay" *ngIf="showApplicationDetailModal" (click)="closeApplicationDetailModal()">
  <div class="modal-content application-detail-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">申請詳細</h2>
      <button class="modal-close-button" (click)="closeApplicationDetailModal()">×</button>
    </div>
    
    <div class="application-detail-content" *ngIf="selectedApplication">
      <!-- 申請基本情報 -->
      <section class="detail-section">
        <h3 class="section-title">申請基本情報</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">申請ID:</span>
            <span class="detail-value">{{ selectedApplication.applicationId }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">申請種類:</span>
            <span class="detail-value">{{ selectedApplication.applicationType }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ステータス:</span>
            <span class="detail-value">
              <span class="status-badge" [class.status-pending]="selectedApplication.status === '承認待ち'"
                    [class.status-approved]="selectedApplication.status === '承認'"
                    [class.status-rejected]="selectedApplication.status === '却下'">
                {{ selectedApplication.status }}
              </span>
            </span>
          </div>
          <div class="detail-item">
            <span class="detail-label">申請日:</span>
            <span class="detail-value">{{ getApplicationDate(selectedApplication) | date:'yyyy年MM月dd日' }}</span>
          </div>
        </div>
      </section>
      
      <!-- 扶養家族追加申請の詳細 -->
      <ng-container *ngIf="selectedApplication.applicationType === '扶養家族追加'">
        <!-- 続柄情報 -->
        <section class="detail-section">
          <h3 class="section-title">続柄</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">続柄種別:</span>
              <span class="detail-value">{{ selectedApplication.relationshipType || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === '配偶者'">
              <span class="detail-label">配偶者種別:</span>
              <span class="detail-value">{{ selectedApplication.spouseType || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === '配偶者以外'">
              <span class="detail-label">続柄:</span>
              <span class="detail-value">{{ selectedApplication.relationship || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- 基礎年金番号 -->
        <section class="detail-section">
          <h3 class="section-title">基礎年金番号</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">基礎年金番号:</span>
              <span class="detail-value">{{ formatBasicPensionNumberForDisplay(selectedApplication.basicPensionNumber) }}</span>
            </div>
          </div>
        </section>
        
        <!-- 基本情報 -->
        <section class="detail-section">
          <h3 class="section-title">基本情報</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">姓:</span>
              <span class="detail-value">{{ selectedApplication.lastName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">名:</span>
              <span class="detail-value">{{ selectedApplication.firstName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">姓（ヨミガナ）:</span>
              <span class="detail-value">{{ selectedApplication.lastNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">名（ヨミガナ）:</span>
              <span class="detail-value">{{ selectedApplication.firstNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">生年月日:</span>
              <span class="detail-value">{{ selectedApplication.birthDate || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">性別:</span>
              <span class="detail-value">{{ selectedApplication.gender || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">電話番号:</span>
              <span class="detail-value">{{ selectedApplication.phoneNumber || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">職業:</span>
              <span class="detail-value">{{ selectedApplication.occupation || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- 収入情報 -->
        <section class="detail-section">
          <h3 class="section-title">収入情報</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">扶養追加日からの年間収入見込み額:</span>
              <span class="detail-value">{{ selectedApplication.annualIncome ? (selectedApplication.annualIncome | number:'1.0-0') + '円' : '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">扶養追加日からの月額収入見込み額:</span>
              <span class="detail-value">{{ selectedApplication.monthlyIncome ? (selectedApplication.monthlyIncome | number:'1.0-0') + '円' : '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">社会保険の扶養者となった日:</span>
              <span class="detail-value">{{ selectedApplication.dependentStartDate || '-' }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">扶養に追加された理由:</span>
              <span class="detail-value">{{ selectedApplication.dependentReason || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- マイナンバー情報 -->
        <section class="detail-section">
          <h3 class="section-title">マイナンバー</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">マイナンバーの提供:</span>
              <span class="detail-value">{{ selectedApplication.provideMyNumber || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.provideMyNumber === '提供する'">
              <span class="detail-label">マイナンバー:</span>
              <span class="detail-value">{{ formatMyNumberForDisplay(selectedApplication.myNumber) }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.provideMyNumber === '提供しない'">
              <span class="detail-label">未提供理由:</span>
              <span class="detail-value">{{ selectedApplication.myNumberNotProvidedReason || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- 障がい者情報 -->
        <section class="detail-section" *ngIf="selectedApplication.disabilityCategory || selectedApplication.disabilityCardType">
          <h3 class="section-title">障がい者情報</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">障がい者区分:</span>
              <span class="detail-value">{{ selectedApplication.disabilityCategory || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">障がい者手帳の種類:</span>
              <span class="detail-value">{{ selectedApplication.disabilityCardType || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">障がい者手帳の交付年月日:</span>
              <span class="detail-value">{{ selectedApplication.disabilityCardIssueDate || '-' }}</span>
            </div>
          </div>
        </section>
        
        <!-- 住所情報 -->
        <section class="detail-section">
          <h3 class="section-title">住所情報</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">同居/別居:</span>
              <span class="detail-value">{{ selectedApplication.livingTogether || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.livingTogether === '別居'">
              <span class="detail-label">郵便番号:</span>
              <span class="detail-value">{{ selectedApplication.postalCode || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === '別居'">
              <span class="detail-label">住所:</span>
              <span class="detail-value">{{ selectedApplication.address || '-' }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === '別居'">
              <span class="detail-label">住所（ヨミガナ）:</span>
              <span class="detail-value">{{ selectedApplication.addressKana || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.livingTogether === '別居'">
              <span class="detail-label">住所変更年月日:</span>
              <span class="detail-value">{{ selectedApplication.addressChangeDate || '-' }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- その他の申請タイプの詳細（今後実装） -->
      <ng-container *ngIf="selectedApplication.applicationType !== '扶養家族追加'">
        <section class="detail-section">
          <p class="no-detail-message">この申請タイプの詳細表示は今後実装予定です。</p>
        </section>
      </ng-container>
    </div>
    
    <div class="modal-footer">
      <button type="button" class="close-detail-button" (click)="closeApplicationDetailModal()">閉じる</button>
    </div>
  </div>
</div>
