<div class="dashboard-wrapper">
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1 class="app-name">SIApp</h1>
    </div>
    <div class="header-right">
      <span class="employee-info">
        <span class="employee-number">ç¤¾å“¡ç•ªå·: {{ employeeNumber }}</span>
        <span class="employee-name">{{ employeeName }}</span>
      </span>
      <button class="logout-button" (click)="logout()" [attr.disabled]="isSubmittingOnboardingApplication ? '' : null" [title]="isSubmittingOnboardingApplication ? 'ç”³è«‹ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  </header>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
  <div class="dashboard-body">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <button
          *ngFor="let tab of tabs"
          class="sidebar-item"
          [class.active]="currentTab === tab.name"
          (click)="switchTab(tab.name)"
          [attr.disabled]="isSubmittingOnboardingApplication ? '' : null"
          [title]="isSubmittingOnboardingApplication ? 'ç”³è«‹ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''"
        >
          {{ tab.name }}
        </button>
      </nav>
    </aside>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
      <div class="content-area">
        <!-- æƒ…å ±ç…§ä¼šãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'æƒ…å ±ç…§ä¼š'">
          <form [formGroup]="settingsForm" class="settings-form" style="display: none;">
            <!-- ãƒ•ã‚©ãƒ¼ãƒ ã¯éè¡¨ç¤ºã«ã™ã‚‹ãŒã€ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®ãŸã‚ã«æ®‹ã™ -->
          </form>

          <div class="info-inquiry-layout">
            <!-- åŸºæœ¬æƒ…å ±æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">åŸºæœ¬æƒ…å ±</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">å§“:</span>
                    <span class="info-value">{{ getFormValue('lastName') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">å:</span>
                    <span class="info-value">{{ getFormValue('firstName') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('lastNameKana') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('firstNameKana') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">ç”Ÿå¹´æœˆæ—¥:</span>
                    <span class="info-value">
                      {{ formatDateForDisplay(settingsForm.get('birthDate')?.value) }}
                      <span *ngIf="age !== null">ï¼ˆ{{ age }}æ­³ï¼‰</span>
                    </span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">æˆ¸ç±ä¸Šã®æ€§åˆ¥:</span>
                    <span class="info-value">{{ getFormValue('gender') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                    <span class="info-value">{{ getFormValue('email') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜:</span>
                    <span class="info-value">
                      <a *ngIf="employeeData?.idDocumentFileUrl" [href]="employeeData.idDocumentFileUrl" target="_blank" class="file-link">
                        {{ employeeData.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                      </a>
                      <span *ngIf="!employeeData?.idDocumentFileUrl" class="no-data">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</span>
                    </span>
                  </div>
                </div>
              </div>
            </section>

            <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                    <span class="info-value">
                      {{ getMyNumberFullDisplay() }}
                      <button 
                        type="button" 
                        class="toggle-button-small" 
                        (click)="toggleMyNumber()"
                        style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem;"
                      >
                        {{ showMyNumber ? 'éè¡¨ç¤º' : 'è¡¨ç¤º' }}
                      </button>
                    </span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜:</span>
                    <span class="info-value">
                      <a *ngIf="employeeData?.myNumberCardFileUrl" [href]="employeeData.myNumberCardFileUrl" target="_blank" class="file-link">
                        {{ employeeData.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                      </a>
                      <span *ngIf="!employeeData?.myNumberCardFileUrl" class="no-data">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</span>
                    </span>
                  </div>
                </div>
              </div>
            </section>

            <!-- å…¥é€€ç¤¾æƒ…å ±æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">å…¥é€€ç¤¾æƒ…å ±</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">åœ¨ç±çŠ¶æ³:</span>
                    <span class="info-value">{{ getFormValue('employmentStatus') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">å…¥ç¤¾å¹´æœˆæ—¥:</span>
                    <span class="info-value">{{ formatDateForDisplay(settingsForm.get('joinDate')?.value) }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">é€€è·å¹´æœˆæ—¥:</span>
                    <span class="info-value">{{ formatDateForDisplay(settingsForm.get('resignationDate')?.value) }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">é€€è·äº‹ç”±:</span>
                    <span class="info-value">{{ getFormValue('resignationReason') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- æ¥­å‹™æƒ…å ±æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">æ¥­å‹™æƒ…å ±</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">ç¤¾å“¡ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('employeeNumber') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">é›‡ç”¨å½¢æ…‹:</span>
                    <span class="info-value">{{ getFormValue('employmentType') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- éƒ¨ç½²ãƒ»å½¹è·æƒ…å ± -->
            <section class="info-card">
              <h3 class="card-title">éƒ¨ç½²ãƒ»å½¹è·æƒ…å ±</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">éƒ¨ç½²:</span>
                    <span class="info-value">{{ getFormValue('department') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">å½¹è·:</span>
                    <span class="info-value">{{ getFormValue('position') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- ç¾ä½æ‰€ã¨é€£çµ¡å…ˆæ¬„ -->
            <section class="info-card">
              <h3 class="card-title">ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">æµ·å¤–ã«åœ¨ä½:</span>
                    <span class="info-value">{{ settingsForm.get('isOverseasResident')?.value ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('isOverseasResident')?.value">
                  <div class="info-row">
                    <span class="info-label">éƒµä¾¿ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('postalCode') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">é›»è©±ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('phoneNumber') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('isOverseasResident')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ç¾ä½æ‰€:</span>
                    <span class="info-value">{{ getFormValue('currentAddress') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('isOverseasResident')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('currentAddressKana') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="settingsForm.get('isOverseasResident')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ä½æ‰€ï¼ˆæµ·å¤–ï¼‰:</span>
                    <span class="info-value">{{ getFormValue('overseasAddress') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="settingsForm.get('isOverseasResident')?.value">
                  <div class="info-row">
                    <span class="info-label">é›»è©±ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('phoneNumber') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- ä½æ°‘ç¥¨ä½æ‰€æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">ä½æ°‘ç¥¨ä½æ‰€</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„:</span>
                    <span class="info-value">{{ settingsForm.get('skipResidentAddress')?.value ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="settingsForm.get('skipResidentAddress')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ç†ç”±:</span>
                    <span class="info-value">{{ getFormValue('residentAddressSkipReason') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="settingsForm.get('skipResidentAddress')?.value && settingsForm.get('residentAddressSkipReason')?.value === 'ãã®ä»–'">
                  <div class="info-row full-width">
                    <span class="info-label">ç†ç”±ï¼ˆãã®ä»–ï¼‰:</span>
                    <span class="info-value">{{ getFormValue('residentAddressSkipReasonOther') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('skipResidentAddress')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ç¾ä½æ‰€ã¨åŒã˜:</span>
                    <span class="info-value">{{ settingsForm.get('sameAsCurrentAddress')?.value ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('skipResidentAddress')?.value">
                  <div class="info-row">
                    <span class="info-label">éƒµä¾¿ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('residentPostalCode') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('skipResidentAddress')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ä½æ‰€:</span>
                    <span class="info-value">{{ getFormValue('residentAddress') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="!settingsForm.get('skipResidentAddress')?.value">
                  <div class="info-row full-width">
                    <span class="info-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('residentAddressKana') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">å±¥æ­´æ›¸æ·»ä»˜:</span>
                    <span class="info-value">
                      <a *ngIf="employeeData?.resumeFileUrl" [href]="employeeData.resumeFileUrl" target="_blank" class="file-link">
                        {{ employeeData.resumeFile || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
                      </a>
                      <span *ngIf="!employeeData?.resumeFileUrl" class="no-data">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</span>
                    </span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">è·å‹™çµŒæ­´æ›¸æ·»ä»˜:</span>
                    <span class="info-value">
                      <a *ngIf="employeeData?.careerHistoryFileUrl" [href]="employeeData.careerHistoryFileUrl" target="_blank" class="file-link">
                        {{ employeeData.careerHistoryFile || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
                      </a>
                      <span *ngIf="!employeeData?.careerHistoryFileUrl" class="no-data">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</span>
                    </span>
                  </div>
                </div>
              </div>
            </section>

            <!-- ç·Šæ€¥é€£çµ¡å…ˆæ¬„ -->
            <section class="info-card">
              <h3 class="card-title">ç·Šæ€¥é€£çµ¡å…ˆ</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">æ°å:</span>
                    <span class="info-value">{{ getFormValue('emergencyContact.name') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('emergencyContact.nameKana') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">ç¶šæŸ„:</span>
                    <span class="info-value">{{ getFormValue('emergencyContact.relationship') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('emergencyContact.phone') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ç¾ä½æ‰€ã¨åŒã˜:</span>
                    <span class="info-value">{{ sameAsCurrentAddressForEmergency ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ä½æ‰€:</span>
                    <span class="info-value">{{ getFormValue('emergencyContact.address') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('emergencyContact.addressKana') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- å£åº§æƒ…å ±æ¬„ -->
            <section class="info-card">
              <h3 class="card-title">å£åº§æƒ…å ±</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">éŠ€è¡Œå:</span>
                    <span class="info-value">{{ getFormValue('bankAccount.bankName') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">é é‡‘ç¨®åˆ¥:</span>
                    <span class="info-value">{{ getFormValue('bankAccount.accountType') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰:</span>
                    <span class="info-value">{{ getFormValue('bankAccount.accountHolder') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">æ”¯åº—å:</span>
                    <span class="info-value">{{ getFormValue('bankAccount.branchName') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">å£åº§ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('bankAccount.accountNumber') }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- ç¤¾ä¼šä¿é™ºæ¬„ -->
            <section class="info-card">
              <h3 class="card-title">ç¤¾ä¼šä¿é™º</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">å¥åº·ä¿é™ºã®è¢«ä¿é™ºè€…æ•´ç†ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('healthInsuranceNumber') }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">åšç”Ÿå¹´é‡‘ä¿é™ºã®è¢«ä¿é™ºè€…æ•´ç†ç•ªå·:</span>
                    <span class="info-value">{{ getFormValue('pensionInsuranceNumber') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">åŸºç¤å¹´é‡‘ç•ªå·:</span>
                    <span class="info-value">{{ getBasicPensionNumberDisplay() }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´:</span>
                    <span class="info-value">{{ getFormValue('pensionHistoryStatus') }}</span>
                  </div>
                </div>
                <div class="info-row-pair" *ngIf="hasPensionHistory">
                  <div class="info-row full-width">
                    <span class="info-label">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ï¼ˆè©³ç´°ï¼‰:</span>
                    <span class="info-value">{{ getFormValue('pensionHistory') }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">ç¤¾ä¼šä¿é™ºã®è³‡æ ¼å–å¾—å¹´æœˆæ—¥:</span>
                    <span class="info-value">{{ formatDateForDisplay(settingsForm.get('socialInsuranceAcquisitionDate')?.value) }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">ç¤¾ä¼šä¿é™ºã®è³‡æ ¼å–ªå¤±å¹´æœˆæ—¥:</span>
                    <span class="info-value">{{ formatDateForDisplay(settingsForm.get('socialInsuranceLossDate')?.value) }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row full-width">
                    <span class="info-label">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡æ·»ä»˜:</span>
                    <span class="info-value">
                      <a *ngIf="employeeData?.basicPensionNumberDocFileUrl" [href]="employeeData.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                        {{ employeeData.basicPensionNumberDocFile || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
                      </a>
                      <span *ngIf="!employeeData?.basicPensionNumberDocFileUrl" class="no-data">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</span>
                    </span>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </ng-container>

        <!-- å„ç¨®ç”³è«‹ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'å„ç¨®ç”³è«‹'">
          <div class="application-grid">
            <button 
              *ngIf="!hasOnboardingApplication"
              class="application-button" 
              (click)="openApplicationModal('å…¥ç¤¾æ™‚ç”³è«‹')"
            >
              <span class="application-icon">ğŸ“</span>
              <span class="application-label">å…¥ç¤¾æ™‚ç”³è«‹</span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('æ‰¶é¤Šå®¶æ—è¿½åŠ ')"
              [disabled]="!isOnboardingCompleted"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
            >
              <span class="application-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</span>
              <span class="application-label">æ‰¶é¤Šå®¶æ—è¿½åŠ </span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('æ‰¶é¤Šå‰Šé™¤ç”³è«‹')"
              [disabled]="!isOnboardingCompleted"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
            >
              <span class="application-icon">âŒ</span>
              <span class="application-label">æ‰¶é¤Šå‰Šé™¤ç”³è«‹</span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('ä½æ‰€å¤‰æ›´ç”³è«‹')"
              [disabled]="!isOnboardingCompleted"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
            >
              <span class="application-icon">ğŸ </span>
              <span class="application-label">ä½æ‰€å¤‰æ›´ç”³è«‹</span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('æ°åå¤‰æ›´ç”³è«‹')"
              [disabled]="!isOnboardingCompleted"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
            >
              <span class="application-icon">âœï¸</span>
              <span class="application-label">æ°åå¤‰æ›´ç”³è«‹</span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹')"
              [disabled]="!isOnboardingCompleted"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
            >
              <span class="application-icon">ğŸ”¢</span>
              <span class="application-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹</span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹')"
              [disabled]="!isOnboardingCompleted"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
            >
              <span class="application-icon">ğŸ¤°</span>
              <span class="application-label">ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹</span>
            </button>
            
            <button 
              class="application-button" 
              (click)="openApplicationModal('é€€è·ç”³è«‹')"
              [disabled]="!isOnboardingCompleted || hasResignationApplication()"
              [title]="!isOnboardingCompleted ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : (hasResignationApplication() ? 'æ—¢ã«é€€è·ç”³è«‹ãŒæå‡ºã•ã‚Œã¦ã„ã¾ã™' : '')"
            >
              <span class="application-icon">ğŸšª</span>
              <span class="application-label">é€€è·ç”³è«‹</span>
            </button>
          </div>
        </ng-container>

        <!-- ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸'">
          <div class="main-page-layout">
            <!-- ä¸Šéƒ¨ã‚¨ãƒªã‚¢ï¼šè‡ªåˆ†ã®æƒ…å ±æ¬„ã¨äººäº‹ã‹ã‚‰ã®ä¾é ¼æ¬„ -->
            <div class="main-page-top">
              <!-- è‡ªåˆ†ã®æƒ…å ±æ¬„ -->
              <div class="info-card my-info-card">
                <h3 class="card-title">è‡ªåˆ†ã®æƒ…å ±</h3>
                <div class="info-content my-info-grid" *ngIf="employeeData">
                  <div class="info-row-pair">
                    <div class="info-row">
                      <span class="info-label">ç¤¾å“¡ç•ªå·:</span>
                      <span class="info-value">{{ employeeData.employeeNumber || employeeNumber }}</span>
                    </div>
                    <div class="info-row">
                      <span class="info-label">æ°å:</span>
                      <span class="info-value">{{ (employeeData.lastName || '') + (employeeData.firstName || '') || employeeData.name || employeeName }}</span>
                    </div>
                  </div>
                  <div class="info-row-pair">
                    <div class="info-row">
                      <span class="info-label">éƒ¨ç½²:</span>
                      <span class="info-value">{{ employeeData.department || '-' }}</span>
                    </div>
                    <div class="info-row">
                      <span class="info-label">å½¹è·:</span>
                      <span class="info-value">{{ employeeData.position || '-' }}</span>
                    </div>
                  </div>
                  <div class="info-row-pair">
                    <div class="info-row">
                      <span class="info-label">é›‡ç”¨å½¢æ…‹:</span>
                      <span class="info-value">{{ employeeData.employmentType || '-' }}</span>
                    </div>
                    <div class="info-row">
                      <span class="info-label">åœ¨ç±çŠ¶æ³:</span>
                      <span class="info-value">{{ employeeData.employmentStatus || 'åœ¨ç±' }}</span>
                    </div>
                  </div>
                </div>
                <div class="info-content" *ngIf="!employeeData">
                  <p class="no-data">æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
              </div>

              <!-- äººäº‹ã‹ã‚‰ã®ä¾é ¼æ¬„ -->
              <div class="info-card hr-request-card">
                <h3 class="card-title">
                  äººäº‹ã‹ã‚‰ã®ä¾é ¼
                  <span class="request-badge" *ngIf="hrRequests.length > 0">{{ hrRequests.length }}</span>
                </h3>
                <div class="request-content">
                  <div *ngIf="hrRequests.length === 0" class="no-data">
                    ç¾åœ¨ã€ä¾é ¼ã¯ã‚ã‚Šã¾ã›ã‚“
                  </div>
                  <div *ngFor="let request of hrRequests" class="request-item">
                    <div class="request-header">
                      <span class="request-title">{{ request.title }}</span>
                      <span class="request-date" *ngIf="request.date">{{ request.date | date:'yyyy/MM/dd' }}</span>
                    </div>
                    <p class="request-message">{{ request.message }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- ç”³è«‹ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« -->
            <div class="application-list-section">
              <div class="section-header">
                <h3 class="section-title">ç”³è«‹ä¸€è¦§</h3>
              </div>
              <div class="table-container">
                <table class="application-table">
                  <thead>
                    <tr>
                      <th class="col-application-id">ç”³è«‹ID</th>
                      <th class="col-application-type">ç”³è«‹ç¨®é¡</th>
                      <th class="col-status">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                      <th class="col-application-date">ç”³è«‹æ—¥</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let application of applications" class="application-row" (click)="openApplicationDetail(application)">
                      <td class="col-application-id">{{ application.applicationId }}</td>
                      <td class="col-application-type">{{ application.applicationType }}</td>
                      <td class="col-status">
                        <span class="status-badge"
                              [class.status-pending]="application.status === 'æ‰¿èªå¾…ã¡'"
                              [class.status-reviewing]="application.status === 'ç¢ºèªä¸­'"
                              [class.status-approved]="application.status === 'æ‰¿èª' || application.status === 'æ‰¿èªæ¸ˆã¿'"
                              [class.status-submitted]="application.status === 'ç”³è«‹æ¸ˆã¿'"
                              [class.status-rejected]="application.status === 'å´ä¸‹' || application.status === 'å·®ã—æˆ»ã—'"
                              [class.status-cancelled]="application.status === 'å–ã‚Šæ¶ˆã—'"
                              [class.status-resubmitted]="application.status === 'å†ç”³è«‹' || application.status === 'å†æå‡º'">
                          {{ application.status }}
                        </span>
                      </td>
                      <td class="col-application-date">{{ getApplicationDate(application) | date:'yyyy/MM/dd' }}</td>
                    </tr>
                    <tr *ngIf="applications.length === 0">
                      <td colspan="4" class="empty-message">ç”³è«‹å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´'">
          <form [formGroup]="passwordChangeForm" (ngSubmit)="changePassword()" class="settings-form">
            <section class="form-section">
              <h3 class="section-title">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label for="currentPassword">ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="required">*</span></label>
                  <input 
                    type="password" 
                    id="currentPassword" 
                    formControlName="currentPassword" 
                    class="form-input"
                    placeholder="ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›"
                  >
                  <div *ngIf="passwordChangeForm.get('currentPassword')?.invalid && passwordChangeForm.get('currentPassword')?.touched" class="error-message">
                    ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
                <div class="form-group">
                  <label for="newPassword">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="required">*</span></label>
                  <input 
                    type="password" 
                    id="newPassword" 
                    formControlName="newPassword" 
                    class="form-input"
                    placeholder="æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆ6æ–‡å­—ä»¥ä¸Šï¼‰"
                  >
                  <div *ngIf="passwordChangeForm.get('newPassword')?.invalid && passwordChangeForm.get('newPassword')?.touched" class="error-message">
                    æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’6æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
                <div class="form-group">
                  <label for="confirmPassword">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰ <span class="required">*</span></label>
                  <input 
                    type="password" 
                    id="confirmPassword" 
                    formControlName="confirmPassword" 
                    class="form-input"
                    placeholder="æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›"
                  >
                  <div *ngIf="passwordChangeForm.get('confirmPassword')?.invalid && passwordChangeForm.get('confirmPassword')?.touched" class="error-message">
                    æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                  <div *ngIf="passwordChangeForm.get('confirmPassword')?.hasError('passwordMismatch') && passwordChangeForm.get('confirmPassword')?.touched" class="error-message">
                    æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“
                  </div>
                </div>
              </div>
            </section>
            
            <div class="form-actions">
              <button type="submit" class="submit-button" [disabled]="passwordChangeForm.invalid">
                ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´
              </button>
            </div>
          </form>
        </ng-container>

        <!-- ãã®ä»–ã®ã‚¿ãƒ– -->
        <!-- ä¿é™ºãƒ»æ‰¶é¤Šãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ä¿é™ºãƒ»æ‰¶é¤Š'">
          <div class="info-inquiry-layout">
            
            <!-- ä¿é™ºè€…ç¨®åˆ¥æƒ…å ± -->
            <section class="info-card">
              <h3 class="card-title">ä¿é™ºè€…ç¨®åˆ¥</h3>
              <div class="info-content">
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">å¥åº·ä¿é™ºè€…ç¨®åˆ¥:</span>
                    <span class="info-value">{{ insuranceData?.healthInsuranceType || '-' }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">ä»‹è­·ä¿é™ºè€…ç¨®åˆ¥:</span>
                    <span class="info-value">{{ insuranceData?.nursingInsuranceType || '-' }}</span>
                  </div>
                </div>
                <div class="info-row-pair">
                  <div class="info-row">
                    <span class="info-label">åšç”Ÿå¹´é‡‘ä¿é™ºè€…ç¨®åˆ¥:</span>
                    <span class="info-value">{{ insuranceData?.pensionInsuranceType || '-' }}</span>
                  </div>
                </div>
              </div>
            </section>

            <!-- æ‰¶é¤Šè€…æƒ…å ± -->
            <section class="info-card">
              <h3 class="card-title">æ‰¶é¤Šè€…æƒ…å ±</h3>
              <div class="info-content">
                <div *ngIf="dependentsData.length === 0" class="no-data">
                  æ‰¶é¤Šè€…ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
                </div>
                <div *ngFor="let dependent of dependentsData; let i = index" class="dependent-card">
                  <div class="dependent-header" (click)="toggleDependentExpanded(i)" style="cursor: pointer; padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 1rem; transition: background 0.2s ease;">
                    <h4 class="dependent-title" style="margin: 0; font-size: 1rem; font-weight: 600; color: #333; display: flex; align-items: center; justify-content: space-between;">
                      <span>æ‰¶é¤Šè€… {{ i + 1 }}</span>
                      <span class="expand-icon" style="font-size: 0.75rem; color: #667eea;">{{ isDependentExpanded(i) ? 'â–¼' : 'â–¶' }}</span>
                    </h4>
                  </div>
                  <div class="info-content" *ngIf="isDependentExpanded(i)" style="padding-left: 0.5rem;">
                    <!-- é…å¶è€…ã®å ´åˆ -->
                    <ng-container *ngIf="dependent.relationshipType === 'é…å¶è€…'">
                      <!-- ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰:</span>
                          <span class="info-value">{{ dependent.spouseType || dependent.relationship || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- æ°å -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">å§“:</span>
                          <span class="info-value">{{ dependent.lastName || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">å:</span>
                          <span class="info-value">{{ dependent.firstName || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                          <span class="info-value">{{ dependent.lastNameKana || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                          <span class="info-value">{{ dependent.firstNameKana || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ç”Ÿå¹´æœˆæ—¥ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ç”Ÿå¹´æœˆæ—¥:</span>
                          <span class="info-value">{{ dependent.birthDate ? (dependent.birthDate | date:'yyyyå¹´MMæœˆddæ—¥') : '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
                      <div class="info-row-pair" *ngIf="dependent.myNumber" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                          <span class="info-value">{{ getDependentMyNumberDisplay(dependent, i) }}</span>
                          <button type="button" (click)="toggleDependentMyNumber(i)" style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            {{ isDependentMyNumberVisible(i) ? 'éè¡¨ç¤º' : 'è¡¨ç¤º' }}
                          </button>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.myNumberCardFileUrl">
                          <span class="info-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜:</span>
                          <span class="info-value">
                            <a [href]="dependent.myNumberCardFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.myNumberCardFileUrl, dependent.myNumberCardFileName) }}</a>
                          </span>
                        </div>
                      </div>
                      
                      <!-- åŸºç¤å¹´é‡‘ç•ªå· -->
                      <div class="info-row-pair" *ngIf="dependent.basicPensionNumber" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">åŸºç¤å¹´é‡‘ç•ªå·:</span>
                          <span class="info-value">{{ dependent.basicPensionNumber || '-' }}</span>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.basicPensionNumberDocFileUrl">
                          <span class="info-label">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡:</span>
                          <span class="info-value">
                            <a [href]="dependent.basicPensionNumberDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.basicPensionNumberDocFileUrl, dependent.basicPensionNumberDocFileName) }}</a>
                          </span>
                        </div>
                      </div>
                      
                      <!-- å¤–å›½ç±ã‹ -->
                      <div class="info-row-pair" *ngIf="dependent.isForeignNational" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">å¤–å›½ç±ã‹:</span>
                          <span class="info-value">{{ dependent.isForeignNational || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isForeignNational === 'ã¯ã„'">
                          <span class="info-label">å›½ç±:</span>
                          <span class="info-value">{{ dependent.nationality || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isForeignNational === 'ã¯ã„'">
                          <span class="info-label">é€šç§°å:</span>
                          <span class="info-value">{{ dependent.aliasName || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ä½æ‰€ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ä½æ‰€ï¼ˆåŒå±…/åˆ¥å±…ï¼‰:</span>
                          <span class="info-value">{{ dependent.livingTogether || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.livingTogether === 'åˆ¥å±…'">
                          <span class="info-label">éƒµä¾¿ç•ªå·:</span>
                          <span class="info-value">{{ dependent.postalCode || '-' }}</span>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.livingTogether === 'åˆ¥å±…'">
                          <span class="info-label">ä½æ‰€:</span>
                          <span class="info-value">{{ dependent.address || '-' }}</span>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.livingTogether === 'åˆ¥å±…' && dependent.monthlySupportAmount">
                          <span class="info-label">æ¯æœˆã®ä»•é€ã‚Šé¡:</span>
                          <span class="info-value">{{ dependent.monthlySupportAmount ? (dependent.monthlySupportAmount | number:'1.0-0') + 'å††' : '-' }}</span>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.livingTogether === 'åˆ¥å±…' && dependent.supportAmountDocFileUrl">
                          <span class="info-label">ä»•é€ã‚Šé¡è¨¼æ˜æ›¸é¡:</span>
                          <span class="info-value">
                            <a [href]="dependent.supportAmountDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.supportAmountDocFileUrl, dependent.supportAmountDocFileName) }}</a>
                          </span>
                        </div>
                      </div>
                      
                      <!-- é›»è©±ç•ªå· -->
                      <div class="info-row-pair" *ngIf="dependent.phoneNumber" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">é›»è©±ç•ªå·ã®ç¨®é¡:</span>
                          <span class="info-value">{{ dependent.phoneNumberType || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.phoneNumberType === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.phoneNumberOther || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">é›»è©±ç•ªå·:</span>
                          <span class="info-value">{{ dependent.phoneNumber || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥:</span>
                          <span class="info-value">{{ dependent.dependentStartDate ? (dependent.dependentStartDate | date:'yyyyå¹´MMæœˆddæ—¥') : '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ç†ç”± -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ç†ç”±:</span>
                          <span class="info-value">{{ dependent.dependentReason || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.dependentReason === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.dependentReasonOther || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- è·æ¥­ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">è·æ¥­:</span>
                          <span class="info-value">{{ dependent.occupation || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.occupation === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.occupationOther || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.occupation === 'å¤§å­¦ç”Ÿ'">
                          <span class="info-label">ä½•å¹´ç”Ÿ:</span>
                          <span class="info-value">{{ dependent.studentYear || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- å¹´åè¦‹è¾¼ã¿é¡ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">å¹´åè¦‹è¾¼ã¿é¡:</span>
                          <span class="info-value">{{ dependent.annualIncome ? (dependent.annualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ -->
                      <div class="info-row-pair" *ngIf="dependent.isOverseasResident" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ:</span>
                          <span class="info-value">{{ dependent.isOverseasResident || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isOverseasResident === 'ã¯ã„'">
                          <span class="info-label">æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«è©²å½“ã—ãŸæ—¥:</span>
                          <span class="info-value">{{ dependent.overseasSpecialRequirementDate ? (dependent.overseasSpecialRequirementDate | date:'yyyyå¹´MMæœˆddæ—¥') : '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isOverseasResident === 'ã¯ã„'">
                          <span class="info-label">ç†ç”±:</span>
                          <span class="info-value">{{ dependent.overseasReason || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isOverseasResident === 'ã¯ã„' && dependent.overseasReason === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.overseasReasonOther || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
                      <div class="info-row-pair" *ngIf="dependent.needsQualificationConfirmation" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹:</span>
                          <span class="info-value">{{ dependent.needsQualificationConfirmation || '-' }}</span>
                        </div>
                      </div>
                    </ng-container>
                    
                    <!-- é…å¶è€…ä»¥å¤–ã®å ´åˆ -->
                    <ng-container *ngIf="dependent.relationshipType === 'é…å¶è€…ä»¥å¤–'">
                      <!-- ç¶šæŸ„ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ç¶šæŸ„:</span>
                          <span class="info-value">{{ dependent.relationship || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.relationship === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.relationshipOther || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- æ°å -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">å§“:</span>
                          <span class="info-value">{{ dependent.lastName || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">å:</span>
                          <span class="info-value">{{ dependent.firstName || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                          <span class="info-value">{{ dependent.lastNameKana || '-' }}</span>
                        </div>
                        <div class="info-row">
                          <span class="info-label">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                          <span class="info-value">{{ dependent.firstNameKana || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜ -->
                      <div class="info-row-pair" *ngIf="dependent.identityDocFileUrl" style="margin-bottom: 0.5rem;">
                        <div class="info-row full-width">
                          <span class="info-label">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜:</span>
                          <span class="info-value">
                            <a [href]="dependent.identityDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.identityDocFileUrl, dependent.identityDocFileName) }}</a>
                          </span>
                        </div>
                      </div>
                      
                      <!-- ç”Ÿå¹´æœˆæ—¥ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ç”Ÿå¹´æœˆæ—¥:</span>
                          <span class="info-value">{{ dependent.birthDate ? (dependent.birthDate | date:'yyyyå¹´MMæœˆddæ—¥') : '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
                      <div class="info-row-pair" *ngIf="dependent.myNumber" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                          <span class="info-value">{{ getDependentMyNumberDisplay(dependent, i) }}</span>
                          <button type="button" (click)="toggleDependentMyNumber(i)" style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            {{ isDependentMyNumberVisible(i) ? 'éè¡¨ç¤º' : 'è¡¨ç¤º' }}
                          </button>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.myNumberCardFileUrl">
                          <span class="info-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜:</span>
                          <span class="info-value">
                            <a [href]="dependent.myNumberCardFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(dependent.myNumberCardFileUrl, dependent.myNumberCardFileName) }}</a>
                          </span>
                        </div>
                      </div>
                      
                      <!-- æ€§åˆ¥ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">æ€§åˆ¥:</span>
                          <span class="info-value">{{ dependent.gender || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ä½æ‰€ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ä½æ‰€ï¼ˆåŒå±…/åˆ¥å±…ï¼‰:</span>
                          <span class="info-value">{{ dependent.livingTogether || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.livingTogether === 'åˆ¥å±…'">
                          <span class="info-label">éƒµä¾¿ç•ªå·:</span>
                          <span class="info-value">{{ dependent.postalCode || '-' }}</span>
                        </div>
                        <div class="info-row full-width" *ngIf="dependent.livingTogether === 'åˆ¥å±…'">
                          <span class="info-label">ä½æ‰€:</span>
                          <span class="info-value">{{ dependent.address || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ -->
                      <div class="info-row-pair" *ngIf="dependent.isOverseasResident" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ:</span>
                          <span class="info-value">{{ dependent.isOverseasResident || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isOverseasResident === 'ã¯ã„'">
                          <span class="info-label">ç†ç”±:</span>
                          <span class="info-value">{{ dependent.overseasReason || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.isOverseasResident === 'ã¯ã„' && dependent.overseasReason === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.overseasReasonOther || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥:</span>
                          <span class="info-value">{{ dependent.dependentStartDate ? (dependent.dependentStartDate | date:'yyyyå¹´MMæœˆddæ—¥') : '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- è·æ¥­ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">è·æ¥­:</span>
                          <span class="info-value">{{ dependent.occupation || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.occupation === 'å¤§å­¦ç”Ÿ'">
                          <span class="info-label">ä½•å¹´ç”Ÿ:</span>
                          <span class="info-value">{{ dependent.studentYear || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.occupation === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.occupationOther || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- å¹´åè¦‹è¾¼ã¿é¡ -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">å¹´åè¦‹è¾¼ã¿é¡:</span>
                          <span class="info-value">{{ dependent.annualIncome ? (dependent.annualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- ç†ç”± -->
                      <div class="info-row-pair" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">ç†ç”±:</span>
                          <span class="info-value">{{ dependent.dependentReason || '-' }}</span>
                        </div>
                        <div class="info-row" *ngIf="dependent.dependentReason === 'ãã®ä»–'">
                          <span class="info-label">ãã®ä»–:</span>
                          <span class="info-value">{{ dependent.dependentReasonOther || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
                      <div class="info-row-pair" *ngIf="dependent.needsQualificationConfirmation" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹:</span>
                          <span class="info-value">{{ dependent.needsQualificationConfirmation || '-' }}</span>
                        </div>
                      </div>
                      
                      <!-- é…å¶è€…ã®å¹´å -->
                      <div class="info-row-pair" *ngIf="dependent.spouseAnnualIncome" style="margin-bottom: 0.5rem;">
                        <div class="info-row">
                          <span class="info-label">é…å¶è€…ã®å¹´å:</span>
                          <span class="info-value">{{ dependent.spouseAnnualIncome ? (dependent.spouseAnnualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
                        </div>
                      </div>
                    </ng-container>
                    
                    <!-- å‚™è€ƒ -->
                    <div class="info-row-pair" *ngIf="dependent.notes" style="margin-bottom: 0.5rem;">
                      <div class="info-row full-width">
                        <span class="info-label">å‚™è€ƒ:</span>
                        <span class="info-value">{{ dependent.notes }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </ng-container>

        <!-- ãƒŠãƒ¬ãƒƒã‚¸ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab === 'ãƒŠãƒ¬ãƒƒã‚¸'">
          <div class="knowledge-page">
            
            <!-- ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ -->
            <div class="chat-container">
              <div class="chat-messages" #chatMessagesContainer>
                <div *ngIf="chatMessages.length === 0" class="chat-welcome">
                  <p>ã“ã‚“ã«ã¡ã¯ï¼äººäº‹ãƒ»çµ¦ä¸ã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹ã”è³ªå•ã«ãŠç­”ãˆã—ã¾ã™ã€‚</p>
                  <p>ã©ã®ã‚ˆã†ãªã“ã¨ã§ãŠå›°ã‚Šã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
                  
                  <!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè³ªå• -->
                  <div class="template-questions">
                    <p class="template-questions-title">ã‚ˆãã‚ã‚‹è³ªå•ã‹ã‚‰é¸ã¶ï¼š</p>
                    <div class="template-questions-grid">
                      <button
                        *ngFor="let template of templateQuestions"
                        class="template-question-button"
                        (click)="sendTemplateQuestion(template.question)"
                        [disabled]="isChatLoading"
                      >
                        <span class="template-question-icon">{{ template.icon }}</span>
                        <span class="template-question-text">{{ template.text }}</span>
                      </button>
                    </div>
                  </div>
                </div>
                <div *ngFor="let message of chatMessages" class="chat-message" [class.user-message]="message.role === 'user'" [class.assistant-message]="message.role === 'assistant'">
                  <div class="message-content">
                    <div class="message-role" *ngIf="message.role === 'user'">ã‚ãªãŸ</div>
                    <div class="message-role" *ngIf="message.role === 'assistant'">AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</div>
                    <div class="message-text">{{ message.content }}</div>
                    <!-- ç”³è«‹ãƒœã‚¿ãƒ³ï¼ˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®å¿œç­”ã§ç”³è«‹ã‚¿ã‚¤ãƒ—ãŒã‚ã‚‹å ´åˆï¼‰ -->
                    <div *ngIf="message.role === 'assistant' && message.applicationType" class="application-button-container">
                      <button
                        class="application-action-button"
                        (click)="openApplicationFromChat(message.applicationType!)"
                        [disabled]="!isOnboardingCompleted && message.applicationType !== 'å…¥ç¤¾æ™‚ç”³è«‹'"
                        [title]="!isOnboardingCompleted && message.applicationType !== 'å…¥ç¤¾æ™‚ç”³è«‹' ? 'å…¥ç¤¾å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§åˆ©ç”¨ã§ãã¾ã›ã‚“' : ''"
                      >
                        <span class="application-action-icon">ğŸ“</span>
                        <span class="application-action-text">{{ message.applicationType }}ã‚’é–‹ã</span>
                      </button>
                    </div>
                    <div class="message-time" *ngIf="message.timestamp">
                      {{ message.timestamp | date:'HH:mm' }}
                    </div>
                  </div>
                </div>
                <div *ngIf="isChatLoading" class="chat-message assistant-message">
                  <div class="message-content">
                    <div class="message-role">AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</div>
                    <div class="message-text loading">
                      <span class="loading-dot"></span>
                      <span class="loading-dot"></span>
                      <span class="loading-dot"></span>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢ -->
              <div class="chat-input-container">
                <div class="chat-input-wrapper">
                  <textarea
                    #chatInput
                    [(ngModel)]="chatInputMessage"
                    (keydown)="onChatInputKeydown($event)"
                    placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆEnterã§é€ä¿¡ã€Shift+Enterã§æ”¹è¡Œï¼‰"
                    class="chat-input"
                    rows="1"
                    [disabled]="isChatLoading"
                  ></textarea>
                  <div class="chat-actions">
                    <button
                      (click)="sendChatMessage()"
                      [disabled]="!chatInputMessage.trim() || isChatLoading"
                      class="chat-send-button"
                    >
                      é€ä¿¡
                    </button>
                    <button
                      (click)="clearChat()"
                      [disabled]="chatMessages.length === 0"
                      class="chat-clear-button"
                    >
                      ã‚¯ãƒªã‚¢
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- ãã®ä»–ã®ãƒšãƒ¼ã‚¸ -->
        <ng-container *ngIf="currentTab !== 'æƒ…å ±ç…§ä¼š' && currentTab !== 'å„ç¨®ç”³è«‹' && currentTab !== 'ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸' && currentTab !== 'ä¿é™ºãƒ»æ‰¶é¤Š' && currentTab !== 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´' && currentTab !== 'ãƒŠãƒ¬ãƒƒã‚¸'">
        </ng-container>
      </div>
    </main>
  </div>
</div>

<!-- å…¥ç¤¾æ™‚ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'å…¥ç¤¾æ™‚ç”³è«‹'">
  <div class="modal-content" [class.form-disabled]="isSubmittingOnboardingApplication">
    <div class="modal-header">
      <h2 class="modal-title">å…¥ç¤¾æ™‚ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()" [disabled]="isSubmittingOnboardingApplication" [title]="isSubmittingOnboardingApplication ? 'ç”³è«‹ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''">Ã—</button>
    </div>
    
    <div *ngIf="isSubmittingOnboardingApplication" class="loading-overlay">
      <div class="loading-spinner"></div>
      <p class="loading-message">ç”³è«‹ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„...</p>
    </div>
    
    <form [formGroup]="onboardingApplicationForm" (ngSubmit)="submitOnboardingApplication()" class="application-form">
      <!-- åŸºæœ¬æƒ…å ±æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-lastName">å§“ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-lastName" 
              formControlName="lastName" 
              class="form-input"
              [readonly]="true"
              style="background: #f5f5f5;"
            >
            <div *ngIf="onboardingApplicationForm.get('lastName')?.invalid && onboardingApplicationForm.get('lastName')?.touched" class="error-message">
              å§“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-firstName">å <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-firstName" 
              formControlName="firstName" 
              class="form-input"
              [readonly]="true"
              style="background: #f5f5f5;"
            >
            <div *ngIf="onboardingApplicationForm.get('firstName')?.invalid && onboardingApplicationForm.get('firstName')?.touched" class="error-message">
              åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-lastNameKana">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-lastNameKana" 
              formControlName="lastNameKana" 
              class="form-input"
              [readonly]="true"
              style="background: #f5f5f5;"
            >
            <div *ngIf="onboardingApplicationForm.get('lastNameKana')?.invalid && onboardingApplicationForm.get('lastNameKana')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('lastNameKana')?.errors?.['required']">
                å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('lastNameKana')?.errors?.['katakana']">
                ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-firstNameKana">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-firstNameKana" 
              formControlName="firstNameKana" 
              class="form-input"
              [readonly]="true"
              style="background: #f5f5f5;"
            >
            <div *ngIf="onboardingApplicationForm.get('firstNameKana')?.invalid && onboardingApplicationForm.get('firstNameKana')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('firstNameKana')?.errors?.['required']">
                åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('firstNameKana')?.errors?.['katakana']">
                ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-birthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
            <input 
              type="date" 
              id="onboarding-birthDate" 
              formControlName="birthDate" 
              class="form-input"
            >
            <div *ngIf="onboardingApplicationForm.get('birthDate')?.invalid && onboardingApplicationForm.get('birthDate')?.touched" class="error-message">
              ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-gender">æˆ¸ç±ä¸Šã®æ€§åˆ¥ <span class="required">*</span></label>
            <select 
              id="onboarding-gender" 
              formControlName="gender" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
            </select>
            <div *ngIf="onboardingApplicationForm.get('gender')?.invalid && onboardingApplicationForm.get('gender')?.touched" class="error-message">
              æ€§åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
            <input 
              type="email" 
              id="onboarding-email" 
              formControlName="email" 
              class="form-input"
              [readonly]="true"
              style="background: #f5f5f5;"
            >
            <div *ngIf="onboardingApplicationForm.get('email')?.invalid && onboardingApplicationForm.get('email')?.touched" class="error-message">
              æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width">
            <label for="onboarding-idDocument">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-idDocument" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'idDocument')"
            >
            <div *ngIf="idDocumentFile" class="file-name">{{ idDocumentFile.name }}</div>
          </div>
        </div>
      </section>

      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ï¼ˆä»»æ„ï¼‰</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <div class="my-number-container">
              <div class="my-number-inputs">
                <input 
                  type="text" 
                  id="onboarding-myNumberPart1" 
                  formControlName="myNumberPart1" 
                  class="form-input my-number-part"
                  maxlength="4"
                  placeholder="0000"
                  (input)="onMyNumberInput($event, 'myNumberPart1')"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="onboarding-myNumberPart2" 
                  formControlName="myNumberPart2" 
                  class="form-input my-number-part"
                  maxlength="4"
                  placeholder="0000"
                  (input)="onMyNumberInput($event, 'myNumberPart2')"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="onboarding-myNumberPart3" 
                  formControlName="myNumberPart3" 
                  class="form-input my-number-part"
                  maxlength="4"
                  placeholder="0000"
                  (input)="onMyNumberInput($event, 'myNumberPart3')"
                >
              </div>
            </div>
          </div>
          <div class="form-group full-width">
            <label for="onboardingMyNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboardingMyNumberCard" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'myNumberCard')"
            >
            <div *ngIf="myNumberCardFile" class="file-name">{{ myNumberCardFile.name }}</div>
          </div>
        </div>
      </section>

      <!-- ç¾ä½æ‰€ã¨é€£çµ¡å…ˆæ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="isOverseasResident"
                (change)="onOverseasResidentChange($event)"
              >
              æµ·å¤–ã«åœ¨ä½
            </label>
          </div>
          <div class="form-group" *ngIf="!onboardingApplicationForm.get('isOverseasResident')?.value">
            <label for="onboarding-postalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-postalCode" 
              formControlName="postalCode" 
              class="form-input"
              maxlength="7"
              (input)="formatPostalCode($event)"
              placeholder="1234567"
            >
            <div *ngIf="onboardingApplicationForm.get('postalCode')?.invalid && onboardingApplicationForm.get('postalCode')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('postalCode')?.errors?.['pattern']">
                7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingApplicationForm.get('isOverseasResident')?.value">
            <label for="onboarding-currentAddress">ç¾ä½æ‰€ <span class="required">*</span></label>
            <textarea 
              id="onboarding-currentAddress" 
              formControlName="currentAddress" 
              class="form-input" 
              rows="2"
            ></textarea>
            <div *ngIf="onboardingApplicationForm.get('currentAddress')?.invalid && onboardingApplicationForm.get('currentAddress')?.touched" class="error-message">
              ç¾ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingApplicationForm.get('isOverseasResident')?.value">
            <label for="onboarding-currentAddressKana">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <textarea 
              id="onboarding-currentAddressKana" 
              formControlName="currentAddressKana" 
              class="form-input" 
              rows="2"
            ></textarea>
            <div *ngIf="onboardingApplicationForm.get('currentAddressKana')?.invalid && onboardingApplicationForm.get('currentAddressKana')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('currentAddressKana')?.errors?.['required']">
                ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('currentAddressKana')?.errors?.['katakana']">
                ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group full-width" *ngIf="onboardingApplicationForm.get('isOverseasResident')?.value">
            <label for="onboarding-overseasAddress">ä½æ‰€ <span class="required">*</span></label>
            <textarea 
              id="onboarding-overseasAddress" 
              formControlName="overseasAddress" 
              class="form-input" 
              rows="2"
              placeholder="æµ·å¤–ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
            ></textarea>
            <div *ngIf="onboardingApplicationForm.get('overseasAddress')?.invalid && onboardingApplicationForm.get('overseasAddress')?.touched" class="error-message">
              ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-phoneNumber">é›»è©±ç•ªå·ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰ <span class="required">*</span></label>
            <input 
              type="tel" 
              id="onboarding-phoneNumber" 
              formControlName="phoneNumber" 
              class="form-input"
              maxlength="11"
              (input)="formatPhoneNumber($event)"
            >
            <div *ngIf="onboardingApplicationForm.get('phoneNumber')?.invalid && onboardingApplicationForm.get('phoneNumber')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('phoneNumber')?.errors?.['required']">
                é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('phoneNumber')?.errors?.['pattern']">
                æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€å¤§11æ¡ï¼‰
              </span>
            </div>
          </div>
        </div>
      </section>

      <!-- ä½æ°‘ç¥¨ä½æ‰€æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ä½æ°‘ç¥¨ä½æ‰€</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="skipResidentAddress"
                [disabled]="onboardingApplicationForm.get('isOverseasResident')?.value"
                (change)="onSkipResidentAddressChange($event)"
              >
              ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„
            </label>
          </div>
          <div class="form-group full-width" *ngIf="onboardingApplicationForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentAddressSkipReason">ç†ç”± <span class="required">*</span></label>
            <select 
              id="onboarding-residentAddressSkipReason" 
              formControlName="residentAddressSkipReason" 
              class="form-input"
              (change)="onResidentAddressSkipReasonChange($event)"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="æµ·å¤–åœ¨ä½">æµ·å¤–åœ¨ä½</option>
              <option value="çŸ­æœŸç•™å­¦">çŸ­æœŸç•™å­¦</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="onboardingApplicationForm.get('residentAddressSkipReason')?.invalid && onboardingApplicationForm.get('residentAddressSkipReason')?.touched" class="error-message">
              ç†ç”±ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="onboardingApplicationForm.get('skipResidentAddress')?.value && onboardingApplicationForm.get('residentAddressSkipReason')?.value === 'ãã®ä»–'">
            <label for="onboarding-residentAddressSkipReasonOther">ç†ç”±ï¼ˆãã®ä»–ï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-residentAddressSkipReasonOther" 
              formControlName="residentAddressSkipReasonOther" 
              class="form-input"
              placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
            >
            <div *ngIf="onboardingApplicationForm.get('residentAddressSkipReasonOther')?.invalid && onboardingApplicationForm.get('residentAddressSkipReasonOther')?.touched" class="error-message">
              ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingApplicationForm.get('skipResidentAddress')?.value">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="sameAsCurrentAddress"
                (change)="onOnboardingSameAddressChange($event)"
              >
              ä½æ‰€ï¼ˆç¾ä½æ‰€ã¨åŒã˜ï¼‰
            </label>
          </div>
          <div class="form-group" *ngIf="!onboardingApplicationForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentPostalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
            <input 
              type="text" 
              id="onboarding-residentPostalCode" 
              formControlName="residentPostalCode" 
              class="form-input"
              maxlength="7"
              (input)="formatResidentPostalCode($event)"
              placeholder="1234567"
              [readonly]="onboardingApplicationForm.get('sameAsCurrentAddress')?.value"
            >
            <div *ngIf="onboardingApplicationForm.get('residentPostalCode')?.invalid && onboardingApplicationForm.get('residentPostalCode')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('residentPostalCode')?.errors?.['required']">
                éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('residentPostalCode')?.errors?.['pattern']">
                7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingApplicationForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentAddress">ä½æ‰€ <span class="required">*</span></label>
            <textarea 
              id="onboarding-residentAddress" 
              formControlName="residentAddress" 
              class="form-input" 
              rows="2"
              [readonly]="onboardingApplicationForm.get('sameAsCurrentAddress')?.value"
            ></textarea>
            <div *ngIf="onboardingApplicationForm.get('residentAddress')?.invalid && onboardingApplicationForm.get('residentAddress')?.touched" class="error-message">
              ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!onboardingApplicationForm.get('skipResidentAddress')?.value">
            <label for="onboarding-residentAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <textarea 
              id="onboarding-residentAddressKana" 
              formControlName="residentAddressKana" 
              class="form-input" 
              rows="2"
              [readonly]="onboardingApplicationForm.get('sameAsCurrentAddress')?.value"
            ></textarea>
            <div *ngIf="onboardingApplicationForm.get('residentAddressKana')?.invalid && onboardingApplicationForm.get('residentAddressKana')?.touched" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('residentAddressKana')?.errors?.['required']">
                ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('residentAddressKana')?.errors?.['katakana']">
                ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
        </div>
      </section>

      <!-- å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="onboarding-resume">å±¥æ­´æ›¸æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-resume" 
              class="form-input"
              accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'onboardingResume')"
            >
            <div *ngIf="resumeFile" class="file-name">{{ resumeFile.name }}</div>
          </div>
          <div class="form-group full-width">
            <label for="onboarding-careerHistory">è·å‹™çµŒæ­´æ›¸æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-careerHistory" 
              class="form-input"
              accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'onboardingCareerHistory')"
            >
            <div *ngIf="careerHistoryFile" class="file-name">{{ careerHistoryFile.name }}</div>
          </div>
        </div>
      </section>

      <!-- ç·Šæ€¥é€£çµ¡å…ˆæ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ç·Šæ€¥é€£çµ¡å…ˆ</h3>
        <div formGroupName="emergencyContact" class="nested-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="onboarding-emergencyName">æ°å</label>
              <input 
                type="text" 
                id="onboarding-emergencyName" 
                formControlName="name" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-emergencyNameKana">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
              <input 
                type="text" 
                id="onboarding-emergencyNameKana" 
                formControlName="nameKana" 
                class="form-input"
              >
              <div *ngIf="onboardingApplicationForm.get('emergencyContact.nameKana')?.invalid && onboardingApplicationForm.get('emergencyContact.nameKana')?.touched" class="error-message">
                <span *ngIf="onboardingApplicationForm.get('emergencyContact.nameKana')?.errors?.['katakana']">
                  ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
                </span>
              </div>
            </div>
            <div class="form-group">
              <label for="onboarding-emergencyRelationship">ç¶šæŸ„</label>
              <input 
                type="text" 
                id="onboarding-emergencyRelationship" 
                formControlName="relationship" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-emergencyPhone">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·</label>
              <input 
                type="tel" 
                id="onboarding-emergencyPhone" 
                formControlName="phone" 
                class="form-input"
                maxlength="11"
                (input)="formatEmergencyPhoneNumber($event)"
              >
              <div *ngIf="onboardingApplicationForm.get('emergencyContact.phone')?.invalid && onboardingApplicationForm.get('emergencyContact.phone')?.touched" class="error-message">
                <span *ngIf="onboardingApplicationForm.get('emergencyContact.phone')?.errors?.['pattern']">
                  æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€å¤§11æ¡ï¼‰
                </span>
              </div>
            </div>
          </div>
        </div>
        <div formGroupName="emergencyContact" class="nested-form">
          <div class="form-grid">
            <div class="form-group full-width">
              <label for="onboarding-emergencyAddress">ä½æ‰€</label>
              <label class="checkbox-label" style="display: block; margin-bottom: 0.5rem;" *ngIf="!onboardingApplicationForm.get('isOverseasResident')?.value">
                <input 
                  type="checkbox" 
                  formControlName="sameAsCurrentAddressForEmergency"
                  (change)="onSameAsCurrentAddressForEmergencyChange($event)"
                >
                ç¾ä½æ‰€ã¨åŒã˜
              </label>
              <textarea 
                id="onboarding-emergencyAddress" 
                formControlName="address" 
                class="form-input" 
                rows="2"
              ></textarea>
            </div>
            <div class="form-group full-width" *ngIf="!onboardingApplicationForm.get('isOverseasResident')?.value || !onboardingApplicationForm.get('emergencyContact.sameAsCurrentAddressForEmergency')?.value">
              <label for="onboarding-emergencyAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
              <textarea 
                id="onboarding-emergencyAddressKana" 
                formControlName="addressKana" 
                class="form-input" 
                rows="2"
              ></textarea>
              <div *ngIf="onboardingApplicationForm.get('emergencyContact.addressKana')?.invalid && onboardingApplicationForm.get('emergencyContact.addressKana')?.touched" class="error-message">
                <span *ngIf="onboardingApplicationForm.get('emergencyContact.addressKana')?.errors?.['katakana']">
                  ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
                </span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- å£åº§æƒ…å ±æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">å£åº§æƒ…å ±</h3>
        <div formGroupName="bankAccount" class="nested-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="onboarding-bankName">éŠ€è¡Œå</label>
              <input 
                type="text" 
                id="onboarding-bankName" 
                formControlName="bankName" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-accountType">é é‡‘ç¨®åˆ¥</label>
              <select 
                id="onboarding-accountType" 
                formControlName="accountType" 
                class="form-input"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="æ™®é€š">æ™®é€š</option>
                <option value="å½“åº§">å½“åº§</option>
                <option value="è²¯è“„">è²¯è“„</option>
              </select>
            </div>
            <div class="form-group">
              <label for="onboarding-accountHolder">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰</label>
              <input 
                type="text" 
                id="onboarding-accountHolder" 
                formControlName="accountHolder" 
                class="form-input"
              >
              <div *ngIf="onboardingApplicationForm.get('bankAccount.accountHolder')?.invalid && onboardingApplicationForm.get('bankAccount.accountHolder')?.touched" class="error-message">
                <span *ngIf="onboardingApplicationForm.get('bankAccount.accountHolder')?.errors?.['katakana']">
                  ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„
                </span>
              </div>
            </div>
            <div class="form-group">
              <label for="onboarding-branchName">æ”¯åº—å</label>
              <input 
                type="text" 
                id="onboarding-branchName" 
                formControlName="branchName" 
                class="form-input"
              >
            </div>
            <div class="form-group">
              <label for="onboarding-accountNumber">å£åº§ç•ªå·</label>
              <input 
                type="text" 
                id="onboarding-accountNumber" 
                formControlName="accountNumber" 
                class="form-input"
                (input)="formatAccountNumber($event)"
              >
            </div>
          </div>
        </div>
      </section>

      <!-- ç¤¾ä¼šä¿é™ºæ¬„ï¼ˆåŸºç¤å¹´é‡‘ç•ªå·ã€åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ã®ã¿ï¼‰ -->
      <section class="form-section">
        <h3 class="section-title">ç¤¾ä¼šä¿é™º</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-basicPensionNumberPart1">åŸºç¤å¹´é‡‘ç•ªå· <span class="required">*</span></label>
            <div class="basic-pension-number-container">
              <input 
                type="text" 
                id="onboarding-basicPensionNumberPart1" 
                formControlName="basicPensionNumberPart1" 
                class="form-input basic-pension-part"
                maxlength="4"
                placeholder="0000"
                (input)="formatOnboardingBasicPensionNumberInput($event, 1)"
              >
              <span class="basic-pension-separator">-</span>
              <input 
                type="text" 
                id="onboarding-basicPensionNumberPart2" 
                formControlName="basicPensionNumberPart2" 
                class="form-input basic-pension-part"
                maxlength="6"
                placeholder="000000"
                (input)="formatOnboardingBasicPensionNumberInput($event, 2)"
              >
            </div>
            <div *ngIf="(onboardingApplicationForm.get('basicPensionNumberPart1')?.invalid || onboardingApplicationForm.get('basicPensionNumberPart2')?.invalid) && (onboardingApplicationForm.get('basicPensionNumberPart1')?.touched || onboardingApplicationForm.get('basicPensionNumberPart2')?.touched)" class="error-message">
              <span *ngIf="onboardingApplicationForm.get('basicPensionNumberPart1')?.errors?.['required'] || onboardingApplicationForm.get('basicPensionNumberPart2')?.errors?.['required']">
                åŸºç¤å¹´é‡‘ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="onboardingApplicationForm.get('basicPensionNumberPart1')?.errors?.['pattern'] || onboardingApplicationForm.get('basicPensionNumberPart2')?.errors?.['pattern']">
                åŠè§’æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group">
            <label for="onboarding-pensionHistoryStatus">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ <span class="required">*</span></label>
            <select 
              id="onboarding-pensionHistoryStatus" 
              formControlName="pensionHistoryStatus" 
              class="form-input" 
              (change)="onPensionHistoryChange($event)"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option *ngFor="let option of pensionHistoryOptions" [value]="option">{{ option }}</option>
            </select>
            <div *ngIf="onboardingApplicationForm.get('pensionHistoryStatus')?.invalid && onboardingApplicationForm.get('pensionHistoryStatus')?.touched" class="error-message">
              åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width">
            <label for="onboarding-basicPensionNumberDoc">åŸºç¤å¹´é‡‘ç•ªå·ç¢ºèªæ›¸é¡æ·»ä»˜</label>
            <input 
              type="file" 
              id="onboarding-basicPensionNumberDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'basicPensionNumberDoc')"
            >
            <div *ngIf="basicPensionNumberDocFile" class="file-name">{{ basicPensionNumberDocFile.name }}</div>
          </div>
          <div class="form-group full-width" *ngIf="hasPensionHistory">
            <label for="onboarding-pensionHistory">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ï¼ˆè©³ç´°ï¼‰</label>
            <textarea 
              id="onboarding-pensionHistory" 
              formControlName="pensionHistory" 
              class="form-input" 
              rows="4"
            ></textarea>
          </div>
        </div>
      </section>

      <!-- æ‰¶é¤Šè€…æœ‰ç„¡æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">æ‰¶é¤Šè€…æœ‰ç„¡</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="onboarding-dependentStatus">è¢«æ‰¶é¤Šè€… <span class="required">*</span></label>
            <select 
              id="onboarding-dependentStatus" 
              formControlName="dependentStatus" 
              class="form-input"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="æœ‰">æœ‰</option>
              <option value="ç„¡">ç„¡</option>
            </select>
            <div *ngIf="onboardingApplicationForm.get('dependentStatus')?.invalid && onboardingApplicationForm.get('dependentStatus')?.touched" class="error-message">
              è¢«æ‰¶é¤Šè€…ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="qualificationCertificateRequired" 
                  value="å¿…è¦"
                  name="qualificationCertificateRequired"
                >
                å¿…è¦
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="qualificationCertificateRequired" 
                  value="ä¸è¦"
                  name="qualificationCertificateRequired"
                >
                ä¸è¦
              </label>
            </div>
            <div *ngIf="onboardingApplicationForm.get('qualificationCertificateRequired')?.invalid && onboardingApplicationForm.get('qualificationCertificateRequired')?.touched" class="error-message">
              è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- å¹´é‡‘åŸºé‡‘åŠ å…¥æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">å¹´é‡‘åŸºé‡‘åŠ å…¥</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>å¹´é‡‘åŸºé‡‘ã«åŠ å…¥ã—ã¦ã„ã‚‹ã‹ <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="pensionFundMembership" 
                  value="ã¯ã„"
                  name="pensionFundMembership"
                >
                ã¯ã„
              </label>
              <label class="radio-label">
                <input 
                  type="radio" 
                  formControlName="pensionFundMembership" 
                  value="ã„ã„ãˆ"
                  name="pensionFundMembership"
                >
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="onboardingApplicationForm.get('pensionFundMembership')?.invalid && onboardingApplicationForm.get('pensionFundMembership')?.touched" class="error-message">
              å¹´é‡‘åŸºé‡‘ã«åŠ å…¥ã—ã¦ã„ã‚‹ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>

      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingOnboardingApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="onboardingApplicationForm.invalid || isSubmittingOnboardingApplication">
          {{ isSubmittingOnboardingApplication ? 'ç”³è«‹ä¸­...' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- æ‰¶é¤Šå®¶æ—è¿½åŠ ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'æ‰¶é¤Šå®¶æ—è¿½åŠ '">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">æ‰¶é¤Šå®¶æ—è¿½åŠ ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="dependentApplicationForm" (ngSubmit)="submitDependentApplication()" class="application-form">
      <!-- ç¶šæŸ„æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">ç¶šæŸ„ <span class="required">*</span></h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="relationshipType" value="é…å¶è€…" (change)="onRelationshipTypeChange()">
            é…å¶è€…
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="relationshipType" value="é…å¶è€…ä»¥å¤–" (change)="onRelationshipTypeChange()">
            é…å¶è€…ä»¥å¤–
          </label>
        </div>
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.invalid && dependentApplicationForm.get('relationshipType')?.touched" class="error-message">
          ç¶šæŸ„ã‚’é¸æŠã—ã¦ãã ã•ã„
        </div>
        <!-- é…å¶è€…ã‚’é¸æŠã—ãŸå ´åˆã®ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰ -->
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.value === 'é…å¶è€…'" class="form-group" style="margin-top: 1rem;">
          <label for="spouseType">ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰ <span class="required">*</span></label>
          <select 
            id="spouseType" 
            formControlName="spouseType" 
            class="form-input"
            (change)="onSpouseTypeChange()"
          >
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="å¦»">å¦»</option>
            <option value="å¤«">å¤«</option>
          </select>
          <div *ngIf="dependentApplicationForm.get('spouseType')?.invalid && dependentApplicationForm.get('spouseType')?.touched" class="error-message">
            å¦»ã¾ãŸã¯å¤«ã‚’é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
        <!-- é…å¶è€…ä»¥å¤–ã‚’é¸æŠã—ãŸå ´åˆã®ç¶šæŸ„ -->
        <div *ngIf="dependentApplicationForm.get('relationshipType')?.value === 'é…å¶è€…ä»¥å¤–'" class="form-group" style="margin-top: 1rem;">
          <label for="relationship">ç¶šæŸ„ <span class="required">*</span></label>
          <select 
            id="relationship" 
            formControlName="relationship" 
            class="form-input"
            (change)="onRelationshipChange(); dependentApplicationForm.get('relationship')?.updateValueAndValidity()"
          >
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="å®Ÿå­ãƒ»é¤Šå­">å®Ÿå­ãƒ»é¤Šå­</option>
            <option value="å®Ÿå­ãƒ»é¤Šå­ä»¥å¤–ã®å­">å®Ÿå­ãƒ»é¤Šå­ä»¥å¤–ã®å­</option>
            <option value="çˆ¶æ¯ãƒ»é¤Šçˆ¶æ¯">çˆ¶æ¯ãƒ»é¤Šçˆ¶æ¯</option>
            <option value="ç¾©çˆ¶æ¯">ç¾©çˆ¶æ¯</option>
            <option value="å¼Ÿå¦¹">å¼Ÿå¦¹</option>
            <option value="å…„å§‰">å…„å§‰</option>
            <option value="ç¥–çˆ¶æ¯">ç¥–çˆ¶æ¯</option>
            <option value="æ›½ç¥–çˆ¶æ¯">æ›½ç¥–çˆ¶æ¯</option>
            <option value="å­«">å­«</option>
            <option value="ãã®ä»–">ãã®ä»–</option>
          </select>
          <div *ngIf="dependentApplicationForm.get('relationship')?.invalid && dependentApplicationForm.get('relationship')?.touched" class="error-message">
            ç¶šæŸ„ã‚’é¸æŠã—ã¦ãã ã•ã„
          </div>
          <div *ngIf="dependentApplicationForm.get('relationship')?.value === 'ãã®ä»–'" class="form-group" style="margin-top: 0.5rem;">
            <label for="relationshipOther">ãã®ä»– <span class="required">*</span></label>
            <input type="text" id="relationshipOther" formControlName="relationshipOther" class="form-input">
          </div>
        </div>
      </section>
      
      <!-- é…å¶è€…ã®å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ  -->
      <ng-container *ngIf="dependentApplicationForm.get('relationshipType')?.value === 'é…å¶è€…'">
        
        <!-- æ°å -->
        <section class="form-section">
          <h3 class="section-title">æ°å</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="dependentLastName">å§“ <span class="required">*</span></label>
              <input type="text" id="dependentLastName" formControlName="lastName" class="form-input">
            </div>
            <div class="form-group">
              <label for="dependentFirstName">å <span class="required">*</span></label>
              <input type="text" id="dependentFirstName" formControlName="firstName" class="form-input">
            </div>
            <div class="form-group">
              <label for="dependentLastNameKana">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <input type="text" id="dependentLastNameKana" formControlName="lastNameKana" class="form-input">
            </div>
            <div class="form-group">
              <label for="dependentFirstNameKana">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <input type="text" id="dependentFirstNameKana" formControlName="firstNameKana" class="form-input">
            </div>
          </div>
        </section>
        
        <!-- èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜ -->
        <section class="form-section">
          <h3 class="section-title">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</h3>
          <div class="form-group">
            <label for="dependentIdentityDoc">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</label>
            <input 
              type="file" 
              id="dependentIdentityDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'identityDoc')"
            >
            <div *ngIf="dependentIdentityDocFile" class="file-name">{{ dependentIdentityDocFile.name }}</div>
          </div>
        </section>
        
        <!-- ç”Ÿå¹´æœˆæ—¥ -->
        <section class="form-section">
          <h3 class="section-title">ç”Ÿå¹´æœˆæ—¥</h3>
          <div class="form-group">
            <label for="dependentBirthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
            <input type="date" id="dependentBirthDate" formControlName="birthDate" class="form-input">
          </div>
        </section>
        
        <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
        <section class="form-section">
          <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
          <div class="form-group">
            <label>ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</label>
            <div class="my-number-container">
              <div class="my-number-inputs">
                <input 
                  type="text" 
                  id="dependentMyNumberPart1" 
                  formControlName="myNumberPart1" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 1)"
                  placeholder="0000"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="dependentMyNumberPart2" 
                  formControlName="myNumberPart2" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 2)"
                  placeholder="0000"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="dependentMyNumberPart3" 
                  formControlName="myNumberPart3" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 3)"
                  placeholder="0000"
                >
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="dependentMyNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</label>
            <input 
              type="file" 
              id="dependentMyNumberCard" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'myNumberCard')"
            >
            <div *ngIf="dependentMyNumberCardFile" class="file-name">{{ dependentMyNumberCardFile.name }}</div>
          </div>
        </section>
        
        <!-- åŸºç¤å¹´é‡‘ç•ªå· -->
        <section class="form-section">
          <h3 class="section-title">åŸºç¤å¹´é‡‘ç•ªå·</h3>
          <div class="form-group">
            <label>åŸºç¤å¹´é‡‘ç•ªå· <span class="required">*</span></label>
            <div class="basic-pension-number-container">
              <input 
                type="text" 
                id="dependentBasicPensionNumberPart1" 
                formControlName="basicPensionNumberPart1" 
                class="form-input basic-pension-part"
                maxlength="4"
                (input)="formatDependentBasicPensionNumberInput($event, 1)"
                placeholder="0000"
              >
              <span class="basic-pension-separator">-</span>
              <input 
                type="text" 
                id="dependentBasicPensionNumberPart2" 
                formControlName="basicPensionNumberPart2" 
                class="form-input basic-pension-part"
                maxlength="6"
                (input)="formatDependentBasicPensionNumberInput($event, 2)"
                placeholder="000000"
              >
            </div>
            <div *ngIf="(dependentApplicationForm.get('basicPensionNumberPart1')?.invalid || dependentApplicationForm.get('basicPensionNumberPart2')?.invalid) && (dependentApplicationForm.get('basicPensionNumberPart1')?.touched || dependentApplicationForm.get('basicPensionNumberPart2')?.touched)" class="error-message">
              åŸºç¤å¹´é‡‘ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="dependentBasicPensionNumberDoc">åŸºç¤å¹´é‡‘ç•ªå·æ›¸é¡æ·»ä»˜ <span class="required">*</span></label>
            <input 
              type="file" 
              id="dependentBasicPensionNumberDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'basicPensionNumberDoc')"
            >
            <div *ngIf="dependentBasicPensionNumberDocFile" class="file-name">{{ dependentBasicPensionNumberDocFile.name }}</div>
          </div>
        </section>
        
        <!-- å¤–å›½ç±ã‹ -->
        <section class="form-section">
          <h3 class="section-title">å¤–å›½ç±ã‹</h3>
          <div class="form-group">
            <label>å¤–å›½ç±ã‹ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="isForeignNational" value="ã¯ã„" (change)="onForeignNationalChange()">
                ã¯ã„
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="isForeignNational" value="ã„ã„ãˆ" (change)="onForeignNationalChange()">
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('isForeignNational')?.invalid && dependentApplicationForm.get('isForeignNational')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('isForeignNational')?.value === 'ã¯ã„'" class="form-grid">
            <div class="form-group">
              <label for="nationality">å›½ç± <span class="required">*</span></label>
              <input type="text" id="nationality" formControlName="nationality" class="form-input">
            </div>
            <div class="form-group">
              <label for="aliasName">é€šç§°å <span class="required">*</span></label>
              <input type="text" id="aliasName" formControlName="aliasName" class="form-input">
            </div>
          </div>
        </section>
        
        <!-- ä½æ‰€ -->
        <section class="form-section">
          <h3 class="section-title">ä½æ‰€</h3>
          <div class="form-group">
            <label>ä½æ‰€ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="livingTogether" value="åŒå±…" (change)="onLivingTogetherChange()">
                åŒå±…
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="livingTogether" value="åˆ¥å±…" (change)="onLivingTogetherChange()">
                åˆ¥å±…
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('livingTogether')?.invalid && dependentApplicationForm.get('livingTogether')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('livingTogether')?.value === 'åˆ¥å±…'" class="form-grid">
            <div class="form-group">
              <label for="dependentPostalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
              <input 
                type="text" 
                id="dependentPostalCode" 
                formControlName="postalCode" 
                class="form-input" 
                placeholder="ä¾‹: 1234567"
                maxlength="7"
                (input)="formatDependentPostalCode($event)"
              >
            </div>
            <div class="form-group full-width">
              <label for="dependentAddress">ä½æ‰€ <span class="required">*</span></label>
              <textarea id="dependentAddress" formControlName="address" class="form-input" rows="2"></textarea>
            </div>
            <div class="form-group">
              <label for="monthlySupportAmount">æ¯æœˆã®ä»•é€ã‚Šé¡ <span class="required">*</span></label>
              <input type="number" id="monthlySupportAmount" formControlName="monthlySupportAmount" class="form-input" placeholder="å††">
            </div>
            <div class="form-group full-width">
              <label for="supportAmountDoc">ä»•é€ã‚Šé¡è¨¼æ˜æ›¸é¡æ·»ä»˜ <span class="required">*</span></label>
              <input 
                type="file" 
                id="supportAmountDoc" 
                class="form-input"
                accept=".pdf,.jpg,.jpeg,.png"
                (change)="onDependentFileSelected($event, 'supportAmountDoc')"
              >
              <div *ngIf="supportAmountDocFile" class="file-name">{{ supportAmountDocFile.name }}</div>
            </div>
          </div>
        </section>
        
        <!-- é›»è©±ç•ªå· -->
        <section class="form-section">
          <h3 class="section-title">é›»è©±ç•ªå·</h3>
          <div class="form-group">
            <label for="phoneNumberType">é›»è©±ç•ªå·ï¼ˆè‡ªå®…ã€æºå¸¯ã€å‹¤å‹™å…ˆã€ãã®ä»–ï¼‰ <span class="required">*</span></label>
            <select 
              id="phoneNumberType" 
              formControlName="phoneNumberType" 
              class="form-input"
              (change)="onPhoneNumberTypeChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="è‡ªå®…">è‡ªå®…</option>
              <option value="æºå¸¯">æºå¸¯</option>
              <option value="å‹¤å‹™å…ˆ">å‹¤å‹™å…ˆ</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('phoneNumberType')?.invalid && dependentApplicationForm.get('phoneNumberType')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('phoneNumberType')?.value === 'ãã®ä»–'" class="form-group">
            <label for="phoneNumberOther">ãã®ä»– <span class="required">*</span></label>
            <input type="text" id="phoneNumberOther" formControlName="phoneNumberOther" class="form-input">
          </div>
          <div class="form-group">
            <label for="dependentPhoneNumber">é›»è©±ç•ªå· <span class="required">*</span></label>
            <input 
              type="tel" 
              id="dependentPhoneNumber" 
              formControlName="phoneNumber" 
              class="form-input"
              maxlength="11"
              (input)="formatDependentPhoneNumber($event)"
            >
          </div>
        </section>
        
        <!-- è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ -->
        <section class="form-section">
          <h3 class="section-title">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥</h3>
          <div class="form-group">
            <label for="dependentStartDate">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ <span class="required">*</span></label>
            <input type="date" id="dependentStartDate" formControlName="dependentStartDate" class="form-input">
          </div>
        </section>
        
        <!-- ç†ç”± -->
        <section class="form-section">
          <h3 class="section-title">ç†ç”±</h3>
          <div class="form-group">
            <label for="dependentReason">ç†ç”± <span class="required">*</span></label>
            <select 
              id="dependentReason" 
              formControlName="dependentReason" 
              class="form-input"
              (change)="onDependentReasonChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="é…å¶è€…ã®å°±è·">é…å¶è€…ã®å°±è·</option>
              <option value="å©šå§»">å©šå§»</option>
              <option value="é›¢è·">é›¢è·</option>
              <option value="åå…¥æ¸›å°‘">åå…¥æ¸›å°‘</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('dependentReason')?.invalid && dependentApplicationForm.get('dependentReason')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('dependentReason')?.value === 'ãã®ä»–'" class="form-group">
            <label for="dependentReasonOther">ãã®ä»– <span class="required">*</span></label>
            <input type="text" id="dependentReasonOther" formControlName="dependentReasonOther" class="form-input">
          </div>
        </section>
        
        <!-- è·æ¥­ -->
        <section class="form-section">
          <h3 class="section-title">è·æ¥­</h3>
          <div class="form-group">
            <label for="occupation">è·æ¥­ <span class="required">*</span></label>
            <select 
              id="occupation" 
              formControlName="occupation" 
              class="form-input"
              (change)="onOccupationChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ç„¡è·">ç„¡è·</option>
              <option value="ãƒ‘ãƒ¼ãƒˆ">ãƒ‘ãƒ¼ãƒˆ</option>
              <option value="å¹´é‡‘å—çµ¦è€…">å¹´é‡‘å—çµ¦è€…</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('occupation')?.invalid && dependentApplicationForm.get('occupation')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('occupation')?.value === 'ãã®ä»–'" class="form-group">
            <label for="occupationOther">ãã®ä»– <span class="required">*</span></label>
            <input type="text" id="occupationOther" formControlName="occupationOther" class="form-input">
          </div>
        </section>
        
        <!-- å¹´åè¦‹è¾¼ã¿é¡ -->
        <section class="form-section">
          <h3 class="section-title">å¹´åè¦‹è¾¼ã¿é¡</h3>
          <div class="form-group">
            <label for="dependentAnnualIncome">å¹´åè¦‹è¾¼ã¿é¡ <span class="required">*</span></label>
            <input type="number" id="dependentAnnualIncome" formControlName="annualIncome" class="form-input" placeholder="å††">
          </div>
        </section>
        
        <!-- æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ -->
        <section class="form-section">
          <h3 class="section-title">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ</h3>
          <div class="form-group">
            <label>æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="isOverseasResident" value="ã¯ã„" (change)="onDependentOverseasResidentChange()">
                ã¯ã„
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="isOverseasResident" value="ã„ã„ãˆ" (change)="onDependentOverseasResidentChange()">
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.invalid && dependentApplicationForm.get('isOverseasResident')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.value === 'ã¯ã„'" class="form-grid">
            <div class="form-group">
              <label for="overseasSpecialRequirementDate">æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«è©²å½“ã—ãŸæ—¥ <span class="required">*</span></label>
              <input type="date" id="overseasSpecialRequirementDate" formControlName="overseasSpecialRequirementDate" class="form-input">
            </div>
            <div class="form-group">
              <label for="overseasReason">ç†ç”± <span class="required">*</span></label>
              <select 
                id="overseasReason" 
                formControlName="overseasReason" 
                class="form-input"
                (change)="onOverseasReasonChange()"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="ç•™å­¦">ç•™å­¦</option>
                <option value="åŒè¡Œå®¶æ—">åŒè¡Œå®¶æ—</option>
                <option value="ç‰¹å®šæ´»å‹•">ç‰¹å®šæ´»å‹•</option>
                <option value="æµ·å¤–å©šå§»">æµ·å¤–å©šå§»</option>
                <option value="ãã®ä»–">ãã®ä»–</option>
              </select>
            </div>
            <div *ngIf="dependentApplicationForm.get('overseasReason')?.value === 'ãã®ä»–'" class="form-group">
              <label for="overseasReasonOther">ãã®ä»– <span class="required">*</span></label>
              <input type="text" id="overseasReasonOther" formControlName="overseasReasonOther" class="form-input">
            </div>
          </div>
        </section>
        
        <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
        <section class="form-section">
          <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹</h3>
          <div class="form-group">
            <label>è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="needsQualificationConfirmation" value="ã¯ã„" (change)="dependentApplicationForm.get('needsQualificationConfirmation')?.updateValueAndValidity()">
                ã¯ã„
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="needsQualificationConfirmation" value="ã„ã„ãˆ" (change)="dependentApplicationForm.get('needsQualificationConfirmation')?.updateValueAndValidity()">
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('needsQualificationConfirmation')?.invalid && dependentApplicationForm.get('needsQualificationConfirmation')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- é…å¶è€…ä»¥å¤–ã®å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ  -->
      <ng-container *ngIf="dependentApplicationForm.get('relationshipType')?.value === 'é…å¶è€…ä»¥å¤–'">
        <!-- æ°å -->
        <section class="form-section">
          <h3 class="section-title">æ°å</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="dependentLastName">å§“ <span class="required">*</span></label>
              <input type="text" id="dependentLastName" formControlName="lastName" class="form-input">
            </div>
            <div class="form-group">
              <label for="dependentFirstName">å <span class="required">*</span></label>
              <input type="text" id="dependentFirstName" formControlName="firstName" class="form-input">
            </div>
            <div class="form-group">
              <label for="dependentLastNameKana">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <input type="text" id="dependentLastNameKana" formControlName="lastNameKana" class="form-input">
            </div>
            <div class="form-group">
              <label for="dependentFirstNameKana">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
              <input type="text" id="dependentFirstNameKana" formControlName="firstNameKana" class="form-input">
            </div>
          </div>
        </section>
        
        <!-- èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜ -->
        <section class="form-section">
          <h3 class="section-title">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</h3>
          <div class="form-group">
            <label for="dependentIdentityDoc">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</label>
            <input 
              type="file" 
              id="dependentIdentityDoc" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'identityDoc')"
            >
            <div *ngIf="dependentIdentityDocFile" class="file-name">{{ dependentIdentityDocFile.name }}</div>
          </div>
        </section>
        
        <!-- ç”Ÿå¹´æœˆæ—¥ -->
        <section class="form-section">
          <h3 class="section-title">ç”Ÿå¹´æœˆæ—¥</h3>
          <div class="form-group">
            <label for="dependentBirthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
            <input type="date" id="dependentBirthDate" formControlName="birthDate" class="form-input">
          </div>
        </section>
        
        <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
        <section class="form-section">
          <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
          <div class="form-group">
            <label>ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ <span class="required">*</span></label>
            <div class="my-number-container">
              <div class="my-number-inputs">
                <input 
                  type="text" 
                  id="dependentMyNumberPart1" 
                  formControlName="myNumberPart1" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 1)"
                  placeholder="0000"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="dependentMyNumberPart2" 
                  formControlName="myNumberPart2" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 2)"
                  placeholder="0000"
                >
                <span class="my-number-separator">-</span>
                <input 
                  type="text" 
                  id="dependentMyNumberPart3" 
                  formControlName="myNumberPart3" 
                  class="form-input my-number-part"
                  maxlength="4"
                  (input)="formatDependentMyNumberInput($event, 3)"
                  placeholder="0000"
                >
              </div>
            </div>
            <div *ngIf="(dependentApplicationForm.get('myNumberPart1')?.invalid || dependentApplicationForm.get('myNumberPart2')?.invalid || dependentApplicationForm.get('myNumberPart3')?.invalid) && (dependentApplicationForm.get('myNumberPart1')?.touched || dependentApplicationForm.get('myNumberPart2')?.touched || dependentApplicationForm.get('myNumberPart3')?.touched)" class="error-message">
              ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="dependentMyNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜ <span class="required">*</span></label>
            <input 
              type="file" 
              id="dependentMyNumberCard" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onDependentFileSelected($event, 'myNumberCard')"
            >
            <div *ngIf="dependentMyNumberCardFile" class="file-name">{{ dependentMyNumberCardFile.name }}</div>
          </div>
        </section>
        
        <!-- æ€§åˆ¥ -->
        <section class="form-section">
          <h3 class="section-title">æ€§åˆ¥</h3>
          <div class="form-group">
            <label for="dependentGender">æ€§åˆ¥ <span class="required">*</span></label>
            <select id="dependentGender" formControlName="gender" class="form-input">
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ç”·æ€§">ç”·æ€§</option>
              <option value="å¥³æ€§">å¥³æ€§</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('gender')?.invalid && dependentApplicationForm.get('gender')?.touched" class="error-message">
              æ€§åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </section>
        
        <!-- ä½æ‰€ -->
        <section class="form-section">
          <h3 class="section-title">ä½æ‰€</h3>
          <div class="form-group">
            <label>ä½æ‰€ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="livingTogether" value="åŒå±…" (change)="onLivingTogetherChange()">
                åŒå±…
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="livingTogether" value="åˆ¥å±…" (change)="onLivingTogetherChange()">
                åˆ¥å±…
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('livingTogether')?.invalid && dependentApplicationForm.get('livingTogether')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('livingTogether')?.value === 'åˆ¥å±…'" class="form-grid">
            <div class="form-group">
              <label for="dependentPostalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
              <input 
                type="text" 
                id="dependentPostalCode" 
                formControlName="postalCode" 
                class="form-input" 
                placeholder="ä¾‹: 1234567"
                maxlength="7"
                (input)="formatDependentPostalCode($event)"
              >
            </div>
            <div class="form-group full-width">
              <label for="dependentAddress">ä½æ‰€ <span class="required">*</span></label>
              <textarea id="dependentAddress" formControlName="address" class="form-input" rows="2"></textarea>
            </div>
          </div>
        </section>
        
        <!-- æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ -->
        <section class="form-section">
          <h3 class="section-title">æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ</h3>
          <div class="form-group">
            <label>æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="isOverseasResident" value="ã¯ã„" (change)="onDependentOverseasResidentChange()">
                ã¯ã„
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="isOverseasResident" value="ã„ã„ãˆ" (change)="onDependentOverseasResidentChange()">
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.invalid && dependentApplicationForm.get('isOverseasResident')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.value === 'ã¯ã„'" class="form-group">
            <label for="overseasReason">ç†ç”± <span class="required">*</span></label>
            <select 
              id="overseasReason" 
              formControlName="overseasReason" 
              class="form-input"
              (change)="onOverseasReasonChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ç•™å­¦">ç•™å­¦</option>
              <option value="åŒè¡Œå®¶æ—">åŒè¡Œå®¶æ—</option>
              <option value="ç‰¹å®šæ´»å‹•">ç‰¹å®šæ´»å‹•</option>
              <option value="æµ·å¤–å©šå§»">æµ·å¤–å©šå§»</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('overseasReason')?.value === 'ãã®ä»–'" class="form-group">
              <label for="overseasReasonOther">ãã®ä»– <span class="required">*</span></label>
              <input type="text" id="overseasReasonOther" formControlName="overseasReasonOther" class="form-input">
            </div>
          </div>
        </section>
        
        <!-- è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ -->
        <section class="form-section">
          <h3 class="section-title">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥</h3>
          <div class="form-group">
            <label for="dependentStartDate">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ <span class="required">*</span></label>
            <input type="date" id="dependentStartDate" formControlName="dependentStartDate" class="form-input">
          </div>
        </section>
        
        <!-- è·æ¥­ -->
        <section class="form-section">
          <h3 class="section-title">è·æ¥­</h3>
          <div class="form-group">
            <label for="occupation">è·æ¥­ <span class="required">*</span></label>
            <select 
              id="occupation" 
              formControlName="occupation" 
              class="form-input"
              (change)="onOccupationChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ç„¡è·">ç„¡è·</option>
              <option value="ãƒ‘ãƒ¼ãƒˆ">ãƒ‘ãƒ¼ãƒˆ</option>
              <option value="å¹´é‡‘å—çµ¦è€…">å¹´é‡‘å—çµ¦è€…</option>
              <option value="å°ä¸­å­¦ç”Ÿ">å°ä¸­å­¦ç”Ÿ</option>
              <option value="é«˜æ ¡ç”Ÿ">é«˜æ ¡ç”Ÿ</option>
              <option value="å¤§å­¦ç”Ÿ">å¤§å­¦ç”Ÿ</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('occupation')?.invalid && dependentApplicationForm.get('occupation')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('occupation')?.value === 'å¤§å­¦ç”Ÿ'" class="form-group">
            <label for="studentYear">ä½•å¹´ç”Ÿ <span class="required">*</span></label>
            <input type="text" id="studentYear" formControlName="studentYear" class="form-input" placeholder="ä¾‹: 1å¹´ç”Ÿ">
          </div>
          <div *ngIf="dependentApplicationForm.get('occupation')?.value === 'ãã®ä»–'" class="form-group">
            <label for="occupationOther">ãã®ä»– <span class="required">*</span></label>
            <input type="text" id="occupationOther" formControlName="occupationOther" class="form-input">
          </div>
        </section>
        
        <!-- å¹´åè¦‹è¾¼ã¿é¡ -->
        <section class="form-section">
          <h3 class="section-title">å¹´åè¦‹è¾¼ã¿é¡</h3>
          <div class="form-group">
            <label for="dependentAnnualIncome">å¹´åè¦‹è¾¼ã¿é¡ <span class="required">*</span></label>
            <input type="number" id="dependentAnnualIncome" formControlName="annualIncome" class="form-input" placeholder="å††">
          </div>
        </section>
        
        <!-- ç†ç”± -->
        <section class="form-section">
          <h3 class="section-title">ç†ç”±</h3>
          <div class="form-group">
            <label for="dependentReason">ç†ç”± <span class="required">*</span></label>
            <select 
              id="dependentReason" 
              formControlName="dependentReason" 
              class="form-input"
              (change)="onDependentReasonChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="å‡ºç”Ÿ">å‡ºç”Ÿ</option>
              <option value="é›¢è·">é›¢è·</option>
              <option value="åå…¥æ¸›">åå…¥æ¸›</option>
              <option value="åŒå±…">åŒå±…</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentApplicationForm.get('dependentReason')?.invalid && dependentApplicationForm.get('dependentReason')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <div *ngIf="dependentApplicationForm.get('dependentReason')?.value === 'ãã®ä»–'" class="form-group">
            <label for="dependentReasonOther">ãã®ä»– <span class="required">*</span></label>
            <input type="text" id="dependentReasonOther" formControlName="dependentReasonOther" class="form-input">
          </div>
        </section>
        
        <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
        <section class="form-section">
          <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹</h3>
          <div class="form-group">
            <label>è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ <span class="required">*</span></label>
            <div>
              <label class="radio-label">
                <input type="radio" formControlName="needsQualificationConfirmation" value="ã¯ã„" (change)="dependentApplicationForm.get('needsQualificationConfirmation')?.updateValueAndValidity()">
                ã¯ã„
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="needsQualificationConfirmation" value="ã„ã„ãˆ" (change)="dependentApplicationForm.get('needsQualificationConfirmation')?.updateValueAndValidity()">
                ã„ã„ãˆ
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('needsQualificationConfirmation')?.invalid && dependentApplicationForm.get('needsQualificationConfirmation')?.touched" class="error-message">
              é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
        </section>
        
        <!-- é…å¶è€…ã®å¹´å -->
        <section class="form-section">
          <h3 class="section-title">é…å¶è€…ã®å¹´å</h3>
          <div class="form-group">
            <label for="spouseAnnualIncome">é…å¶è€…ã®å¹´å <span class="required">*</span></label>
            <input type="number" id="spouseAnnualIncome" formControlName="spouseAnnualIncome" class="form-input" placeholder="å††">
            <div *ngIf="dependentApplicationForm.get('spouseAnnualIncome')?.invalid && dependentApplicationForm.get('spouseAnnualIncome')?.touched" class="error-message">
              é…å¶è€…ã®å¹´åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingDependentApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="!dependentApplicationForm.valid || isSubmittingDependentApplication">
          {{ isSubmittingDependentApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- æ‰¶é¤Šå‰Šé™¤ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'æ‰¶é¤Šå‰Šé™¤ç”³è«‹'">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">æ‰¶é¤Šå‰Šé™¤ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="dependentRemovalForm" (ngSubmit)="submitDependentRemovalApplication()" class="application-form">
      <!-- æ‰¶é¤Šè€…ã‚’é¸æŠ -->
      <section class="form-section">
        <h3 class="section-title">æ‰¶é¤Šè€…ã‚’é¸æŠ</h3>
        <div class="form-group">
          <label for="dependentId">æ‰¶é¤Šè€… <span class="required">*</span></label>
          <select 
            id="dependentId" 
            formControlName="dependentId" 
            class="form-input"
          >
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option *ngFor="let dependent of dependentsData; let i = index" [value]="i">
              {{ dependent.name || 'ï¼ˆæ°åæœªè¨­å®šï¼‰' }} 
              <span *ngIf="dependent.relationship">ï¼ˆ{{ dependent.relationship }}ï¼‰</span>
            </option>
          </select>
          <div *ngIf="dependentRemovalForm.get('dependentId')?.invalid && dependentRemovalForm.get('dependentId')?.touched" class="error-message">
            æ‰¶é¤Šè€…ã‚’é¸æŠã—ã¦ãã ã•ã„
          </div>
          <div *ngIf="dependentsData.length === 0" class="info-message">
            ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹æ‰¶é¤Šè€…ãŒã„ã¾ã›ã‚“ã€‚
          </div>
        </div>
      </section>
      
      <!-- è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥ -->
      <section class="form-section">
        <h3 class="section-title">è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥</h3>
        <div class="form-group">
          <label for="removalDate">è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="removalDate" 
            formControlName="removalDate" 
            class="form-input"
          >
          <div *ngIf="dependentRemovalForm.get('removalDate')?.invalid && dependentRemovalForm.get('removalDate')?.touched" class="error-message">
            è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- ç†ç”± -->
      <section class="form-section">
        <h3 class="section-title">ç†ç”±</h3>
        <div class="form-group">
          <label for="removalReason">ç†ç”± <span class="required">*</span></label>
          <select 
            id="removalReason" 
            formControlName="removalReason" 
            class="form-input"
            (change)="onRemovalReasonChange()"
          >
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="æ­»äº¡">æ­»äº¡</option>
            <option value="é›¢å©š">é›¢å©š</option>
            <option value="å°±è·ãƒ»åå…¥å¢—åŠ ">å°±è·ãƒ»åå…¥å¢—åŠ </option>
            <option value="75æ­³åˆ°é”">75æ­³åˆ°é”</option>
            <option value="éšœå®³èªå®š">éšœå®³èªå®š</option>
            <option value="ãã®ä»–">ãã®ä»–</option>
          </select>
          <div *ngIf="dependentRemovalForm.get('removalReason')?.invalid && dependentRemovalForm.get('removalReason')?.touched" class="error-message">
            ç†ç”±ã‚’é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
        <!-- æ­»äº¡é¸æŠæ™‚ï¼šæ­»äº¡å¹´æœˆæ—¥ -->
        <div *ngIf="dependentRemovalForm.get('removalReason')?.value === 'æ­»äº¡'" class="form-group">
          <label for="deathDate">æ­»äº¡å¹´æœˆæ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="deathDate" 
            formControlName="deathDate" 
            class="form-input"
          >
          <div *ngIf="dependentRemovalForm.get('deathDate')?.invalid && dependentRemovalForm.get('deathDate')?.touched" class="error-message">
            æ­»äº¡å¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
        <!-- ãã®ä»–é¸æŠæ™‚ï¼šãã®ä»–ã®å…¥åŠ› -->
        <div *ngIf="dependentRemovalForm.get('removalReason')?.value === 'ãã®ä»–'" class="form-group">
          <label for="removalReasonOther">ãã®ä»– <span class="required">*</span></label>
          <input 
            type="text" 
            id="removalReasonOther" 
            formControlName="removalReasonOther" 
            class="form-input"
            placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          >
          <div *ngIf="dependentRemovalForm.get('removalReasonOther')?.invalid && dependentRemovalForm.get('removalReasonOther')?.touched" class="error-message">
            ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸã‹ -->
      <section class="form-section">
        <h3 class="section-title">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸã‹</h3>
        <div class="form-group">
          <label>æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸã‹ <span class="required">*</span></label>
          <div>
            <label class="radio-label">
              <input type="radio" formControlName="isOverseasResident" value="ã¯ã„" (change)="onRemovalOverseasResidentChange()">
              ã¯ã„
            </label>
            <label class="radio-label">
              <input type="radio" formControlName="isOverseasResident" value="ã„ã„ãˆ" (change)="onRemovalOverseasResidentChange()">
              ã„ã„ãˆ
            </label>
          </div>
          <div *ngIf="dependentRemovalForm.get('isOverseasResident')?.invalid && dependentRemovalForm.get('isOverseasResident')?.touched" class="error-message">
            é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
        <!-- ã¯ã„ã®å ´åˆ -->
        <div *ngIf="dependentRemovalForm.get('isOverseasResident')?.value === 'ã¯ã„'" class="form-grid">
          <div class="form-group">
            <label for="overseasNonQualificationDate">æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«éè©²å½“ã¨ãªã£ãŸæ—¥ <span class="required">*</span></label>
            <input 
              type="date" 
              id="overseasNonQualificationDate" 
              formControlName="overseasNonQualificationDate" 
              class="form-input"
            >
            <div *ngIf="dependentRemovalForm.get('overseasNonQualificationDate')?.invalid && dependentRemovalForm.get('overseasNonQualificationDate')?.touched" class="error-message">
              æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«éè©²å½“ã¨ãªã£ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="overseasReason">ç†ç”± <span class="required">*</span></label>
            <select 
              id="overseasReason" 
              formControlName="overseasReason" 
              class="form-input"
              (change)="onRemovalOverseasReasonChange()"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="å›½å†…è»¢å…¥">å›½å†…è»¢å…¥</option>
              <option value="ãã®ä»–">ãã®ä»–</option>
            </select>
            <div *ngIf="dependentRemovalForm.get('overseasReason')?.invalid && dependentRemovalForm.get('overseasReason')?.touched" class="error-message">
              ç†ç”±ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
          </div>
          <!-- å›½å†…è»¢å…¥é¸æŠæ™‚ï¼šè»¢å…¥æ—¥ -->
          <div *ngIf="dependentRemovalForm.get('overseasReason')?.value === 'å›½å†…è»¢å…¥'" class="form-group">
            <label for="transferDate">è»¢å…¥æ—¥ <span class="required">*</span></label>
            <input 
              type="date" 
              id="transferDate" 
              formControlName="transferDate" 
              class="form-input"
            >
            <div *ngIf="dependentRemovalForm.get('transferDate')?.invalid && dependentRemovalForm.get('transferDate')?.touched" class="error-message">
              è»¢å…¥æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <!-- ãã®ä»–é¸æŠæ™‚ï¼šãã®ä»–ã®å…¥åŠ› -->
          <div *ngIf="dependentRemovalForm.get('overseasReason')?.value === 'ãã®ä»–'" class="form-group">
            <label for="overseasReasonOther">ãã®ä»– <span class="required">*</span></label>
            <input 
              type="text" 
              id="overseasReasonOther" 
              formControlName="overseasReasonOther" 
              class="form-input"
              placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
            >
            <div *ngIf="dependentRemovalForm.get('overseasReasonOther')?.invalid && dependentRemovalForm.get('overseasReasonOther')?.touched" class="error-message">
              ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>
      
      <!-- è³‡æ ¼è¨¼æ˜æ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
      <section class="form-section">
        <h3 class="section-title">è³‡æ ¼è¨¼æ˜æ›¸ç™ºè¡ŒãŒå¿…è¦ã‹</h3>
        <div class="form-group">
          <label>è³‡æ ¼è¨¼æ˜æ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ <span class="required">*</span></label>
          <div>
            <label class="radio-label">
              <input type="radio" formControlName="needsQualificationConfirmation" value="ã¯ã„">
              ã¯ã„
            </label>
            <label class="radio-label">
              <input type="radio" formControlName="needsQualificationConfirmation" value="ã„ã„ãˆ">
              ã„ã„ãˆ
            </label>
          </div>
          <div *ngIf="dependentRemovalForm.get('needsQualificationConfirmation')?.invalid && dependentRemovalForm.get('needsQualificationConfirmation')?.touched" class="error-message">
            é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingDependentRemovalApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="dependentRemovalForm.invalid || dependentsData.length === 0 || isSubmittingDependentRemovalApplication">
          {{ isSubmittingDependentRemovalApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- ä½æ‰€å¤‰æ›´ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'ä½æ‰€å¤‰æ›´ç”³è«‹'">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">ä½æ‰€å¤‰æ›´ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="addressChangeForm" (ngSubmit)="submitAddressChangeApplication()" class="application-form">
      <!-- å¼•ã£è¶Šã—ã—ãŸæ—¥ -->
      <section class="form-section">
        <h3 class="section-title">å¼•ã£è¶Šã—ã—ãŸæ—¥</h3>
        <div class="form-group">
          <label for="moveDate">å¼•ã£è¶Šã—ã—ãŸæ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="moveDate" 
            formControlName="moveDate" 
            class="form-input"
          >
          <div *ngIf="addressChangeForm.get('moveDate')?.invalid && addressChangeForm.get('moveDate')?.touched" class="error-message">
            å¼•ã£è¶Šã—ã—ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- æ–°ã—ã„ä½æ‰€æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">æ–°ã—ã„ä½æ‰€</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="isOverseasResident"
                (change)="onAddressChangeOverseasResidentChange($event)"
              >
              æµ·å¤–ã«åœ¨ä½
            </label>
          </div>
          <div class="form-group" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
            <label for="newPostalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
            <input 
              type="text" 
              id="newPostalCode" 
              formControlName="newPostalCode" 
              class="form-input"
              placeholder="1234567"
              maxlength="7"
              pattern="[0-9]{7}"
              (input)="formatAddressPostalCode($event)"
            >
            <div *ngIf="addressChangeForm.get('newPostalCode')?.invalid && addressChangeForm.get('newPostalCode')?.touched" class="error-message">
              <span *ngIf="addressChangeForm.get('newPostalCode')?.errors?.['required']">
                éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
              <span *ngIf="addressChangeForm.get('newPostalCode')?.errors?.['pattern']">
                7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
              </span>
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
            <label for="newAddress">ä½æ‰€ <span class="required">*</span></label>
            <textarea 
              id="newAddress" 
              formControlName="newAddress" 
              class="form-input"
              rows="2"
            ></textarea>
            <div *ngIf="addressChangeForm.get('newAddress')?.invalid && addressChangeForm.get('newAddress')?.touched" class="error-message">
              ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
            <label for="newAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
            <textarea 
              id="newAddressKana" 
              formControlName="newAddressKana" 
              class="form-input"
              rows="2"
            ></textarea>
          </div>
          <div class="form-group full-width" *ngIf="addressChangeForm.get('isOverseasResident')?.value">
            <label for="overseasAddress">æµ·å¤–ä½æ‰€ <span class="required">*</span></label>
            <textarea 
              id="overseasAddress" 
              formControlName="overseasAddress" 
              class="form-input"
              rows="3"
              placeholder="ä¾‹: 15 Ocean Roadã€€Sydney NSW 2000ã€€Australia"
            ></textarea>
            <div *ngIf="addressChangeForm.get('overseasAddress')?.invalid && addressChangeForm.get('overseasAddress')?.touched" class="error-message">
              æµ·å¤–ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>
      
      <!-- æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€æ¬„ -->
      <section class="form-section" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
        <h3 class="section-title">æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€</h3>
        <div class="form-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [checked]="sameAsOldAddress"
              (change)="onSameAsOldAddressChange($event)"
            >
            å¤‰æ›´å‰ä½æ‰€ã¨åŒã˜
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [checked]="sameAsNewAddress"
              (change)="onSameAsNewAddressChange($event)"
            >
            å¤‰æ›´å¾Œã®ä½æ‰€ã¨åŒã˜
          </label>
        </div>
        <div class="form-grid" *ngIf="!sameAsOldAddress && !sameAsNewAddress">
          <div class="form-group">
            <label for="residentPostalCode">éƒµä¾¿ç•ªå·</label>
            <input 
              type="text" 
              id="residentPostalCode" 
              formControlName="residentPostalCode" 
              class="form-input"
              placeholder="1234567"
              maxlength="7"
              pattern="[0-9]{7}"
              (input)="formatResidentPostalCodeForAddressChange($event)"
            >
          </div>
          <div class="form-group full-width">
            <label for="residentAddress">ä½æ‰€</label>
            <textarea 
              id="residentAddress" 
              formControlName="residentAddress" 
              class="form-input"
              rows="2"
            ></textarea>
          </div>
          <div class="form-group full-width">
            <label for="residentAddressKana">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰</label>
            <textarea 
              id="residentAddressKana" 
              formControlName="residentAddressKana" 
              class="form-input"
              rows="2"
            ></textarea>
          </div>
        </div>
      </section>
      
      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingAddressChangeApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="addressChangeForm.invalid || isSubmittingAddressChangeApplication">
          {{ isSubmittingAddressChangeApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- æ°åå¤‰æ›´ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'æ°åå¤‰æ›´ç”³è«‹'">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">æ°åå¤‰æ›´ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="nameChangeForm" (ngSubmit)="submitNameChangeApplication()" class="application-form">
      <!-- æ°åå¤‰æ›´ã—ãŸæ—¥ -->
      <section class="form-section">
        <h3 class="section-title">æ°åå¤‰æ›´ã—ãŸæ—¥</h3>
        <div class="form-group">
          <label for="changeDate">æ°åå¤‰æ›´ã—ãŸæ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="changeDate" 
            formControlName="changeDate" 
            class="form-input"
          >
          <div *ngIf="nameChangeForm.get('changeDate')?.invalid && nameChangeForm.get('changeDate')?.touched" class="error-message">
            æ°åå¤‰æ›´ã—ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- æ–°ã—ã„æ°åæ¬„ -->
      <section class="form-section">
        <h3 class="section-title">æ–°ã—ã„æ°å</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="newLastName">å§“ <span class="required">*</span></label>
            <input 
              type="text" 
              id="newLastName" 
              formControlName="newLastName" 
              class="form-input"
            >
            <div *ngIf="nameChangeForm.get('newLastName')?.invalid && nameChangeForm.get('newLastName')?.touched" class="error-message">
              å§“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="newFirstName">å <span class="required">*</span></label>
            <input 
              type="text" 
              id="newFirstName" 
              formControlName="newFirstName" 
              class="form-input"
            >
            <div *ngIf="nameChangeForm.get('newFirstName')?.invalid && nameChangeForm.get('newFirstName')?.touched" class="error-message">
              åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="newLastNameKana">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="newLastNameKana" 
              formControlName="newLastNameKana" 
              class="form-input"
            >
            <div *ngIf="nameChangeForm.get('newLastNameKana')?.invalid && nameChangeForm.get('newLastNameKana')?.touched" class="error-message">
              å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="newFirstNameKana">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="newFirstNameKana" 
              formControlName="newFirstNameKana" 
              class="form-input"
            >
            <div *ngIf="nameChangeForm.get('newFirstNameKana')?.invalid && nameChangeForm.get('newFirstNameKana')?.touched" class="error-message">
              åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
        </div>
      </section>
      
      <!-- æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜ -->
      <section class="form-section">
        <h3 class="section-title">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜</h3>
        <div class="form-group">
          <label for="nameChangeIdDocument">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜</label>
          <input 
            type="file" 
            id="nameChangeIdDocument" 
            class="form-input"
            accept=".pdf,.jpg,.jpeg,.png"
            (change)="onFileSelected($event, 'nameChangeIdDocument')"
          >
          <div *ngIf="nameChangeIdDocumentFile" class="file-name">{{ nameChangeIdDocumentFile.name }}</div>
        </div>
      </section>
      
      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingNameChangeApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="nameChangeForm.invalid || isSubmittingNameChangeApplication">
          {{ isSubmittingNameChangeApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹'">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="myNumberChangeForm" (ngSubmit)="submitMyNumberChangeApplication()" class="application-form">
      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ -->
      <section class="form-section">
        <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥</h3>
        <div class="form-group">
          <label for="changeDate">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="changeDate" 
            formControlName="changeDate" 
            class="form-input"
          >
          <div *ngIf="myNumberChangeForm.get('changeDate')?.invalid && myNumberChangeForm.get('changeDate')?.touched" class="error-message">
            ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼æ¬„ -->
      <section class="form-section">
        <h3 class="section-title">æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="newMyNumberPart1">1-4æ¡ç›® <span class="required">*</span></label>
            <input 
              type="text" 
              id="newMyNumberPart1" 
              formControlName="newMyNumberPart1" 
              class="form-input"
              maxlength="4"
              pattern="[0-9]*"
              inputmode="numeric"
            >
            <div *ngIf="myNumberChangeForm.get('newMyNumberPart1')?.invalid && myNumberChangeForm.get('newMyNumberPart1')?.touched" class="error-message">
              4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="newMyNumberPart2">5-8æ¡ç›® <span class="required">*</span></label>
            <input 
              type="text" 
              id="newMyNumberPart2" 
              formControlName="newMyNumberPart2" 
              class="form-input"
              maxlength="4"
              pattern="[0-9]*"
              inputmode="numeric"
            >
            <div *ngIf="myNumberChangeForm.get('newMyNumberPart2')?.invalid && myNumberChangeForm.get('newMyNumberPart2')?.touched" class="error-message">
              4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group">
            <label for="newMyNumberPart3">9-12æ¡ç›® <span class="required">*</span></label>
            <input 
              type="text" 
              id="newMyNumberPart3" 
              formControlName="newMyNumberPart3" 
              class="form-input"
              maxlength="4"
              pattern="[0-9]*"
              inputmode="numeric"
            >
            <div *ngIf="myNumberChangeForm.get('newMyNumberPart3')?.invalid && myNumberChangeForm.get('newMyNumberPart3')?.touched" class="error-message">
              4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
          </div>
          <div class="form-group full-width">
            <label for="myNumberChangeCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</label>
            <input 
              type="file" 
              id="myNumberChangeCard" 
              class="form-input"
              accept=".pdf,.jpg,.jpeg,.png"
              (change)="onFileSelected($event, 'myNumberChangeCard')"
            >
            <div *ngIf="myNumberChangeCardFile" class="file-name">{{ myNumberChangeCardFile.name }}</div>
          </div>
        </div>
      </section>
      
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingMyNumberChangeApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="myNumberChangeForm.invalid || isSubmittingMyNumberChangeApplication">
          {{ isSubmittingMyNumberChangeApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹'">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="maternityLeaveForm" (ngSubmit)="submitMaternityLeaveApplication()" class="application-form">
      <!-- å‡ºç”£äºˆå®šæ—¥ -->
      <section class="form-section">
        <h3 class="section-title">å‡ºç”£äºˆå®šæ—¥</h3>
        <div class="form-group">
          <label for="expectedDeliveryDate">å‡ºç”£äºˆå®šæ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="expectedDeliveryDate" 
            formControlName="expectedDeliveryDate" 
            class="form-input"
          >
          <div *ngIf="maternityLeaveForm.get('expectedDeliveryDate')?.invalid && maternityLeaveForm.get('expectedDeliveryDate')?.touched" class="error-message">
            å‡ºç”£äºˆå®šæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- åŒå­ä»¥ä¸Šã‹ -->
      <section class="form-section">
        <h3 class="section-title">åŒå­ä»¥ä¸Šã‹ <span class="required">*</span></h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="isMultipleBirth" value="ã¯ã„">
            ã¯ã„
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="isMultipleBirth" value="ã„ã„ãˆ">
            ã„ã„ãˆ
          </label>
          <div *ngIf="maternityLeaveForm.get('isMultipleBirth')?.invalid && maternityLeaveForm.get('isMultipleBirth')?.touched" class="error-message">
            é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“ -->
      <section class="form-section">
        <h3 class="section-title">ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="maternityLeaveStartDate">ç”£å‰ç”£å¾Œä¼‘æ¥­é–‹å§‹æ—¥</label>
            <input 
              type="date" 
              id="maternityLeaveStartDate" 
              formControlName="maternityLeaveStartDate" 
              class="form-input"
              [disabled]="!maternityLeaveForm.get('expectedDeliveryDate')?.value"
            >
            <small class="form-hint" *ngIf="!maternityLeaveForm.get('expectedDeliveryDate')?.value">
              å‡ºç”£äºˆå®šæ—¥ã‚’å…¥åŠ›ã™ã‚‹ã¨è‡ªå‹•ã§è¨­å®šã•ã‚Œã¾ã™
            </small>
          </div>
          <div class="form-group">
            <label for="maternityLeaveEndDate">ç”£å‰ç”£å¾Œä¼‘æ¥­çµ‚äº†æ—¥</label>
            <input 
              type="date" 
              id="maternityLeaveEndDate" 
              formControlName="maternityLeaveEndDate" 
              class="form-input"
              [disabled]="!maternityLeaveForm.get('expectedDeliveryDate')?.value"
            >
            <small class="form-hint" *ngIf="!maternityLeaveForm.get('expectedDeliveryDate')?.value">
              å‡ºç”£äºˆå®šæ—¥ã‚’å…¥åŠ›ã™ã‚‹ã¨è‡ªå‹•ã§è¨­å®šã•ã‚Œã¾ã™
            </small>
          </div>
        </div>
      </section>
      
      <!-- ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ -->
      <section class="form-section">
        <h3 class="section-title">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ</h3>
        <div class="form-group">
          <label for="stayAddress">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆï¼ˆç¾ä½æ‰€ã¨ç•°ãªã‚‹å ´åˆï¼‰</label>
          <textarea 
            id="stayAddress" 
            formControlName="stayAddress" 
            class="form-input"
            rows="3"
            placeholder="ç¾ä½æ‰€ã¨ç•°ãªã‚‹å ´åˆã®ã¿å…¥åŠ›ã—ã¦ãã ã•ã„"
          ></textarea>
        </div>
      </section>
      
      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingMaternityLeaveApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="maternityLeaveForm.invalid || isSubmittingMaternityLeaveApplication">
          {{ isSubmittingMaternityLeaveApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- é€€è·ç”³è«‹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" *ngIf="showApplicationModal && currentApplicationType === 'é€€è·ç”³è«‹'">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">é€€è·ç”³è«‹</h2>
      <button class="modal-close-button" (click)="closeApplicationModal()">Ã—</button>
    </div>
    
    <form [formGroup]="resignationForm" (ngSubmit)="submitResignationApplication()" class="application-form">
      <!-- é€€è·æ—¥ -->
      <section class="form-section">
        <h3 class="section-title">é€€è·æ—¥</h3>
        <div class="form-group">
          <label for="resignationDate">é€€è·æ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="resignationDate" 
            formControlName="resignationDate" 
            class="form-input"
            [min]="minResignationDate"
          >
          <div *ngIf="resignationForm.get('resignationDate')?.invalid && resignationForm.get('resignationDate')?.touched" class="error-message">
            <span *ngIf="resignationForm.get('resignationDate')?.errors?.['required']">é€€è·æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
            <span *ngIf="resignationForm.get('resignationDate')?.errors?.['pastDate']">é€€è·æ—¥ã¯å…¥ç¤¾æ—¥ä»¥é™ã®æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
          </div>
        </div>
      </section>
      
      <!-- æœ€çµ‚å‡ºç¤¾æ—¥ -->
      <section class="form-section">
        <h3 class="section-title">æœ€çµ‚å‡ºç¤¾æ—¥</h3>
        <div class="form-group">
          <label for="lastWorkDate">æœ€çµ‚å‡ºç¤¾æ—¥ <span class="required">*</span></label>
          <input 
            type="date" 
            id="lastWorkDate" 
            formControlName="lastWorkDate" 
            class="form-input"
            [max]="maxLastWorkDate"
          >
          <div *ngIf="resignationForm.get('lastWorkDate')?.invalid && resignationForm.get('lastWorkDate')?.touched" class="error-message">
            <span *ngIf="resignationForm.get('lastWorkDate')?.errors?.['required']">æœ€çµ‚å‡ºç¤¾æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
            <span *ngIf="resignationForm.get('lastWorkDate')?.errors?.['lastWorkDateAfterResignation']">æœ€çµ‚å‡ºç¤¾æ—¥ã¯é€€è·æ—¥å½“æ—¥ä»¥å‰ã®æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
          </div>
        </div>
      </section>
      
      <!-- é€€è·ç†ç”± -->
      <section class="form-section">
        <h3 class="section-title">é€€è·ç†ç”±</h3>
        <div class="form-group">
          <label for="resignationReason">é€€è·ç†ç”± <span class="required">*</span></label>
          <textarea 
            id="resignationReason" 
            formControlName="resignationReason" 
            class="form-input"
            rows="4"
            placeholder="é€€è·ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          ></textarea>
          <div *ngIf="resignationForm.get('resignationReason')?.invalid && resignationForm.get('resignationReason')?.touched" class="error-message">
            é€€è·ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- é›¢è·ç¥¨ã®ç™ºè¡Œã«ã¤ã„ã¦ -->
      <section class="form-section">
        <h3 class="section-title">é›¢è·ç¥¨ã®ç™ºè¡Œã«ã¤ã„ã¦</h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="separationNotice" value="ç™ºè¡Œã‚’å¸Œæœ›ã™ã‚‹">
            ç™ºè¡Œã‚’å¸Œæœ›ã™ã‚‹
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="separationNotice" value="ç™ºè¡Œã‚’å¸Œæœ›ã—ãªã„">
            ç™ºè¡Œã‚’å¸Œæœ›ã—ãªã„
          </label>
          <div *ngIf="resignationForm.get('separationNotice')?.invalid && resignationForm.get('separationNotice')?.touched" class="error-message">
            é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- é€€è·å¾Œã®ä½æ‰€ -->
      <section class="form-section">
        <h3 class="section-title">é€€è·å¾Œã®ä½æ‰€</h3>
        <div class="form-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [checked]="sameAsCurrentAddressForResignation"
              (change)="onSameAsCurrentAddressForResignationChange($event)"
            >
            å¤‰æ›´ãªã—ï¼ˆç¾åœ¨ã®ä½æ‰€ã‚’ä½¿ç”¨ï¼‰
          </label>
        </div>
        <div class="form-group">
          <label for="postResignationAddress">é€€è·å¾Œã®ä½æ‰€ <span class="required" *ngIf="!sameAsCurrentAddressForResignation">*</span></label>
          <textarea 
            id="postResignationAddress" 
            formControlName="postResignationAddress" 
            class="form-input"
            rows="3"
          ></textarea>
          <div *ngIf="!sameAsCurrentAddressForResignation && resignationForm.get('postResignationAddress')?.invalid && resignationForm.get('postResignationAddress')?.touched" class="error-message">
            é€€è·å¾Œã®ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- é€€è·å¾Œã®é›»è©±ç•ªå· -->
      <section class="form-section">
        <h3 class="section-title">é€€è·å¾Œã®é›»è©±ç•ªå·</h3>
        <div class="form-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [checked]="sameAsCurrentPhoneForResignation"
              (change)="onSameAsCurrentPhoneForResignationChange($event)"
            >
            å¤‰æ›´ãªã—ï¼ˆç¾åœ¨ã®é›»è©±ç•ªå·ã‚’ä½¿ç”¨ï¼‰
          </label>
        </div>
        <div class="form-group">
          <label for="postResignationPhone">é€€è·å¾Œã®é›»è©±ç•ªå· <span class="required" *ngIf="!sameAsCurrentPhoneForResignation">*</span></label>
          <input 
            type="tel" 
            id="postResignationPhone" 
            formControlName="postResignationPhone" 
            class="form-input"
          >
          <div *ngIf="!sameAsCurrentPhoneForResignation && resignationForm.get('postResignationPhone')?.invalid && resignationForm.get('postResignationPhone')?.touched" class="error-message">
            é€€è·å¾Œã®é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ -->
      <section class="form-section">
        <h3 class="section-title">é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</h3>
        <div class="form-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [checked]="sameAsCurrentEmailForResignation"
              (change)="onSameAsCurrentEmailForResignationChange($event)"
            >
            å¤‰æ›´ãªã—ï¼ˆç¾åœ¨ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ç”¨ï¼‰
          </label>
        </div>
        <div class="form-group">
          <label for="postResignationEmail">é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required" *ngIf="!sameAsCurrentEmailForResignation">*</span></label>
          <input 
            type="email" 
            id="postResignationEmail" 
            formControlName="postResignationEmail" 
            class="form-input"
          >
          <div *ngIf="!sameAsCurrentEmailForResignation && resignationForm.get('postResignationEmail')?.invalid && resignationForm.get('postResignationEmail')?.touched" class="error-message">
            <span *ngIf="resignationForm.get('postResignationEmail')?.errors?.['required']">é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
            <span *ngIf="resignationForm.get('postResignationEmail')?.errors?.['email']">æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
          </div>
        </div>
      </section>
      
      <!-- é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ -->
      <section class="form-section">
        <h3 class="section-title">é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ <span class="required">*</span></h3>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" formControlName="postResignationInsurance" value="ç¤¾ä¼šä¿é™ºã‚’ä»»æ„ç¶™ç¶šã™ã‚‹">
            ç¤¾ä¼šä¿é™ºã‚’ä»»æ„ç¶™ç¶šã™ã‚‹
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="postResignationInsurance" value="å›½æ°‘å¥åº·ä¿é™ºã«åŠ å…¥ã™ã‚‹">
            å›½æ°‘å¥åº·ä¿é™ºã«åŠ å…¥ã™ã‚‹
          </label>
          <label class="radio-label">
            <input type="radio" formControlName="postResignationInsurance" value="ä»–ç¤¾ã§ç¤¾ä¼šä¿é™ºã«åŠ å…¥ã™ã‚‹">
            ä»–ç¤¾ã§ç¤¾ä¼šä¿é™ºã«åŠ å…¥ã™ã‚‹
          </label>
          <div *ngIf="resignationForm.get('postResignationInsurance')?.invalid && resignationForm.get('postResignationInsurance')?.touched" class="error-message">
            é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ã‚’é¸æŠã—ã¦ãã ã•ã„
          </div>
        </div>
      </section>
      
      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeApplicationModal()" [disabled]="isSubmittingResignationApplication">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button type="submit" class="submit-button" [disabled]="resignationForm.invalid || isSubmittingResignationApplication">
          {{ isSubmittingResignationApplication ? 'ç”³è«‹ä¸­ã§ã™' : 'ç”³è«‹' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- ç”³è«‹è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div 
  class="modal-overlay" 
  *ngIf="showApplicationDetailModal" 
  [class.modal-disabled]="isSubmittingReapplication"
>
  <div class="modal-content application-detail-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">ç”³è«‹è©³ç´°</h2>
      <button 
        class="modal-close-button" 
        (click)="closeApplicationDetailModal()"
        [disabled]="isSubmittingReapplication"
        [title]="isSubmittingReapplication ? 'å‡¦ç†ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''"
      >Ã—</button>
    </div>
    
    <div class="application-detail-content" *ngIf="selectedApplication">
      <!-- ç”³è«‹åŸºæœ¬æƒ…å ± -->
      <section class="detail-section">
        <h3 class="section-title">ç”³è«‹åŸºæœ¬æƒ…å ±</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹ID:</span>
            <span class="detail-value">{{ selectedApplication.applicationId }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹ç¨®é¡:</span>
            <span class="detail-value">{{ selectedApplication.applicationType }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</span>
            <span class="detail-value">
              <span class="status-badge" 
                    [class.status-pending]="selectedApplication.status === 'æ‰¿èªå¾…ã¡'"
                    [class.status-approved]="selectedApplication.status === 'æ‰¿èª' || selectedApplication.status === 'æ‰¿èªæ¸ˆã¿'"
                    [class.status-submitted]="selectedApplication.status === 'ç”³è«‹æ¸ˆã¿'"
                    [class.status-rejected]="selectedApplication.status === 'å´ä¸‹' || selectedApplication.status === 'å·®ã—æˆ»ã—'"
                    [class.status-resubmitted]="selectedApplication.status === 'å†ç”³è«‹' || selectedApplication.status === 'å†æå‡º'"
                    [class.status-cancelled]="selectedApplication.status === 'å–ã‚Šæ¶ˆã—'">
                {{ selectedApplication.status }}
              </span>
            </span>
          </div>
          <div class="detail-item full-width" *ngIf="selectedApplication.status === 'å·®ã—æˆ»ã—' && selectedApplication.statusComment">
            <span class="detail-label">å·®ã—æˆ»ã—ã‚³ãƒ¡ãƒ³ãƒˆ:</span>
            <span class="detail-value">{{ selectedApplication.statusComment }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ç”³è«‹æ—¥:</span>
            <span class="detail-value">{{ getApplicationDate(selectedApplication) | date:'yyyyå¹´MMæœˆddæ—¥' }}</span>
          </div>
        </div>
      </section>
      
      <!-- å·®ã—æˆ»ã—ã®å ´åˆã®ä¿®æ­£ãƒ»å†ç”³è«‹ãƒœã‚¿ãƒ³ -->
      <div class="reapplication-actions" *ngIf="selectedApplication.status === 'å·®ã—æˆ»ã—'">
        <button 
          type="button" 
          class="edit-button" 
          (click)="enableEditMode()"
          *ngIf="!isEditModeForReapplication"
          [disabled]="isSubmittingReapplication"
          [title]="isSubmittingReapplication ? 'å‡¦ç†ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''"
        >
          ä¿®æ­£
        </button>
        <button 
          type="button" 
          class="resubmit-button" 
          (click)="submitReapplication()"
          *ngIf="isEditModeForReapplication"
          [disabled]="isSubmittingReapplication"
          [title]="isSubmittingReapplication ? 'å‡¦ç†ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''"
        >
          {{ isSubmittingReapplication ? 'é€ä¿¡ä¸­...' : 'å†ç”³è«‹' }}
        </button>
      </div>
      
      <!-- æ‰¶é¤Šå®¶æ—è¿½åŠ ç”³è«‹ã®è©³ç´°ï¼ˆè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ï¼‰ -->
      <ng-container *ngIf="selectedApplication.applicationType === 'æ‰¶é¤Šå®¶æ—è¿½åŠ '">
        <form [formGroup]="dependentApplicationForm" (ngSubmit)="submitReapplication()" *ngIf="dependentApplicationForm" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
        <!-- ç¶šæŸ„æ¬„ -->
        <section class="detail-section">
          <h3 class="section-title">ç¶šæŸ„ <span class="required" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">*</span></h3>
          <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
          <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
            <div class="detail-item">
              <span class="detail-label">ç¶šæŸ„ç¨®åˆ¥:</span>
              <span class="detail-value">{{ selectedApplication.relationshipType || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === 'é…å¶è€…'">
              <span class="detail-label">ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.spouseType || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === 'é…å¶è€…ä»¥å¤–'">
              <span class="detail-label">ç¶šæŸ„:</span>
              <span class="detail-value">{{ selectedApplication.relationship || '-' }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedApplication.relationshipType === 'é…å¶è€…ä»¥å¤–' && selectedApplication.relationship === 'ãã®ä»–'">
              <span class="detail-label">ãã®ä»–:</span>
              <span class="detail-value">{{ selectedApplication.relationshipOther || '-' }}</span>
            </div>
          </div>
          <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
          <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
            <div class="form-group">
              <label class="radio-label">
                <input type="radio" formControlName="relationshipType" value="é…å¶è€…" (change)="onRelationshipTypeChange()">
                é…å¶è€…
              </label>
              <label class="radio-label">
                <input type="radio" formControlName="relationshipType" value="é…å¶è€…ä»¥å¤–" (change)="onRelationshipTypeChange()">
                é…å¶è€…ä»¥å¤–
              </label>
            </div>
            <div *ngIf="dependentApplicationForm.get('relationshipType')?.invalid && dependentApplicationForm.get('relationshipType')?.touched" class="error-message">
              ç¶šæŸ„ã‚’é¸æŠã—ã¦ãã ã•ã„
            </div>
            <!-- é…å¶è€…ã‚’é¸æŠã—ãŸå ´åˆã®ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰ -->
            <div *ngIf="dependentApplicationForm?.get('relationshipType')?.value === 'é…å¶è€…'" class="form-group" style="margin-top: 1rem;">
              <label for="spouseType">ç¶šæŸ„ï¼ˆå¦»/å¤«ï¼‰ <span class="required">*</span></label>
              <select 
                id="spouseType" 
                formControlName="spouseType" 
                class="form-input"
                (change)="onSpouseTypeChange()"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="å¦»">å¦»</option>
                <option value="å¤«">å¤«</option>
              </select>
              <div *ngIf="dependentApplicationForm.get('spouseType')?.invalid && dependentApplicationForm.get('spouseType')?.touched" class="error-message">
                å¦»ã¾ãŸã¯å¤«ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
            </div>
            <!-- é…å¶è€…ä»¥å¤–ã‚’é¸æŠã—ãŸå ´åˆã®ç¶šæŸ„ -->
            <div *ngIf="dependentApplicationForm?.get('relationshipType')?.value === 'é…å¶è€…ä»¥å¤–'" class="form-group" style="margin-top: 1rem;">
              <label for="relationship">ç¶šæŸ„ <span class="required">*</span></label>
              <select 
                id="relationship" 
                formControlName="relationship" 
                class="form-input"
                (change)="onRelationshipChange()"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="å®Ÿå­ãƒ»é¤Šå­">å®Ÿå­ãƒ»é¤Šå­</option>
                <option value="å®Ÿå­ãƒ»é¤Šå­ä»¥å¤–ã®å­">å®Ÿå­ãƒ»é¤Šå­ä»¥å¤–ã®å­</option>
                <option value="çˆ¶æ¯ãƒ»é¤Šçˆ¶æ¯">çˆ¶æ¯ãƒ»é¤Šçˆ¶æ¯</option>
                <option value="ç¾©çˆ¶æ¯">ç¾©çˆ¶æ¯</option>
                <option value="å¼Ÿå¦¹">å¼Ÿå¦¹</option>
                <option value="å…„å§‰">å…„å§‰</option>
                <option value="ç¥–çˆ¶æ¯">ç¥–çˆ¶æ¯</option>
                <option value="æ›½ç¥–çˆ¶æ¯">æ›½ç¥–çˆ¶æ¯</option>
                <option value="å­«">å­«</option>
                <option value="ãã®ä»–">ãã®ä»–</option>
              </select>
              <div *ngIf="dependentApplicationForm.get('relationship')?.invalid && dependentApplicationForm.get('relationship')?.touched" class="error-message">
                ç¶šæŸ„ã‚’é¸æŠã—ã¦ãã ã•ã„
              </div>
              <div *ngIf="dependentApplicationForm.get('relationship')?.value === 'ãã®ä»–'" class="form-group" style="margin-top: 0.5rem;">
                <label for="relationshipOther">ãã®ä»– <span class="required">*</span></label>
                <input type="text" id="relationshipOther" formControlName="relationshipOther" class="form-input">
              </div>
            </div>
          </div>
        </section>
        
        <!-- é…å¶è€…ã®å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ  -->
        <ng-container *ngIf="(selectedApplication.relationshipType === 'é…å¶è€…' || (isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—' && dependentApplicationForm?.get('relationshipType')?.value === 'é…å¶è€…'))">
          
          <!-- æ°å -->
          <section class="detail-section">
            <h3 class="section-title">æ°å</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">å§“:</span>
                <span class="detail-value">{{ selectedApplication.lastName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å:</span>
                <span class="detail-value">{{ selectedApplication.firstName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.lastNameKana || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.firstNameKana || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-grid">
                <div class="form-group">
                  <label for="dependentLastName">å§“ <span class="required">*</span></label>
                  <input type="text" id="dependentLastName" formControlName="lastName" class="form-input">
                </div>
                <div class="form-group">
                  <label for="dependentFirstName">å <span class="required">*</span></label>
                  <input type="text" id="dependentFirstName" formControlName="firstName" class="form-input">
                </div>
                <div class="form-group">
                  <label for="dependentLastNameKana">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
                  <input type="text" id="dependentLastNameKana" formControlName="lastNameKana" class="form-input">
                </div>
                <div class="form-group">
                  <label for="dependentFirstNameKana">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
                  <input type="text" id="dependentFirstNameKana" formControlName="firstNameKana" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜ -->
          <section class="detail-section" *ngIf="selectedApplication.identityDocFileUrl || (isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—')">
            <h3 class="section-title">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item full-width" *ngIf="selectedApplication.identityDocFileUrl">
                <span class="detail-label">èº«åˆ†è¨¼æ˜æ›¸:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.identityDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.identityDocFileUrl, selectedApplication.identityDocFileName) }}</a>
                </span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentIdentityDoc">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</label>
                <input 
                  type="file" 
                  id="dependentIdentityDoc" 
                  class="form-input"
                  accept=".pdf,.jpg,.jpeg,.png"
                  (change)="onDependentFileSelected($event, 'identityDoc')"
                >
                <div *ngIf="dependentIdentityDocFile" class="file-name">{{ dependentIdentityDocFile.name }}</div>
                <div *ngIf="selectedApplication.identityDocFileUrl && !dependentIdentityDocFile" class="file-info" style="margin-top: 0.5rem;">
                  <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                  <a [href]="selectedApplication.identityDocFileUrl" target="_blank" class="file-link">
                    {{ getFileNameFromUrl(selectedApplication.identityDocFileUrl, selectedApplication.identityDocFileName) }}
                  </a>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ç”Ÿå¹´æœˆæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">ç”Ÿå¹´æœˆæ—¥</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ç”Ÿå¹´æœˆæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.birthDate || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentBirthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
                <input type="date" id="dependentBirthDate" formControlName="birthDate" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                <span class="detail-value">{{ formatMyNumberForDisplay(selectedApplication.myNumber || (selectedApplication.myNumberPart1 && selectedApplication.myNumberPart2 && selectedApplication.myNumberPart3 ? (selectedApplication.myNumberPart1 + selectedApplication.myNumberPart2 + selectedApplication.myNumberPart3) : null)) || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</label>
                <div class="my-number-container">
                  <div class="my-number-inputs">
                    <input 
                      type="text" 
                      id="dependentMyNumberPart1" 
                      formControlName="myNumberPart1" 
                      class="form-input my-number-part"
                      maxlength="4"
                      (input)="formatDependentMyNumberInput($event, 1)"
                      placeholder="0000"
                    >
                    <span class="my-number-separator">-</span>
                    <input 
                      type="text" 
                      id="dependentMyNumberPart2" 
                      formControlName="myNumberPart2" 
                      class="form-input my-number-part"
                      maxlength="4"
                      (input)="formatDependentMyNumberInput($event, 2)"
                      placeholder="0000"
                    >
                    <span class="my-number-separator">-</span>
                    <input 
                      type="text" 
                      id="dependentMyNumberPart3" 
                      formControlName="myNumberPart3" 
                      class="form-input my-number-part"
                      maxlength="4"
                      (input)="formatDependentMyNumberInput($event, 3)"
                      placeholder="0000"
                    >
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜ï¼ˆé…å¶è€…ã®å ´åˆï¼‰ -->
          <section class="detail-section" *ngIf="selectedApplication.myNumberCardFileUrl || (isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—')">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item full-width" *ngIf="selectedApplication.myNumberCardFileUrl">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.myNumberCardFileUrl, selectedApplication.myNumberCardFile) }}</a>
                </span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentMyNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</label>
                <input 
                  type="file" 
                  id="dependentMyNumberCard" 
                  class="form-input"
                  accept=".pdf,.jpg,.jpeg,.png"
                  (change)="onDependentFileSelected($event, 'myNumberCard')"
                >
                <div *ngIf="dependentMyNumberCardFile" class="file-name">{{ dependentMyNumberCardFile.name }}</div>
                <div *ngIf="selectedApplication.myNumberCardFileUrl && !dependentMyNumberCardFile" class="file-info" style="margin-top: 0.5rem;">
                  <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                    {{ getFileNameFromUrl(selectedApplication.myNumberCardFileUrl, selectedApplication.myNumberCardFile) }}
                  </a>
                </div>
              </div>
            </div>
          </section>
          
          <!-- åŸºç¤å¹´é‡‘ç•ªå· -->
          <section class="detail-section">
            <h3 class="section-title">åŸºç¤å¹´é‡‘ç•ªå·</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·:</span>
                <span class="detail-value">{{ formatBasicPensionNumberForDisplay(selectedApplication.basicPensionNumber) || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.basicPensionNumberDocFileUrl">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·æ›¸é¡:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.basicPensionNumberDocFileUrl, selectedApplication.basicPensionNumberDocFileName) }}</a>
                </span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>åŸºç¤å¹´é‡‘ç•ªå· <span class="required">*</span></label>
                <div class="basic-pension-number-container">
                  <input 
                    type="text" 
                    id="dependentBasicPensionNumberPart1" 
                    formControlName="basicPensionNumberPart1" 
                    class="form-input basic-pension-part"
                    maxlength="4"
                    (input)="formatDependentBasicPensionNumberInput($event, 1)"
                    placeholder="0000"
                  >
                  <span class="basic-pension-separator">-</span>
                  <input 
                    type="text" 
                    id="dependentBasicPensionNumberPart2" 
                    formControlName="basicPensionNumberPart2" 
                    class="form-input basic-pension-part"
                    maxlength="6"
                    (input)="formatDependentBasicPensionNumberInput($event, 2)"
                    placeholder="000000"
                  >
                </div>
                <div *ngIf="(dependentApplicationForm.get('basicPensionNumberPart1')?.invalid || dependentApplicationForm.get('basicPensionNumberPart2')?.invalid) && (dependentApplicationForm.get('basicPensionNumberPart1')?.touched || dependentApplicationForm.get('basicPensionNumberPart2')?.touched)" class="error-message">
                  åŸºç¤å¹´é‡‘ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                </div>
              </div>
              <div class="form-group">
                <label for="dependentBasicPensionNumberDoc">åŸºç¤å¹´é‡‘ç•ªå·æ›¸é¡æ·»ä»˜ <span class="required">*</span></label>
                <input 
                  type="file" 
                  id="dependentBasicPensionNumberDoc" 
                  class="form-input"
                  accept=".pdf,.jpg,.jpeg,.png"
                  (change)="onDependentFileSelected($event, 'basicPensionNumberDoc')"
                >
                <div *ngIf="dependentBasicPensionNumberDocFile" class="file-name">{{ dependentBasicPensionNumberDocFile.name }}</div>
                <div *ngIf="selectedApplication.basicPensionNumberDocFileUrl && !dependentBasicPensionNumberDocFile" class="file-info" style="margin-top: 0.5rem;">
                  <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                  <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                    {{ getFileNameFromUrl(selectedApplication.basicPensionNumberDocFileUrl, selectedApplication.basicPensionNumberDocFileName) }}
                  </a>
                </div>
              </div>
            </div>
          </section>
          
          <!-- å¤–å›½ç±ã‹ -->
          <section class="detail-section">
            <h3 class="section-title">å¤–å›½ç±ã‹</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">å¤–å›½ç±ã‹:</span>
                <span class="detail-value">{{ selectedApplication.isForeignNational || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isForeignNational === 'ã¯ã„'">
                <span class="detail-label">å›½ç±:</span>
                <span class="detail-value">{{ selectedApplication.nationality || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isForeignNational === 'ã¯ã„'">
                <span class="detail-label">é€šç§°å:</span>
                <span class="detail-value">{{ selectedApplication.aliasName || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>å¤–å›½ç±ã‹ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="isForeignNational" value="ã¯ã„" (change)="onForeignNationalChange()">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="isForeignNational" value="ã„ã„ãˆ" (change)="onForeignNationalChange()">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('isForeignNational')?.invalid && dependentApplicationForm.get('isForeignNational')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('isForeignNational')?.value === 'ã¯ã„'" class="form-grid">
                <div class="form-group">
                  <label for="nationality">å›½ç± <span class="required">*</span></label>
                  <input type="text" id="nationality" formControlName="nationality" class="form-input">
                </div>
                <div class="form-group">
                  <label for="aliasName">é€šç§°å <span class="required">*</span></label>
                  <input type="text" id="aliasName" formControlName="aliasName" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- ä½æ‰€ -->
          <section class="detail-section">
            <h3 class="section-title">ä½æ‰€</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.livingTogether || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.postalCode || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.address || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
                <span class="detail-label">æ¯æœˆã®ä»•é€ã‚Šé¡:</span>
                <span class="detail-value">{{ selectedApplication.monthlySupportAmount ? (selectedApplication.monthlySupportAmount | number:'1.0-0') + 'å††' : '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…' && selectedApplication.supportAmountDocFileUrl">
                <span class="detail-label">ä»•é€ã‚Šé¡è¨¼æ˜æ›¸é¡:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.supportAmountDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.supportAmountDocFileUrl, selectedApplication.supportAmountDocFileName) }}</a>
                </span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>ä½æ‰€ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="livingTogether" value="åŒå±…" (change)="onLivingTogetherChange()">
                    åŒå±…
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="livingTogether" value="åˆ¥å±…" (change)="onLivingTogetherChange()">
                    åˆ¥å±…
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('livingTogether')?.invalid && dependentApplicationForm.get('livingTogether')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('livingTogether')?.value === 'åˆ¥å±…'" class="form-grid">
                <div class="form-group">
                  <label for="dependentPostalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
                  <input 
                    type="text" 
                    id="dependentPostalCode" 
                    formControlName="postalCode" 
                    class="form-input" 
                    placeholder="ä¾‹: 1234567"
                    maxlength="7"
                    (input)="formatDependentPostalCode($event)"
                  >
                </div>
                <div class="form-group full-width">
                  <label for="dependentAddress">ä½æ‰€ <span class="required">*</span></label>
                  <textarea id="dependentAddress" formControlName="address" class="form-input" rows="2"></textarea>
                </div>
                <div class="form-group">
                  <label for="monthlySupportAmount">æ¯æœˆã®ä»•é€ã‚Šé¡ <span class="required">*</span></label>
                  <input type="number" id="monthlySupportAmount" formControlName="monthlySupportAmount" class="form-input" placeholder="å††">
                </div>
                <div class="form-group full-width">
                  <label for="supportAmountDoc">ä»•é€ã‚Šé¡è¨¼æ˜æ›¸é¡æ·»ä»˜ <span class="required">*</span></label>
                  <input 
                    type="file" 
                    id="supportAmountDoc" 
                    class="form-input"
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onDependentFileSelected($event, 'supportAmountDoc')"
                  >
                  <div *ngIf="supportAmountDocFile" class="file-name">{{ supportAmountDocFile.name }}</div>
                  <div *ngIf="selectedApplication.supportAmountDocFileUrl && !supportAmountDocFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.supportAmountDocFileUrl" target="_blank" class="file-link">
                      {{ getFileNameFromUrl(selectedApplication.supportAmountDocFileUrl, selectedApplication.supportAmountDocFileName) }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- é›»è©±ç•ªå· -->
          <section class="detail-section">
            <h3 class="section-title">é›»è©±ç•ªå·</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">é›»è©±ç•ªå·ã®ç¨®é¡:</span>
                <span class="detail-value">{{ selectedApplication.phoneNumberType || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.phoneNumberType === 'ãã®ä»–'">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.phoneNumberOther || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é›»è©±ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.phoneNumber || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="phoneNumberType">é›»è©±ç•ªå·ï¼ˆè‡ªå®…ã€æºå¸¯ã€å‹¤å‹™å…ˆã€ãã®ä»–ï¼‰ <span class="required">*</span></label>
                <select 
                  id="phoneNumberType" 
                  formControlName="phoneNumberType" 
                  class="form-input"
                  (change)="onPhoneNumberTypeChange()"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="è‡ªå®…">è‡ªå®…</option>
                  <option value="æºå¸¯">æºå¸¯</option>
                  <option value="å‹¤å‹™å…ˆ">å‹¤å‹™å…ˆ</option>
                  <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
                <div *ngIf="dependentApplicationForm.get('phoneNumberType')?.invalid && dependentApplicationForm.get('phoneNumberType')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('phoneNumberType')?.value === 'ãã®ä»–'" class="form-group">
                <label for="phoneNumberOther">ãã®ä»– <span class="required">*</span></label>
                <input type="text" id="phoneNumberOther" formControlName="phoneNumberOther" class="form-input">
              </div>
              <div class="form-group">
                <label for="dependentPhoneNumber">é›»è©±ç•ªå· <span class="required">*</span></label>
                <input 
                  type="tel" 
                  id="dependentPhoneNumber" 
                  formControlName="phoneNumber" 
                  class="form-input"
                  maxlength="11"
                  (input)="formatDependentPhoneNumber($event)"
                >
              </div>
            </div>
          </section>
          
          <!-- è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.dependentStartDate || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentStartDate">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ <span class="required">*</span></label>
                <input type="date" id="dependentStartDate" formControlName="dependentStartDate" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- ç†ç”± -->
          <section class="detail-section">
            <h3 class="section-title">ç†ç”±</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ç†ç”±:</span>
                <span class="detail-value">{{ (selectedApplication.dependentReason && !['é…å¶è€…ã®å°±è·', 'å©šå§»', 'é›¢è·', 'åå…¥æ¸›å°‘', 'ãã®ä»–'].includes(selectedApplication.dependentReason)) ? 'ãã®ä»–' : (selectedApplication.dependentReason || '-') }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.dependentReason && !['é…å¶è€…ã®å°±è·', 'å©šå§»', 'é›¢è·', 'åå…¥æ¸›å°‘', 'ãã®ä»–'].includes(selectedApplication.dependentReason)">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.dependentReason || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.dependentReason === 'ãã®ä»–' && selectedApplication.dependentReasonOther">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.dependentReasonOther || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentReason">ç†ç”± <span class="required">*</span></label>
                <select 
                  id="dependentReason" 
                  formControlName="dependentReason" 
                  class="form-input"
                  (change)="onDependentReasonChange()"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="é…å¶è€…ã®å°±è·">é…å¶è€…ã®å°±è·</option>
                  <option value="å©šå§»">å©šå§»</option>
                  <option value="é›¢è·">é›¢è·</option>
                  <option value="åå…¥æ¸›å°‘">åå…¥æ¸›å°‘</option>
                  <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
                <div *ngIf="dependentApplicationForm.get('dependentReason')?.invalid && dependentApplicationForm.get('dependentReason')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('dependentReason')?.value === 'ãã®ä»–'" class="form-group">
                <label for="dependentReasonOther">ãã®ä»– <span class="required">*</span></label>
                <input type="text" id="dependentReasonOther" formControlName="dependentReasonOther" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- è·æ¥­ -->
          <section class="detail-section">
            <h3 class="section-title">è·æ¥­</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">è·æ¥­:</span>
                <span class="detail-value">{{ (selectedApplication.occupation && !['ç„¡è·', 'ãƒ‘ãƒ¼ãƒˆ', 'å¹´é‡‘å—çµ¦è€…', 'ãã®ä»–'].includes(selectedApplication.occupation)) ? 'ãã®ä»–' : (selectedApplication.occupation || '-') }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.occupation && !['ç„¡è·', 'ãƒ‘ãƒ¼ãƒˆ', 'å¹´é‡‘å—çµ¦è€…', 'ãã®ä»–'].includes(selectedApplication.occupation)">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.occupation || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.occupation === 'ãã®ä»–' && selectedApplication.occupationOther">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.occupationOther || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="occupation">è·æ¥­ <span class="required">*</span></label>
                <select 
                  id="occupation" 
                  formControlName="occupation" 
                  class="form-input"
                  (change)="onOccupationChange()"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="ç„¡è·">ç„¡è·</option>
                  <option value="ãƒ‘ãƒ¼ãƒˆ">ãƒ‘ãƒ¼ãƒˆ</option>
                  <option value="å¹´é‡‘å—çµ¦è€…">å¹´é‡‘å—çµ¦è€…</option>
                  <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
                <div *ngIf="dependentApplicationForm.get('occupation')?.invalid && dependentApplicationForm.get('occupation')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('occupation')?.value === 'ãã®ä»–'" class="form-group">
                <label for="occupationOther">ãã®ä»– <span class="required">*</span></label>
                <input type="text" id="occupationOther" formControlName="occupationOther" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- å¹´åè¦‹è¾¼ã¿é¡ -->
          <section class="detail-section">
            <h3 class="section-title">å¹´åè¦‹è¾¼ã¿é¡</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">å¹´åè¦‹è¾¼ã¿é¡:</span>
                <span class="detail-value">{{ selectedApplication.annualIncome ? (selectedApplication.annualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentAnnualIncome">å¹´åè¦‹è¾¼ã¿é¡ <span class="required">*</span></label>
                <input type="number" id="dependentAnnualIncome" formControlName="annualIncome" class="form-input" placeholder="å††">
              </div>
            </div>
          </section>
          
          <!-- æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ -->
          <section class="detail-section">
            <h3 class="section-title">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ:</span>
                <span class="detail-value">{{ selectedApplication.isOverseasResident || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„'">
                <span class="detail-label">æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«è©²å½“ã—ãŸæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.overseasSpecialRequirementDate || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„'">
                <span class="detail-label">ç†ç”±:</span>
                <span class="detail-value">{{ (selectedApplication.overseasReason && !['ç•™å­¦', 'åŒè¡Œå®¶æ—', 'ç‰¹å®šæ´»å‹•', 'æµ·å¤–å©šå§»', 'ãã®ä»–'].includes(selectedApplication.overseasReason)) ? 'ãã®ä»–' : (selectedApplication.overseasReason || '-') }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„' && selectedApplication.overseasReason && !['ç•™å­¦', 'åŒè¡Œå®¶æ—', 'ç‰¹å®šæ´»å‹•', 'æµ·å¤–å©šå§»', 'ãã®ä»–'].includes(selectedApplication.overseasReason)">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.overseasReason || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„' && selectedApplication.overseasReason === 'ãã®ä»–' && selectedApplication.overseasReasonOther">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.overseasReasonOther || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="isOverseasResident" value="ã¯ã„" (change)="onDependentOverseasResidentChange()">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="isOverseasResident" value="ã„ã„ãˆ" (change)="onDependentOverseasResidentChange()">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.invalid && dependentApplicationForm.get('isOverseasResident')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.value === 'ã¯ã„'" class="form-grid">
                <div class="form-group">
                  <label for="overseasSpecialRequirementDate">æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«è©²å½“ã—ãŸæ—¥ <span class="required">*</span></label>
                  <input type="date" id="overseasSpecialRequirementDate" formControlName="overseasSpecialRequirementDate" class="form-input">
                </div>
                <div class="form-group">
                  <label for="overseasReason">ç†ç”± <span class="required">*</span></label>
                  <select 
                    id="overseasReason" 
                    formControlName="overseasReason" 
                    class="form-input"
                    (change)="onOverseasReasonChange()"
                  >
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="ç•™å­¦">ç•™å­¦</option>
                    <option value="åŒè¡Œå®¶æ—">åŒè¡Œå®¶æ—</option>
                    <option value="ç‰¹å®šæ´»å‹•">ç‰¹å®šæ´»å‹•</option>
                    <option value="æµ·å¤–å©šå§»">æµ·å¤–å©šå§»</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                  </select>
                </div>
                <div *ngIf="dependentApplicationForm.get('overseasReason')?.value === 'ãã®ä»–'" class="form-group">
                  <label for="overseasReasonOther">ãã®ä»– <span class="required">*</span></label>
                  <input type="text" id="overseasReasonOther" formControlName="overseasReasonOther" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
          <section class="detail-section">
            <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹:</span>
                <span class="detail-value">{{ selectedApplication.needsQualificationConfirmation || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="needsQualificationConfirmation" value="ã¯ã„">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="needsQualificationConfirmation" value="ã„ã„ãˆ">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('needsQualificationConfirmation')?.invalid && dependentApplicationForm.get('needsQualificationConfirmation')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
          </section>
        </ng-container>
        
        <!-- é…å¶è€…ä»¥å¤–ã®å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ  -->
        <ng-container *ngIf="(selectedApplication.relationshipType === 'é…å¶è€…ä»¥å¤–' || (isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—' && dependentApplicationForm?.get('relationshipType')?.value === 'é…å¶è€…ä»¥å¤–'))">
          <!-- æ°å -->
          <section class="detail-section">
            <h3 class="section-title">æ°å</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">å§“:</span>
                <span class="detail-value">{{ selectedApplication.lastName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å:</span>
                <span class="detail-value">{{ selectedApplication.firstName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.lastNameKana || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.firstNameKana || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-grid">
                <div class="form-group">
                  <label for="dependentLastName">å§“ <span class="required">*</span></label>
                  <input type="text" id="dependentLastName" formControlName="lastName" class="form-input">
                </div>
                <div class="form-group">
                  <label for="dependentFirstName">å <span class="required">*</span></label>
                  <input type="text" id="dependentFirstName" formControlName="firstName" class="form-input">
                </div>
                <div class="form-group">
                  <label for="dependentLastNameKana">å§“ï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
                  <input type="text" id="dependentLastNameKana" formControlName="lastNameKana" class="form-input">
                </div>
                <div class="form-group">
                  <label for="dependentFirstNameKana">åï¼ˆãƒ•ãƒªã‚¬ãƒŠï¼‰ <span class="required">*</span></label>
                  <input type="text" id="dependentFirstNameKana" formControlName="firstNameKana" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- ç”Ÿå¹´æœˆæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">ç”Ÿå¹´æœˆæ—¥</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ç”Ÿå¹´æœˆæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.birthDate || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentBirthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
                <input type="date" id="dependentBirthDate" formControlName="birthDate" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                <span class="detail-value">{{ formatMyNumberForDisplay(selectedApplication.myNumber) || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ <span class="required">*</span></label>
                <div class="my-number-container">
                  <div class="my-number-inputs">
                    <input 
                      type="text" 
                      id="dependentMyNumberPart1" 
                      formControlName="myNumberPart1" 
                      class="form-input my-number-part"
                      maxlength="4"
                      (input)="formatDependentMyNumberInput($event, 1)"
                      placeholder="0000"
                    >
                    <span class="my-number-separator">-</span>
                    <input 
                      type="text" 
                      id="dependentMyNumberPart2" 
                      formControlName="myNumberPart2" 
                      class="form-input my-number-part"
                      maxlength="4"
                      (input)="formatDependentMyNumberInput($event, 2)"
                      placeholder="0000"
                    >
                    <span class="my-number-separator">-</span>
                    <input 
                      type="text" 
                      id="dependentMyNumberPart3" 
                      formControlName="myNumberPart3" 
                      class="form-input my-number-part"
                      maxlength="4"
                      (input)="formatDependentMyNumberInput($event, 3)"
                      placeholder="0000"
                    >
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜ -->
          <section class="detail-section" *ngIf="selectedApplication.myNumberCardFileUrl || (isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—')">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item full-width" *ngIf="selectedApplication.myNumberCardFileUrl">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.myNumberCardFileUrl, selectedApplication.myNumberCardFile) }}</a>
                </span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentMyNumberCard">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰æ·»ä»˜ <span class="required">*</span></label>
                <input 
                  type="file" 
                  id="dependentMyNumberCard" 
                  class="form-input"
                  accept=".pdf,.jpg,.jpeg,.png"
                  (change)="onDependentFileSelected($event, 'myNumberCard')"
                >
                <div *ngIf="dependentMyNumberCardFile" class="file-name">{{ dependentMyNumberCardFile.name }}</div>
                <div *ngIf="selectedApplication.myNumberCardFileUrl && !dependentMyNumberCardFile" class="file-info" style="margin-top: 0.5rem;">
                  <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                    {{ getFileNameFromUrl(selectedApplication.myNumberCardFileUrl, selectedApplication.myNumberCardFile) }}
                  </a>
                </div>
              </div>
            </div>
          </section>
          
          <!-- èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜ -->
          <section class="detail-section" *ngIf="selectedApplication.identityDocFileUrl || (isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—')">
            <h3 class="section-title">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item full-width" *ngIf="selectedApplication.identityDocFileUrl">
                <span class="detail-label">èº«åˆ†è¨¼æ˜æ›¸:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.identityDocFileUrl" target="_blank" class="file-link">{{ getFileNameFromUrl(selectedApplication.identityDocFileUrl, selectedApplication.identityDocFileName) }}</a>
                </span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentIdentityDoc">èº«åˆ†è¨¼æ˜æ›¸æ·»ä»˜</label>
                <input 
                  type="file" 
                  id="dependentIdentityDoc" 
                  class="form-input"
                  accept=".pdf,.jpg,.jpeg,.png"
                  (change)="onDependentFileSelected($event, 'identityDoc')"
                >
                <div *ngIf="dependentIdentityDocFile" class="file-name">{{ dependentIdentityDocFile.name }}</div>
                <div *ngIf="selectedApplication.identityDocFileUrl && !dependentIdentityDocFile" class="file-info" style="margin-top: 0.5rem;">
                  <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                  <a [href]="selectedApplication.identityDocFileUrl" target="_blank" class="file-link">
                    {{ getFileNameFromUrl(selectedApplication.identityDocFileUrl, selectedApplication.identityDocFileName) }}
                  </a>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æ€§åˆ¥ -->
          <section class="detail-section">
            <h3 class="section-title">æ€§åˆ¥</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">æ€§åˆ¥:</span>
                <span class="detail-value">{{ selectedApplication.gender || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="gender">æ€§åˆ¥ <span class="required">*</span></label>
                <select formControlName="gender" class="form-input">
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="ç”·æ€§">ç”·æ€§</option>
                  <option value="å¥³æ€§">å¥³æ€§</option>
                </select>
                <div *ngIf="dependentApplicationForm.get('gender')?.invalid && dependentApplicationForm.get('gender')?.touched" class="error-message">
                  æ€§åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
          </section>
          
          <!-- ä½æ‰€ -->
          <section class="detail-section">
            <h3 class="section-title">ä½æ‰€</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.livingTogether || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.postalCode || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.livingTogether === 'åˆ¥å±…'">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.address || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>ä½æ‰€ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="livingTogether" value="åŒå±…" (change)="onLivingTogetherChange()">
                    åŒå±…
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="livingTogether" value="åˆ¥å±…" (change)="onLivingTogetherChange()">
                    åˆ¥å±…
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('livingTogether')?.invalid && dependentApplicationForm.get('livingTogether')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('livingTogether')?.value === 'åˆ¥å±…'" class="form-grid">
                <div class="form-group">
                  <label for="dependentPostalCode">éƒµä¾¿ç•ªå· <span class="required">*</span></label>
                  <input 
                    type="text" 
                    id="dependentPostalCode" 
                    formControlName="postalCode" 
                    class="form-input" 
                    placeholder="ä¾‹: 1234567"
                    maxlength="7"
                    (input)="formatDependentPostalCode($event)"
                  >
                </div>
                <div class="form-group full-width">
                  <label for="dependentAddress">ä½æ‰€ <span class="required">*</span></label>
                  <textarea id="dependentAddress" formControlName="address" class="form-input" rows="2"></textarea>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ -->
          <section class="detail-section">
            <h3 class="section-title">æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ:</span>
                <span class="detail-value">{{ selectedApplication.isOverseasResident || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„'">
                <span class="detail-label">ç†ç”±:</span>
                <span class="detail-value">{{ (selectedApplication.overseasReason && !['ç•™å­¦', 'åŒè¡Œå®¶æ—', 'ç‰¹å®šæ´»å‹•', 'æµ·å¤–å©šå§»', 'ãã®ä»–'].includes(selectedApplication.overseasReason)) ? 'ãã®ä»–' : (selectedApplication.overseasReason || '-') }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„' && selectedApplication.overseasReason && !['ç•™å­¦', 'åŒè¡Œå®¶æ—', 'ç‰¹å®šæ´»å‹•', 'æµ·å¤–å©šå§»', 'ãã®ä»–'].includes(selectedApplication.overseasReason)">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.overseasReason || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.isOverseasResident === 'ã¯ã„' && selectedApplication.overseasReason === 'ãã®ä»–' && selectedApplication.overseasReasonOther">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.overseasReasonOther || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>æµ·å¤–å±…ä½è€…ã€ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="isOverseasResident" value="ã¯ã„" (change)="onDependentOverseasResidentChange()">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="isOverseasResident" value="ã„ã„ãˆ" (change)="onDependentOverseasResidentChange()">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.invalid && dependentApplicationForm.get('isOverseasResident')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('isOverseasResident')?.value === 'ã¯ã„'" class="form-grid">
                <div class="form-group">
                  <label for="overseasReason">ç†ç”± <span class="required">*</span></label>
                  <select 
                    id="overseasReason" 
                    formControlName="overseasReason" 
                    class="form-input"
                    (change)="onOverseasReasonChange()"
                  >
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="ç•™å­¦">ç•™å­¦</option>
                    <option value="åŒè¡Œå®¶æ—">åŒè¡Œå®¶æ—</option>
                    <option value="ç‰¹å®šæ´»å‹•">ç‰¹å®šæ´»å‹•</option>
                    <option value="æµ·å¤–å©šå§»">æµ·å¤–å©šå§»</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                  </select>
                </div>
                <div *ngIf="dependentApplicationForm.get('overseasReason')?.value === 'ãã®ä»–'" class="form-group">
                  <label for="overseasReasonOther">ãã®ä»– <span class="required">*</span></label>
                  <input type="text" id="overseasReasonOther" formControlName="overseasReasonOther" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.dependentStartDate || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentStartDate">è¢«æ‰¶é¤Šè€…ã«ãªã£ãŸæ—¥ <span class="required">*</span></label>
                <input type="date" id="dependentStartDate" formControlName="dependentStartDate" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- è·æ¥­ -->
          <section class="detail-section">
            <h3 class="section-title">è·æ¥­</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">è·æ¥­:</span>
                <span class="detail-value">{{ (selectedApplication.occupation && !['ç„¡è·', 'ãƒ‘ãƒ¼ãƒˆ', 'å¹´é‡‘å—çµ¦è€…', 'å°ä¸­å­¦ç”Ÿ', 'é«˜æ ¡ç”Ÿ', 'å¤§å­¦ç”Ÿ', 'ãã®ä»–'].includes(selectedApplication.occupation)) ? 'ãã®ä»–' : (selectedApplication.occupation || '-') }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.occupation && !['ç„¡è·', 'ãƒ‘ãƒ¼ãƒˆ', 'å¹´é‡‘å—çµ¦è€…', 'å°ä¸­å­¦ç”Ÿ', 'é«˜æ ¡ç”Ÿ', 'å¤§å­¦ç”Ÿ', 'ãã®ä»–'].includes(selectedApplication.occupation)">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.occupation || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.occupation === 'ãã®ä»–' && selectedApplication.occupationOther">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.occupationOther || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.occupation === 'å¤§å­¦ç”Ÿ'">
                <span class="detail-label">å­¦å¹´:</span>
                <span class="detail-value">{{ selectedApplication.studentYear || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="occupation">è·æ¥­ <span class="required">*</span></label>
                <select 
                  id="occupation" 
                  formControlName="occupation" 
                  class="form-input"
                  (change)="onOccupationChange()"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="ç„¡è·">ç„¡è·</option>
                  <option value="ãƒ‘ãƒ¼ãƒˆ">ãƒ‘ãƒ¼ãƒˆ</option>
                  <option value="å¹´é‡‘å—çµ¦è€…">å¹´é‡‘å—çµ¦è€…</option>
                  <option value="å°ä¸­å­¦ç”Ÿ">å°ä¸­å­¦ç”Ÿ</option>
                  <option value="é«˜æ ¡ç”Ÿ">é«˜æ ¡ç”Ÿ</option>
                  <option value="å¤§å­¦ç”Ÿ">å¤§å­¦ç”Ÿ</option>
                  <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
                <div *ngIf="dependentApplicationForm.get('occupation')?.invalid && dependentApplicationForm.get('occupation')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('occupation')?.value === 'ãã®ä»–'" class="form-group">
                <label for="occupationOther">ãã®ä»– <span class="required">*</span></label>
                <input type="text" id="occupationOther" formControlName="occupationOther" class="form-input">
              </div>
              <div *ngIf="dependentApplicationForm.get('occupation')?.value === 'å¤§å­¦ç”Ÿ'" class="form-group">
                <label for="studentYear">å­¦å¹´ <span class="required">*</span></label>
                <input type="text" id="studentYear" formControlName="studentYear" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- å¹´åè¦‹è¾¼ã¿é¡ -->
          <section class="detail-section">
            <h3 class="section-title">å¹´åè¦‹è¾¼ã¿é¡</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">å¹´åè¦‹è¾¼ã¿é¡:</span>
                <span class="detail-value">{{ selectedApplication.annualIncome ? (selectedApplication.annualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentAnnualIncome">å¹´åè¦‹è¾¼ã¿é¡ <span class="required">*</span></label>
                <input type="number" id="dependentAnnualIncome" formControlName="annualIncome" class="form-input" placeholder="å††">
              </div>
            </div>
          </section>
          
          <!-- ç†ç”± -->
          <section class="detail-section">
            <h3 class="section-title">ç†ç”±</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">ç†ç”±:</span>
                <span class="detail-value">{{ (selectedApplication.dependentReason && !['å‡ºç”Ÿ', 'é›¢è·', 'åå…¥æ¸›', 'åŒå±…', 'ãã®ä»–'].includes(selectedApplication.dependentReason)) ? 'ãã®ä»–' : (selectedApplication.dependentReason || '-') }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.dependentReason && !['å‡ºç”Ÿ', 'é›¢è·', 'åå…¥æ¸›', 'åŒå±…', 'ãã®ä»–'].includes(selectedApplication.dependentReason)">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.dependentReason || '-' }}</span>
              </div>
              <div class="detail-item" *ngIf="selectedApplication.dependentReason === 'ãã®ä»–' && selectedApplication.dependentReasonOther">
                <span class="detail-label">ãã®ä»–:</span>
                <span class="detail-value">{{ selectedApplication.dependentReasonOther || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="dependentReason">ç†ç”± <span class="required">*</span></label>
                <select 
                  id="dependentReason" 
                  formControlName="dependentReason" 
                  class="form-input"
                  (change)="onDependentReasonChange()"
                >
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="å‡ºç”Ÿ">å‡ºç”Ÿ</option>
                  <option value="é›¢è·">é›¢è·</option>
                  <option value="åå…¥æ¸›">åå…¥æ¸›</option>
                  <option value="åŒå±…">åŒå±…</option>
                  <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
                <div *ngIf="dependentApplicationForm.get('dependentReason')?.invalid && dependentApplicationForm.get('dependentReason')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
              <div *ngIf="dependentApplicationForm.get('dependentReason')?.value === 'ãã®ä»–'" class="form-group">
                <label for="dependentReasonOther">ãã®ä»– <span class="required">*</span></label>
                <input type="text" id="dependentReasonOther" formControlName="dependentReasonOther" class="form-input">
              </div>
            </div>
          </section>
          
          <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
          <section class="detail-section">
            <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹:</span>
                <span class="detail-value">{{ selectedApplication.needsQualificationConfirmation || '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label>è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ <span class="required">*</span></label>
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="needsQualificationConfirmation" value="ã¯ã„">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="needsQualificationConfirmation" value="ã„ã„ãˆ">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentApplicationForm.get('needsQualificationConfirmation')?.invalid && dependentApplicationForm.get('needsQualificationConfirmation')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
          </section>
          
          <!-- é…å¶è€…ã®å¹´å -->
          <section class="detail-section">
            <h3 class="section-title">é…å¶è€…ã®å¹´å</h3>
            <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
            <div class="detail-grid" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
              <div class="detail-item">
                <span class="detail-label">é…å¶è€…ã®å¹´å:</span>
                <span class="detail-value">{{ selectedApplication.spouseAnnualIncome ? (selectedApplication.spouseAnnualIncome | number:'1.0-0') + 'å††' : '-' }}</span>
              </div>
            </div>
            <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
            <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
              <div class="form-group">
                <label for="spouseAnnualIncome">é…å¶è€…ã®å¹´å <span class="required">*</span></label>
                <input type="number" id="spouseAnnualIncome" formControlName="spouseAnnualIncome" class="form-input" placeholder="å††">
              </div>
            </div>
          </section>
        </ng-container>
        </form>
      </ng-container>
      
      <!-- æ‰¶é¤Šå‰Šé™¤ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'æ‰¶é¤Šå‰Šé™¤ç”³è«‹'">
        <form [formGroup]="dependentRemovalForm" (ngSubmit)="submitReapplication()" *ngIf="dependentRemovalForm" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
        <!-- æ‰¶é¤Šè€… -->
        <section class="detail-section">
          <h3 class="section-title">æ‰¶é¤Šè€… <span class="required" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">*</span></h3>
          <div class="detail-grid">
            <div class="detail-item full-width">
              <span class="detail-label">æ‰¶é¤Šè€…:</span>
              <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
              <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                <span *ngIf="selectedApplication.dependent">
                  {{ selectedApplication.dependent.name || 'ï¼ˆæ°åæœªè¨­å®šï¼‰' }}
                  <span *ngIf="selectedApplication.dependent.relationship">ï¼ˆ{{ selectedApplication.dependent.relationship }}ï¼‰</span>
                </span>
                <span *ngIf="!selectedApplication.dependent">-</span>
              </span>
              <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
              <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                <select formControlName="dependentId" class="form-input">
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option *ngFor="let dependent of dependentsData; let i = index" [value]="i">
                    {{ dependent.name || 'ï¼ˆæ°åæœªè¨­å®šï¼‰' }} 
                    <span *ngIf="dependent.relationship">ï¼ˆ{{ dependent.relationship }}ï¼‰</span>
                  </option>
                </select>
                <div *ngIf="dependentRemovalForm.get('dependentId')?.invalid && dependentRemovalForm.get('dependentId')?.touched" class="error-message">
                  æ‰¶é¤Šè€…ã‚’é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥ -->
        <section class="detail-section">
          <h3 class="section-title">è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥ <span class="required" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">*</span></h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥:</span>
              <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
              <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                {{ selectedApplication.removalDate || '-' }}
              </span>
              <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
              <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                <input type="date" formControlName="removalDate" class="form-input">
                <div *ngIf="dependentRemovalForm.get('removalDate')?.invalid && dependentRemovalForm.get('removalDate')?.touched" class="error-message">
                  è¢«æ‰¶é¤Šè€…ã§ã¯ãªããªã£ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- ç†ç”± -->
        <section class="detail-section">
          <h3 class="section-title">ç†ç”± <span class="required" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">*</span></h3>
          <div class="detail-grid">
            <div class="detail-item full-width">
              <span class="detail-label">ç†ç”±:</span>
              <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
              <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                {{ (selectedApplication.removalReason && !['æ­»äº¡', 'é›¢å©š', 'å°±è·ãƒ»åå…¥å¢—åŠ ', '75æ­³åˆ°é”', 'éšœå®³èªå®š', 'ãã®ä»–'].includes(selectedApplication.removalReason)) ? 'ãã®ä»–' : (selectedApplication.removalReason || '-') }}
                <span *ngIf="selectedApplication.removalReason === 'æ­»äº¡' && selectedApplication.deathDate">
                  ï¼ˆæ­»äº¡å¹´æœˆæ—¥: {{ selectedApplication.deathDate }}ï¼‰
                </span>
              </span>
              <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
              <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                <select formControlName="removalReason" class="form-input" (change)="onRemovalReasonChange()">
                  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="æ­»äº¡">æ­»äº¡</option>
                  <option value="é›¢å©š">é›¢å©š</option>
                  <option value="å°±è·ãƒ»åå…¥å¢—åŠ ">å°±è·ãƒ»åå…¥å¢—åŠ </option>
                  <option value="75æ­³åˆ°é”">75æ­³åˆ°é”</option>
                  <option value="éšœå®³èªå®š">éšœå®³èªå®š</option>
                  <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
                <div *ngIf="dependentRemovalForm.get('removalReason')?.invalid && dependentRemovalForm.get('removalReason')?.touched" class="error-message">
                  ç†ç”±ã‚’é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
            <!-- æ­»äº¡é¸æŠæ™‚ï¼šæ­»äº¡å¹´æœˆæ—¥ -->
            <ng-container *ngIf="(isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—' && dependentRemovalForm.get('removalReason')?.value === 'æ­»äº¡') || ((!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—') && (selectedApplication.removalReason === 'æ­»äº¡' || selectedApplication.deathDate))">
              <div class="detail-item">
                <span class="detail-label">æ­»äº¡å¹´æœˆæ—¥:</span>
                <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
                <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                  {{ selectedApplication.deathDate || '-' }}
                </span>
                <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
                <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                  <input type="date" formControlName="deathDate" class="form-input">
                  <div *ngIf="dependentRemovalForm.get('deathDate')?.invalid && dependentRemovalForm.get('deathDate')?.touched" class="error-message">
                    æ­»äº¡å¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </ng-container>
            <!-- ãã®ä»–é¸æŠæ™‚ï¼šãã®ä»–ã®å…¥åŠ› -->
            <ng-container *ngIf="(isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—' && dependentRemovalForm.get('removalReason')?.value === 'ãã®ä»–') || ((!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—') && ((selectedApplication.removalReason === 'ãã®ä»–' && selectedApplication.removalReasonOther) || (selectedApplication.removalReason && !['æ­»äº¡', 'é›¢å©š', 'å°±è·ãƒ»åå…¥å¢—åŠ ', '75æ­³åˆ°é”', 'éšœå®³èªå®š', 'ãã®ä»–'].includes(selectedApplication.removalReason))))">
              <div class="detail-item full-width">
                <span class="detail-label">ãã®ä»–:</span>
                <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
                <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                  {{ selectedApplication.removalReasonOther || (selectedApplication.removalReason && !['æ­»äº¡', 'é›¢å©š', 'å°±è·ãƒ»åå…¥å¢—åŠ ', '75æ­³åˆ°é”', 'éšœå®³èªå®š', 'ãã®ä»–'].includes(selectedApplication.removalReason) ? selectedApplication.removalReason : '-') }}
                </span>
                <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
                <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                  <input type="text" formControlName="removalReasonOther" class="form-input" placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                  <div *ngIf="dependentRemovalForm.get('removalReasonOther')?.invalid && dependentRemovalForm.get('removalReasonOther')?.touched" class="error-message">
                    ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </section>
        
        <!-- æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸã‹ -->
        <section class="detail-section">
          <h3 class="section-title">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸã‹ <span class="required" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">*</span></h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">æµ·å¤–å±…ä½è€…ã¾ãŸã¯æµ·å¤–ã‹ã‚‰å›½å†…ã«è»¢å…¥ã—ãŸã‹:</span>
              <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
              <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                {{ selectedApplication.isOverseasResident || '-' }}
              </span>
              <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
              <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="isOverseasResident" value="ã¯ã„" (change)="onRemovalOverseasResidentChange()">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="isOverseasResident" value="ã„ã„ãˆ" (change)="onRemovalOverseasResidentChange()">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentRemovalForm.get('isOverseasResident')?.invalid && dependentRemovalForm.get('isOverseasResident')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
            <!-- ã¯ã„ã®å ´åˆ -->
            <ng-container *ngIf="(isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—' && dependentRemovalForm.get('isOverseasResident')?.value === 'ã¯ã„') || ((!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—') && selectedApplication.isOverseasResident === 'ã¯ã„')">
              <div class="detail-item">
                <span class="detail-label">æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«éè©²å½“ã¨ãªã£ãŸæ—¥:</span>
                <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
                <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                  {{ selectedApplication.overseasNonQualificationDate || '-' }}
                </span>
                <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
                <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                  <input type="date" formControlName="overseasNonQualificationDate" class="form-input">
                  <div *ngIf="dependentRemovalForm.get('overseasNonQualificationDate')?.invalid && dependentRemovalForm.get('overseasNonQualificationDate')?.touched" class="error-message">
                    æµ·å¤–ç‰¹ä¾‹è¦ä»¶ã«éè©²å½“ã¨ãªã£ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç†ç”±:</span>
                <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
                <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                  {{ (selectedApplication.overseasReason && !['å›½å†…è»¢å…¥', 'ãã®ä»–'].includes(selectedApplication.overseasReason)) ? 'ãã®ä»–' : (selectedApplication.overseasReason || '-') }}
                  <span *ngIf="selectedApplication.overseasReason === 'å›½å†…è»¢å…¥' && selectedApplication.transferDate">
                    ï¼ˆè»¢å…¥æ—¥: {{ selectedApplication.transferDate }}ï¼‰
                  </span>
                </span>
                <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
                <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                  <select formControlName="overseasReason" class="form-input" (change)="onRemovalOverseasReasonChange()">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="å›½å†…è»¢å…¥">å›½å†…è»¢å…¥</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                  </select>
                  <div *ngIf="dependentRemovalForm.get('overseasReason')?.invalid && dependentRemovalForm.get('overseasReason')?.touched" class="error-message">
                    ç†ç”±ã‚’é¸æŠã—ã¦ãã ã•ã„
                  </div>
                  <!-- å›½å†…è»¢å…¥é¸æŠæ™‚ï¼šè»¢å…¥æ—¥ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã®ã¿ï¼‰ -->
                  <div *ngIf="dependentRemovalForm.get('overseasReason')?.value === 'å›½å†…è»¢å…¥'" style="margin-top: 0.5rem;">
                    <label style="display: block; margin-bottom: 0.25rem; font-weight: 500;">è»¢å…¥æ—¥ <span class="required">*</span></label>
                    <input type="date" formControlName="transferDate" class="form-input">
                    <div *ngIf="dependentRemovalForm.get('transferDate')?.invalid && dependentRemovalForm.get('transferDate')?.touched" class="error-message">
                      è»¢å…¥æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                  </div>
                </div>
              </div>
              <!-- ãã®ä»–é¸æŠæ™‚ï¼šãã®ä»–ã®å…¥åŠ› -->
              <ng-container *ngIf="(isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—' && dependentRemovalForm.get('overseasReason')?.value === 'ãã®ä»–') || ((!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—') && ((selectedApplication.overseasReason === 'ãã®ä»–' && selectedApplication.overseasReasonOther) || (selectedApplication.overseasReason && !['å›½å†…è»¢å…¥', 'ãã®ä»–'].includes(selectedApplication.overseasReason))))">
                <div class="detail-item full-width">
                  <span class="detail-label">ãã®ä»–:</span>
                  <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
                  <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                    {{ selectedApplication.overseasReasonOther || (selectedApplication.overseasReason && !['å›½å†…è»¢å…¥', 'ãã®ä»–'].includes(selectedApplication.overseasReason) ? selectedApplication.overseasReason : '-') }}
                  </span>
                  <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
                  <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                    <input type="text" formControlName="overseasReasonOther" class="form-input" placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                    <div *ngIf="dependentRemovalForm.get('overseasReasonOther')?.invalid && dependentRemovalForm.get('overseasReasonOther')?.touched" class="error-message">
                      ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-container>
          </div>
        </section>
        
        <!-- è³‡æ ¼è¨¼æ˜æ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ -->
        <section class="detail-section">
          <h3 class="section-title">è³‡æ ¼è¨¼æ˜æ›¸ç™ºè¡ŒãŒå¿…è¦ã‹ <span class="required" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">*</span></h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">è³‡æ ¼è¨¼æ˜æ›¸ç™ºè¡ŒãŒå¿…è¦ã‹:</span>
              <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
              <span class="detail-value" *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
                {{ selectedApplication.needsQualificationConfirmation || '-' }}
              </span>
              <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
              <div *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="detail-edit-input">
                <div>
                  <label class="radio-label">
                    <input type="radio" formControlName="needsQualificationConfirmation" value="ã¯ã„">
                    ã¯ã„
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="needsQualificationConfirmation" value="ã„ã„ãˆ">
                    ã„ã„ãˆ
                  </label>
                </div>
                <div *ngIf="dependentRemovalForm.get('needsQualificationConfirmation')?.invalid && dependentRemovalForm.get('needsQualificationConfirmation')?.touched" class="error-message">
                  é¸æŠã—ã¦ãã ã•ã„
                </div>
              </div>
            </div>
          </div>
        </section>
        </form>
      </ng-container>
      
      <!-- ä½æ‰€å¤‰æ›´ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ä½æ‰€å¤‰æ›´ç”³è«‹'">
        <!-- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå·®ã—æˆ»ã—ã®å ´åˆï¼‰ -->
        <form [formGroup]="addressChangeForm" (ngSubmit)="submitReapplication()" *ngIf="addressChangeForm && isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
          <!-- å¼•ã£è¶Šã—ã—ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">å¼•ã£è¶Šã—ã—ãŸæ—¥ <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å¼•ã£è¶Šã—ã—ãŸæ—¥:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="moveDate" class="form-input">
                  <div *ngIf="addressChangeForm.get('moveDate')?.invalid && addressChangeForm.get('moveDate')?.touched" class="error-message">
                    å¼•ã£è¶Šã—ã—ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„ä½æ‰€ -->
          <section class="detail-section">
            <h3 class="section-title">æ–°ã—ã„ä½æ‰€</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">æµ·å¤–ã«åœ¨ä½:</span>
                <div class="detail-edit-input">
                  <label class="checkbox-label">
                    <input 
                      type="checkbox" 
                      formControlName="isOverseasResident"
                      (change)="onAddressChangeOverseasResidentChange($event)"
                    >
                    æµ·å¤–ã«åœ¨ä½
                  </label>
                </div>
              </div>
              <div class="detail-item" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
                <span class="detail-label">éƒµä¾¿ç•ªå· <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input 
                    type="text" 
                    formControlName="newPostalCode" 
                    class="form-input"
                    placeholder="1234567"
                    maxlength="7"
                    pattern="[0-9]{7}"
                    (input)="formatAddressPostalCode($event)"
                  >
                  <div *ngIf="addressChangeForm.get('newPostalCode')?.invalid && addressChangeForm.get('newPostalCode')?.touched" class="error-message">
                    <span *ngIf="addressChangeForm.get('newPostalCode')?.errors?.['required']">
                      éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </span>
                    <span *ngIf="addressChangeForm.get('newPostalCode')?.errors?.['pattern']">
                      7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </span>
                  </div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
                <span class="detail-label">ä½æ‰€ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="newAddress" class="form-input" rows="2"></textarea>
                  <div *ngIf="addressChangeForm.get('newAddress')?.invalid && addressChangeForm.get('newAddress')?.touched" class="error-message">
                    ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="newAddressKana" class="form-input" rows="2"></textarea>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="addressChangeForm.get('isOverseasResident')?.value">
                <span class="detail-label">æµ·å¤–ä½æ‰€ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <textarea 
                    formControlName="overseasAddress" 
                    class="form-input" 
                    rows="3"
                    placeholder="ä¾‹: 15 Ocean Roadã€€Sydney NSW 2000ã€€Australia"
                  ></textarea>
                  <div *ngIf="addressChangeForm.get('overseasAddress')?.invalid && addressChangeForm.get('overseasAddress')?.touched" class="error-message">
                    æµ·å¤–ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€ -->
          <section class="detail-section" *ngIf="!addressChangeForm.get('isOverseasResident')?.value">
            <h3 class="section-title">æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€</h3>
            <div class="form-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [checked]="sameAsOldAddress"
                  (change)="onSameAsOldAddressChange($event)"
                >
                å¤‰æ›´å‰ä½æ‰€ã¨åŒã˜
              </label>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [checked]="sameAsNewAddress"
                  (change)="onSameAsNewAddressChange($event)"
                >
                å¤‰æ›´å¾Œã®ä½æ‰€ã¨åŒã˜
              </label>
            </div>
            <div class="detail-grid" *ngIf="!sameAsOldAddress && !sameAsNewAddress">
              <div class="detail-item">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <div class="detail-edit-input">
                  <input 
                    type="text" 
                    formControlName="residentPostalCode" 
                    class="form-input"
                    placeholder="1234567"
                    maxlength="7"
                    pattern="[0-9]{7}"
                    (input)="formatResidentPostalCodeForAddressChange($event)"
                  >
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">ä½æ‰€:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="residentAddress" class="form-input" rows="2"></textarea>
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="residentAddressKana" class="form-input" rows="2"></textarea>
                </div>
              </div>
            </div>
          </section>
        </form>
        
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆï¼‰ -->
        <ng-container *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
          <!-- å¼•ã£è¶Šã—ã—ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">å¼•ã£è¶Šã—ã—ãŸæ—¥</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å¼•ã£è¶Šã—ã—ãŸæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.moveDate || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„ä½æ‰€ -->
          <section class="detail-section" *ngIf="selectedApplication.newAddress">
            <h3 class="section-title">æ–°ã—ã„ä½æ‰€</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">æµ·å¤–ã«åœ¨ä½:</span>
                <span class="detail-value">{{ selectedApplication.isOverseasResident ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
              </div>
              <div class="detail-item" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.newAddress.postalCode || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.newAddress.address || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.newAddress.addressKana || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.isOverseasResident">
                <span class="detail-label">æµ·å¤–ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.newAddress.overseasAddress || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€ -->
          <section class="detail-section" *ngIf="selectedApplication.residentAddress && !selectedApplication.isOverseasResident">
            <h3 class="section-title">æ–°ã—ã„ä½æ°‘ç¥¨ä½æ‰€</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å¤‰æ›´å‰ä½æ‰€ã¨åŒã˜:</span>
                <span class="detail-value">{{ selectedApplication.residentAddress.sameAsOldAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å¤‰æ›´å¾Œã®ä½æ‰€ã¨åŒã˜:</span>
                <span class="detail-value">{{ selectedApplication.residentAddress.sameAsNewAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
              </div>
              <div class="detail-item" *ngIf="!selectedApplication.residentAddress.sameAsOldAddress && !selectedApplication.residentAddress.sameAsNewAddress">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.residentAddress.postalCode || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.residentAddress.sameAsOldAddress && !selectedApplication.residentAddress.sameAsNewAddress">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.residentAddress.address || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.residentAddress.sameAsOldAddress && !selectedApplication.residentAddress.sameAsNewAddress">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.residentAddress.addressKana || '-' }}</span>
              </div>
            </div>
          </section>
        </ng-container>
        
        <!-- æ–°ã—ã„ç·Šæ€¥é€£çµ¡å…ˆ -->
        <section class="detail-section" *ngIf="selectedApplication.emergencyContact">
          <h3 class="section-title">æ–°ã—ã„ç·Šæ€¥é€£çµ¡å…ˆ</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">å§“:</span>
              <span class="detail-value">{{ selectedApplication.emergencyContact.lastName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å:</span>
              <span class="detail-value">{{ selectedApplication.emergencyContact.firstName || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.emergencyContact.lastNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
              <span class="detail-value">{{ selectedApplication.emergencyContact.firstNameKana || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ç¶šæŸ„:</span>
              <span class="detail-value">{{ selectedApplication.emergencyContact.relationship || '-' }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">é›»è©±ç•ªå·:</span>
              <span class="detail-value">{{ selectedApplication.emergencyContact.phone || '-' }}</span>
            </div>
          </div>
        </section>
      </ng-container>
      
      <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹'">
        <!-- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå·®ã—æˆ»ã—ã®å ´åˆï¼‰ -->
        <form [formGroup]="myNumberChangeForm" (ngSubmit)="submitReapplication()" *ngIf="myNumberChangeForm && isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="changeDate" class="form-input">
                  <div *ngIf="myNumberChangeForm.get('changeDate')?.invalid && myNumberChangeForm.get('changeDate')?.touched" class="error-message">
                    ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
          <section class="detail-section">
            <h3 class="section-title">æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">1-4æ¡ç›®:</span>
                <div class="detail-edit-input">
                  <input 
                    type="text" 
                    formControlName="newMyNumberPart1" 
                    class="form-input"
                    maxlength="4"
                    pattern="[0-9]*"
                    inputmode="numeric"
                  >
                  <div *ngIf="myNumberChangeForm.get('newMyNumberPart1')?.invalid && myNumberChangeForm.get('newMyNumberPart1')?.touched" class="error-message">
                    4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">5-8æ¡ç›®:</span>
                <div class="detail-edit-input">
                  <input 
                    type="text" 
                    formControlName="newMyNumberPart2" 
                    class="form-input"
                    maxlength="4"
                    pattern="[0-9]*"
                    inputmode="numeric"
                  >
                  <div *ngIf="myNumberChangeForm.get('newMyNumberPart2')?.invalid && myNumberChangeForm.get('newMyNumberPart2')?.touched" class="error-message">
                    4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">9-12æ¡ç›®:</span>
                <div class="detail-edit-input">
                  <input 
                    type="text" 
                    formControlName="newMyNumberPart3" 
                    class="form-input"
                    maxlength="4"
                    pattern="[0-9]*"
                    inputmode="numeric"
                  >
                  <div *ngIf="myNumberChangeForm.get('newMyNumberPart3')?.invalid && myNumberChangeForm.get('newMyNumberPart3')?.touched" class="error-message">
                    4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <div class="detail-edit-input">
                  <input 
                    type="file" 
                    class="form-input"
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'myNumberChangeCard')"
                  >
                  <div *ngIf="myNumberChangeCardFile" class="file-name">{{ myNumberChangeCardFile.name }}</div>
                  <div *ngIf="selectedApplication.myNumberCardFileUrl && !myNumberChangeCardFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                      {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </form>
        
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆå·®ã—æˆ»ã—ã§ãªã„å ´åˆã€ã¾ãŸã¯ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆï¼‰ -->
        <ng-container *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ã—ãŸæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.changeDate || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
          <section class="detail-section" *ngIf="selectedApplication.newMyNumber">
            <h3 class="section-title">æ–°ã—ã„ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">1-4æ¡ç›®:</span>
                <span class="detail-value">{{ selectedApplication.newMyNumber.part1 || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">5-8æ¡ç›®:</span>
                <span class="detail-value">{{ selectedApplication.newMyNumber.part2 || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">9-12æ¡ç›®:</span>
                <span class="detail-value">{{ selectedApplication.newMyNumber.part3 || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ -->
          <section class="detail-section" *ngIf="selectedApplication.myNumberCardFileUrl">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
            </div>
          </section>
        </ng-container>
      </ng-container>
      
      <!-- æ°åå¤‰æ›´ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'æ°åå¤‰æ›´ç”³è«‹'">
        <!-- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå·®ã—æˆ»ã—ã®å ´åˆï¼‰ -->
        <form [formGroup]="nameChangeForm" (ngSubmit)="submitReapplication()" *ngIf="nameChangeForm && isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
          <!-- æ°åå¤‰æ›´ã—ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">æ°åå¤‰æ›´ã—ãŸæ—¥ <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æ°åå¤‰æ›´ã—ãŸæ—¥:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="changeDate" class="form-input">
                  <div *ngIf="nameChangeForm.get('changeDate')?.invalid && nameChangeForm.get('changeDate')?.touched" class="error-message">
                    æ°åå¤‰æ›´ã—ãŸæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„æ°å -->
          <section class="detail-section">
            <h3 class="section-title">æ–°ã—ã„æ°å</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å§“ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="text" formControlName="newLastName" class="form-input">
                  <div *ngIf="nameChangeForm.get('newLastName')?.invalid && nameChangeForm.get('newLastName')?.touched" class="error-message">
                    å§“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">å <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="text" formControlName="newFirstName" class="form-input">
                  <div *ngIf="nameChangeForm.get('newFirstName')?.invalid && nameChangeForm.get('newFirstName')?.touched" class="error-message">
                    åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="text" formControlName="newLastNameKana" class="form-input">
                  <div *ngIf="nameChangeForm.get('newLastNameKana')?.invalid && nameChangeForm.get('newLastNameKana')?.touched" class="error-message">
                    å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="text" formControlName="newFirstNameKana" class="form-input">
                  <div *ngIf="nameChangeForm.get('newFirstNameKana')?.invalid && nameChangeForm.get('newFirstNameKana')?.touched" class="error-message">
                    åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æœ¬äººç¢ºèªæ›¸é¡ -->
          <section class="detail-section">
            <h3 class="section-title">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
                <div class="detail-edit-input">
                  <input 
                    type="file" 
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'nameChangeIdDocument')"
                    class="form-input"
                  >
                  <div *ngIf="nameChangeIdDocumentFile" class="file-info">
                    é¸æŠæ¸ˆã¿: {{ nameChangeIdDocumentFile.name }}
                  </div>
                  <div *ngIf="selectedApplication.idDocumentFileUrl && !nameChangeIdDocumentFile" class="file-info">
                    ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«: <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã</a>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </form>
        
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆï¼‰ -->
        <ng-container *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
          <!-- æ°åå¤‰æ›´ã—ãŸæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">æ°åå¤‰æ›´ã—ãŸæ—¥</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æ°åå¤‰æ›´ã—ãŸæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.changeDate || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- æ–°ã—ã„æ°å -->
          <section class="detail-section" *ngIf="selectedApplication.newName">
            <h3 class="section-title">æ–°ã—ã„æ°å</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å§“:</span>
                <span class="detail-value">{{ selectedApplication.newName.lastName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å:</span>
                <span class="detail-value">{{ selectedApplication.newName.firstName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.newName.lastNameKana || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.newName.firstNameKana || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- æœ¬äººç¢ºèªæ›¸é¡ -->
          <section class="detail-section">
            <h3 class="section-title">æœ¬äººç¢ºèªæ›¸é¡</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡æ·»ä»˜:</span>
                <span class="detail-value">{{ selectedApplication.hasIdDocument ? 'ã‚ã‚Š' : 'ãªã—' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.idDocumentFileUrl">
                <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
            </div>
          </section>
        </ng-container>
      </ng-container>
      
      <!-- ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹'">
        <!-- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå·®ã—æˆ»ã—ã®å ´åˆï¼‰ -->
        <form [formGroup]="maternityLeaveForm" (ngSubmit)="submitReapplication()" *ngIf="maternityLeaveForm && isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
          <!-- å‡ºç”£äºˆå®šæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">å‡ºç”£äºˆå®šæ—¥ <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å‡ºç”£äºˆå®šæ—¥ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="expectedDeliveryDate" class="form-input">
                  <div *ngIf="maternityLeaveForm.get('expectedDeliveryDate')?.invalid && maternityLeaveForm.get('expectedDeliveryDate')?.touched" class="error-message">
                    å‡ºç”£äºˆå®šæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">åŒå­ä»¥ä¸Šã‹:</span>
                <div class="detail-edit-input">
                  <select formControlName="isMultipleBirth" class="form-input">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="ã„ã„ãˆ">ã„ã„ãˆ</option>
                    <option value="ã¯ã„">ã¯ã„</option>
                  </select>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“ -->
          <section class="detail-section">
            <h3 class="section-title">ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">ç”£å‰ç”£å¾Œä¼‘æ¥­é–‹å§‹æ—¥:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="maternityLeaveStartDate" class="form-input">
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç”£å‰ç”£å¾Œä¼‘æ¥­çµ‚äº†æ—¥:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="maternityLeaveEndDate" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆï¼ˆç¾ä½æ‰€ã¨ç•°ãªã‚‹å ´åˆï¼‰:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="stayAddress" class="form-input" rows="2"></textarea>
                </div>
              </div>
            </div>
          </section>
        </form>
        
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆï¼‰ -->
        <ng-container *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
          <!-- å‡ºç”£äºˆå®šæ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">å‡ºç”£äºˆå®šæ—¥</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å‡ºç”£äºˆå®šæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.expectedDeliveryDate || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åŒå­ä»¥ä¸Šã‹:</span>
                <span class="detail-value">{{ selectedApplication.isMultipleBirth || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“ -->
          <section class="detail-section">
            <h3 class="section-title">ç”£å‰ç”£å¾Œä¼‘æ¥­æœŸé–“</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">ç”£å‰ç”£å¾Œä¼‘æ¥­é–‹å§‹æ—¥:</span>
                <span class="detail-value">{{ selectedApplication.maternityLeaveStartDate || selectedApplication.preMaternityLeaveStartDate || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç”£å‰ç”£å¾Œä¼‘æ¥­çµ‚äº†æ—¥:</span>
                <span class="detail-value">{{ selectedApplication.maternityLeaveEndDate || selectedApplication.postMaternityLeaveEndDate || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ -->
          <section class="detail-section" *ngIf="selectedApplication.stayAddress">
            <h3 class="section-title">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">ä¼‘æ¥­ä¸­ã®æ»åœ¨å…ˆï¼ˆç¾ä½æ‰€ã¨ç•°ãªã‚‹å ´åˆï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.stayAddress }}</span>
              </div>
            </div>
          </section>
        </ng-container>
      </ng-container>
      
      <!-- é€€è·ç”³è«‹ã®è©³ç´° -->
      <ng-container *ngIf="selectedApplication.applicationType === 'é€€è·ç”³è«‹'">
        <!-- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå·®ã—æˆ»ã—ã®å ´åˆï¼‰ -->
        <form [formGroup]="resignationForm" (ngSubmit)="submitReapplication()" *ngIf="resignationForm && isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'" class="application-detail-form" [class.form-disabled]="isSubmittingReapplication">
          <!-- é€€è·æ—¥ãƒ»æœ€çµ‚å‡ºç¤¾æ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">é€€è·æƒ…å ± <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">é€€è·æ—¥ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="resignationDate" class="form-input" [min]="minResignationDate">
                  <div *ngIf="resignationForm.get('resignationDate')?.invalid && resignationForm.get('resignationDate')?.touched" class="error-message">
                    <span *ngIf="resignationForm.get('resignationDate')?.errors?.['required']">é€€è·æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="resignationForm.get('resignationDate')?.errors?.['pastDate']">é€€è·æ—¥ã¯å…¥ç¤¾æ—¥ä»¥é™ã®æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">æœ€çµ‚å‡ºç¤¾æ—¥ <span class="required">*</span>:</span>
                <div class="detail-edit-input">
                  <input type="date" formControlName="lastWorkDate" class="form-input" [max]="maxLastWorkDate">
                  <div *ngIf="resignationForm.get('lastWorkDate')?.invalid && resignationForm.get('lastWorkDate')?.touched" class="error-message">
                    <span *ngIf="resignationForm.get('lastWorkDate')?.errors?.['required']">æœ€çµ‚å‡ºç¤¾æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="resignationForm.get('lastWorkDate')?.errors?.['lastWorkDateAfterResignation']">æœ€çµ‚å‡ºç¤¾æ—¥ã¯é€€è·æ—¥å½“æ—¥ä»¥å‰ã®æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">é€€è·äº‹ç”±:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="resignationReason" class="form-input" rows="3"></textarea>
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">é›¢è·ç¥¨ã®ç™ºè¡Œã«ã¤ã„ã¦:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="separationNotice" class="form-input" rows="2"></textarea>
                </div>
              </div>
            </div>
          </section>
          
          <!-- é€€è·å¾Œã®é€£çµ¡å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">é€€è·å¾Œã®é€£çµ¡å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <label class="checkbox-label">
                  <input 
                    type="checkbox" 
                    [checked]="sameAsCurrentAddressForResignation"
                    (change)="onSameAsCurrentAddressForResignationChange($event)"
                  >
                  ç¾ä½æ‰€ã¨åŒã˜
                </label>
              </div>
              <div class="detail-item full-width" *ngIf="!sameAsCurrentAddressForResignation">
                <span class="detail-label">é€€è·å¾Œã®ä½æ‰€:</span>
                <div class="detail-edit-input">
                  <textarea formControlName="postResignationAddress" class="form-input" rows="2"></textarea>
                </div>
              </div>
              <div class="detail-item full-width">
                <label class="checkbox-label">
                  <input 
                    type="checkbox" 
                    [checked]="sameAsCurrentPhoneForResignation"
                    (change)="onSameAsCurrentPhoneForResignationChange($event)"
                  >
                  ç¾é›»è©±ç•ªå·ã¨åŒã˜
                </label>
              </div>
              <div class="detail-item" *ngIf="!sameAsCurrentPhoneForResignation">
                <span class="detail-label">é€€è·å¾Œã®é›»è©±ç•ªå·:</span>
                <div class="detail-edit-input">
                  <input type="tel" formControlName="postResignationPhone" class="form-input">
                </div>
              </div>
              <div class="detail-item full-width">
                <label class="checkbox-label">
                  <input 
                    type="checkbox" 
                    [checked]="sameAsCurrentEmailForResignation"
                    (change)="onSameAsCurrentEmailForResignationChange($event)"
                  >
                  ç¾ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨åŒã˜
                </label>
              </div>
              <div class="detail-item" *ngIf="!sameAsCurrentEmailForResignation">
                <span class="detail-label">é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                <div class="detail-edit-input">
                  <input type="email" formControlName="postResignationEmail" class="form-input">
                </div>
              </div>
            </div>
          </section>
          
          <!-- é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ -->
          <section class="detail-section">
            <h3 class="section-title">é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ <span class="required">*</span></h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <div class="detail-edit-input">
                  <label class="radio-label">
                    <input type="radio" formControlName="postResignationInsurance" value="ç¤¾ä¼šä¿é™ºã‚’ä»»æ„ç¶™ç¶šã™ã‚‹">
                    ç¤¾ä¼šä¿é™ºã‚’ä»»æ„ç¶™ç¶šã™ã‚‹
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="postResignationInsurance" value="å›½æ°‘å¥åº·ä¿é™ºã«åŠ å…¥ã™ã‚‹">
                    å›½æ°‘å¥åº·ä¿é™ºã«åŠ å…¥ã™ã‚‹
                  </label>
                  <label class="radio-label">
                    <input type="radio" formControlName="postResignationInsurance" value="ä»–ç¤¾ã§ç¤¾ä¼šä¿é™ºã«åŠ å…¥ã™ã‚‹">
                    ä»–ç¤¾ã§ç¤¾ä¼šä¿é™ºã«åŠ å…¥ã™ã‚‹
                  </label>
                  <div *ngIf="resignationForm.get('postResignationInsurance')?.invalid && resignationForm.get('postResignationInsurance')?.touched" class="error-message">
                    é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ã‚’é¸æŠã—ã¦ãã ã•ã„
                  </div>
                </div>
              </div>
            </div>
          </section>
        </form>
        
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆï¼‰ -->
        <ng-container *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
          <!-- é€€è·æ—¥ãƒ»æœ€çµ‚å‡ºç¤¾æ—¥ -->
          <section class="detail-section">
            <h3 class="section-title">é€€è·æƒ…å ±</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">é€€è·æ—¥:</span>
                <span class="detail-value">{{ selectedApplication.resignationDate || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æœ€çµ‚å‡ºç¤¾æ—¥:</span>
                <span class="detail-value">{{ selectedApplication.lastWorkDate || '-' }}</span>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">é€€è·äº‹ç”±:</span>
                <span class="detail-value">{{ selectedApplication.resignationReason || '-' }}</span>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">é›¢è·ç¥¨ã®ç™ºè¡Œã«ã¤ã„ã¦:</span>
                <span class="detail-value">{{ selectedApplication.separationNotice || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- é€€è·å¾Œã®é€£çµ¡å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">é€€è·å¾Œã®é€£çµ¡å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">é€€è·å¾Œã®ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.postResignationAddress || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é€€è·å¾Œã®é›»è©±ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.postResignationPhone || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é€€è·å¾Œã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                <span class="detail-value">{{ selectedApplication.postResignationEmail || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥ -->
          <section class="detail-section">
            <h3 class="section-title">é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">é€€è·å¾Œã®ç¤¾ä¼šä¿é™ºåŠ å…¥:</span>
                <span class="detail-value">{{ selectedApplication.postResignationInsurance || '-' }}</span>
              </div>
            </div>
          </section>
        </ng-container>
      </ng-container>
      
      <!-- å…¥ç¤¾æ™‚ç”³è«‹ã®è©³ç´°ï¼ˆè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ï¼‰ -->
      <ng-container *ngIf="selectedApplication.applicationType === 'å…¥ç¤¾æ™‚ç”³è«‹'">
        <form [formGroup]="onboardingApplicationForm" *ngIf="isEditModeForReapplication && selectedApplication.status === 'å·®ã—æˆ»ã—'">
          <!-- åŸºæœ¬æƒ…å ± -->
          <section class="detail-section">
            <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å§“:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ getLastName(selectedApplication.name, selectedApplication.lastName) }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="text" formControlName="lastName" class="form-input" readonly style="background: #f5f5f5;">
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">å:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ getFirstName(selectedApplication.name, selectedApplication.firstName) }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="text" formControlName="firstName" class="form-input" readonly style="background: #f5f5f5;">
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ getLastNameKana(selectedApplication.nameKana, selectedApplication.lastNameKana) }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="text" formControlName="lastNameKana" class="form-input">
                  <div *ngIf="onboardingApplicationForm.get('lastNameKana')?.invalid && onboardingApplicationForm.get('lastNameKana')?.touched" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('lastNameKana')?.errors?.['required']">å§“ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="onboardingApplicationForm.get('lastNameKana')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ getFirstNameKana(selectedApplication.nameKana, selectedApplication.firstNameKana) }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="text" formControlName="firstNameKana" class="form-input">
                  <div *ngIf="onboardingApplicationForm.get('firstNameKana')?.invalid && onboardingApplicationForm.get('firstNameKana')?.touched" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('firstNameKana')?.errors?.['required']">åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="onboardingApplicationForm.get('firstNameKana')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç”Ÿå¹´æœˆæ—¥ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.birthDate || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="date" formControlName="birthDate" class="form-input">
                  <div *ngIf="onboardingApplicationForm.get('birthDate')?.invalid && onboardingApplicationForm.get('birthDate')?.touched" class="error-message">ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">æˆ¸ç±ä¸Šã®æ€§åˆ¥ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.gender || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <select formControlName="gender" class="form-input">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
                  </select>
                  <div *ngIf="onboardingApplicationForm.get('gender')?.invalid && onboardingApplicationForm.get('gender')?.touched" class="error-message">æ€§åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.email || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="email" formControlName="email" class="form-input" readonly style="background: #f5f5f5;">
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
                <span class="detail-value" *ngIf="isInViewMode() && selectedApplication.idDocumentFileUrl">
                  <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                  </a>
                </span>
                <span class="detail-value" *ngIf="isInViewMode() && !selectedApplication.idDocumentFileUrl">-</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input 
                    type="file" 
                    class="form-input"
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'idDocument')"
                  >
                  <div *ngIf="idDocumentFile" class="file-name">{{ idDocumentFile.name }}</div>
                  <div *ngIf="selectedApplication.idDocumentFileUrl && !idDocumentFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">
                      {{ selectedApplication.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.myNumber ? 'â—â—â—â—-â—â—â—â—-â—â—â—â—' : '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <div class="my-number-container">
                    <div class="my-number-inputs">
                      <input type="text" formControlName="myNumberPart1" class="form-input my-number-part" maxlength="4" placeholder="0000">
                      <span class="my-number-separator">-</span>
                      <input type="text" formControlName="myNumberPart2" class="form-input my-number-part" maxlength="4" placeholder="0000">
                      <span class="my-number-separator">-</span>
                      <input type="text" formControlName="myNumberPart3" class="form-input my-number-part" maxlength="4" placeholder="0000">
                    </div>
                  </div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.myNumberCardFileUrl || isInEditMode()">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <span class="detail-value" *ngIf="isInViewMode() && selectedApplication.myNumberCardFileUrl">
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                  </a>
                </span>
                <span class="detail-value" *ngIf="isInViewMode() && !selectedApplication.myNumberCardFileUrl">-</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input 
                    type="file" 
                    class="form-input"
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'myNumberCard')"
                  >
                  <div *ngIf="myNumberCardFile" class="file-name">{{ myNumberCardFile.name }}</div>
                  <div *ngIf="selectedApplication.myNumberCardFileUrl && !myNumberCardFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                      {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">æµ·å¤–ã«åœ¨ä½:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.isOverseasResident ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <label class="checkbox-label">
                    <input type="checkbox" formControlName="isOverseasResident" (change)="onOverseasResidentChange($event)">
                    æµ·å¤–ã«åœ¨ä½
                  </label>
                </div>
              </div>
              <div class="detail-item" *ngIf="!selectedApplication.isOverseasResident || (isInEditMode() && !onboardingApplicationForm.get('isOverseasResident')?.value)">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.postalCode || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="text" formControlName="postalCode" class="form-input" maxlength="7" (input)="formatPostalCode($event)" placeholder="1234567">
                  <div *ngIf="onboardingApplicationForm.get('postalCode')?.invalid && onboardingApplicationForm.get('postalCode')?.touched" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('postalCode')?.errors?.['pattern']">7æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident || (isInEditMode() && !onboardingApplicationForm.get('isOverseasResident')?.value)">
                <span class="detail-label">ç¾ä½æ‰€ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.currentAddress || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <textarea formControlName="currentAddress" class="form-input" rows="2"></textarea>
                  <div *ngIf="onboardingApplicationForm.get('currentAddress')?.invalid && onboardingApplicationForm.get('currentAddress')?.touched" class="error-message">ç¾ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident || (isInEditMode() && !onboardingApplicationForm.get('isOverseasResident')?.value)">
                <span class="detail-label">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.currentAddressKana || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <textarea formControlName="currentAddressKana" class="form-input" rows="2"></textarea>
                  <div *ngIf="onboardingApplicationForm.get('currentAddressKana')?.invalid && onboardingApplicationForm.get('currentAddressKana')?.touched" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('currentAddressKana')?.errors?.['required']">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="onboardingApplicationForm.get('currentAddressKana')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.isOverseasResident || (isInEditMode() && onboardingApplicationForm.get('isOverseasResident')?.value)">
                <span class="detail-label">ä½æ‰€ï¼ˆæµ·å¤–ï¼‰ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.overseasAddress || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <textarea formControlName="overseasAddress" class="form-input" rows="2" placeholder="æµ·å¤–ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                  <div *ngIf="onboardingApplicationForm.get('overseasAddress')?.invalid && onboardingApplicationForm.get('overseasAddress')?.touched" class="error-message">ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">é›»è©±ç•ªå· <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.phoneNumber || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="tel" formControlName="phoneNumber" class="form-input" (input)="formatPhoneNumber($event)">
                  <div *ngIf="onboardingApplicationForm.get('phoneNumber')?.invalid && onboardingApplicationForm.get('phoneNumber')?.touched" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('phoneNumber')?.errors?.['required']">é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="onboardingApplicationForm.get('phoneNumber')?.errors?.['pattern']">æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ä½æ°‘ç¥¨ä½æ‰€ -->
          <section class="detail-section">
            <h3 class="section-title">ä½æ°‘ç¥¨ä½æ‰€</h3>
            <div class="detail-grid">
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident || (isInEditMode() && !onboardingApplicationForm.get('isOverseasResident')?.value)">
                <span class="detail-label">ä½æ‰€ï¼ˆç¾ä½æ‰€ã¨åŒã˜ï¼‰:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.sameAsCurrentAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <label class="checkbox-label">
                    <input type="checkbox" formControlName="sameAsCurrentAddress" (change)="onOnboardingSameAddressChange($event)">
                    ä½æ‰€ï¼ˆç¾ä½æ‰€ã¨åŒã˜ï¼‰
                  </label>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.isOverseasResident || (isInEditMode() && onboardingApplicationForm.get('isOverseasResident')?.value)">
                <span class="detail-label">ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.skipResidentAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <label class="checkbox-label">
                    <input type="checkbox" formControlName="skipResidentAddress" (change)="onSkipResidentAddressChange($event)" [disabled]="onboardingApplicationForm.get('isOverseasResident')?.value">
                    ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„
                  </label>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="(selectedApplication.isOverseasResident || (isInEditMode() && onboardingApplicationForm.get('isOverseasResident')?.value)) && (selectedApplication.skipResidentAddress || (isInEditMode() && onboardingApplicationForm.get('skipResidentAddress')?.value))">
                <span class="detail-label">ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„ç†ç”±:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.residentAddressSkipReason || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input type="text" formControlName="residentAddressSkipReason" class="form-input" readonly>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="(!selectedApplication.isOverseasResident || (isInEditMode() && !onboardingApplicationForm.get('isOverseasResident')?.value)) && (!selectedApplication.skipResidentAddress || (isInEditMode() && !onboardingApplicationForm.get('skipResidentAddress')?.value))">
                <span class="detail-label">ä½æ‰€ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.residentAddress || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <textarea formControlName="residentAddress" class="form-input" rows="2" [readonly]="onboardingApplicationForm.get('sameAsCurrentAddress')?.value"></textarea>
                  <div *ngIf="onboardingApplicationForm.get('residentAddress')?.invalid && onboardingApplicationForm.get('residentAddress')?.touched" class="error-message">ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="(!selectedApplication.isOverseasResident || (isInEditMode() && !onboardingApplicationForm.get('isOverseasResident')?.value)) && (!selectedApplication.skipResidentAddress || (isInEditMode() && !onboardingApplicationForm.get('skipResidentAddress')?.value))">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.residentAddressKana || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <textarea formControlName="residentAddressKana" class="form-input" rows="2" [readonly]="onboardingApplicationForm.get('sameAsCurrentAddress')?.value"></textarea>
                  <div *ngIf="onboardingApplicationForm.get('residentAddressKana')?.invalid && onboardingApplicationForm.get('residentAddressKana')?.touched" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('residentAddressKana')?.errors?.['required']">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="onboardingApplicationForm.get('residentAddressKana')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- ç·Šæ€¥é€£çµ¡å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">ç·Šæ€¥é€£çµ¡å…ˆ</h3>
            <div formGroupName="emergencyContact" *ngIf="isInEditMode()">
              <div class="detail-grid">
                <div class="detail-item">
                  <span class="detail-label">æ°å:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.emergencyContact?.name || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="name" class="form-input">
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.emergencyContact?.nameKana || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="nameKana" class="form-input">
                    <div *ngIf="onboardingApplicationForm.get('emergencyContact.nameKana')?.invalid && onboardingApplicationForm.get('emergencyContact.nameKana')?.touched" class="error-message">
                      <span *ngIf="onboardingApplicationForm.get('emergencyContact.nameKana')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ç¶šæŸ„:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.emergencyContact?.relationship || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="relationship" class="form-input">
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.emergencyContact?.phone || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="tel" formControlName="phone" class="form-input" (input)="formatEmergencyPhoneNumber($event)">
                    <div *ngIf="onboardingApplicationForm.get('emergencyContact.phone')?.invalid && onboardingApplicationForm.get('emergencyContact.phone')?.touched" class="error-message">
                      <span *ngIf="onboardingApplicationForm.get('emergencyContact.phone')?.errors?.['pattern']">æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                </div>
                <div class="detail-item full-width">
                  <span class="detail-label">ä½æ‰€:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.emergencyContact?.address || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <textarea formControlName="address" class="form-input" rows="2"></textarea>
                  </div>
                </div>
                <div class="detail-item full-width">
                  <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.emergencyContact?.addressKana || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <textarea formControlName="addressKana" class="form-input" rows="2"></textarea>
                    <div *ngIf="onboardingApplicationForm.get('emergencyContact.addressKana')?.invalid && onboardingApplicationForm.get('emergencyContact.addressKana')?.touched" class="error-message">
                      <span *ngIf="onboardingApplicationForm.get('emergencyContact.addressKana')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="isInViewMode()" class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æ°å:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.name || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.nameKana || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç¶šæŸ„:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.relationship || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.phone || '-' }}</span>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.address || '-' }}</span>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.addressKana || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸ -->
          <section class="detail-section">
            <h3 class="section-title">å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">å±¥æ­´æ›¸:</span>
                <span class="detail-value" *ngIf="isInViewMode() && selectedApplication.resumeFileUrl">
                  <a [href]="selectedApplication.resumeFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.resumeFile || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
                  </a>
                </span>
                <span class="detail-value" *ngIf="isInViewMode() && !selectedApplication.resumeFileUrl">-</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input 
                    type="file" 
                    accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'resume')"
                    class="form-input"
                  >
                  <div *ngIf="resumeFile" class="file-name">{{ resumeFile.name }}</div>
                  <div *ngIf="selectedApplication.resumeFileUrl && !resumeFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.resumeFileUrl" target="_blank" class="file-link">
                      {{ selectedApplication.resumeFile || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
                    </a>
                  </div>
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">è·å‹™çµŒæ­´æ›¸:</span>
                <span class="detail-value" *ngIf="isInViewMode() && selectedApplication.careerHistoryFileUrl">
                  <a [href]="selectedApplication.careerHistoryFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.careerHistoryFile || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
                  </a>
                </span>
                <span class="detail-value" *ngIf="isInViewMode() && !selectedApplication.careerHistoryFileUrl">-</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input 
                    type="file" 
                    accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'careerHistory')"
                    class="form-input"
                  >
                  <div *ngIf="careerHistoryFile" class="file-name">{{ careerHistoryFile.name }}</div>
                  <div *ngIf="selectedApplication.careerHistoryFileUrl && !careerHistoryFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.careerHistoryFileUrl" target="_blank" class="file-link">
                      {{ selectedApplication.careerHistoryFile || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- å£åº§æƒ…å ± -->
          <section class="detail-section">
            <h3 class="section-title">å£åº§æƒ…å ±</h3>
            <div formGroupName="bankAccount" *ngIf="isInEditMode()">
              <div class="detail-grid">
                <div class="detail-item">
                  <span class="detail-label">éŠ€è¡Œå:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.bankAccount?.bankName || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="bankName" class="form-input">
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">é é‡‘ç¨®åˆ¥:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.bankAccount?.accountType || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <select formControlName="accountType" class="form-input">
                      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                      <option value="æ™®é€š">æ™®é€š</option>
                      <option value="å½“åº§">å½“åº§</option>
                      <option value="è²¯è“„">è²¯è“„</option>
                    </select>
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.bankAccount?.accountHolder || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="accountHolder" class="form-input">
                    <div *ngIf="onboardingApplicationForm.get('bankAccount.accountHolder')?.invalid && onboardingApplicationForm.get('bankAccount.accountHolder')?.touched" class="error-message">
                      <span *ngIf="onboardingApplicationForm.get('bankAccount.accountHolder')?.errors?.['katakana']">ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    </div>
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">æ”¯åº—å:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.bankAccount?.branchName || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="branchName" class="form-input">
                  </div>
                </div>
                <div class="detail-item">
                  <span class="detail-label">å£åº§ç•ªå·:</span>
                  <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.bankAccount?.accountNumber || '-' }}</span>
                  <div *ngIf="isInEditMode()" class="detail-edit-input">
                    <input type="text" formControlName="accountNumber" class="form-input">
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="isInViewMode()" class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">éŠ€è¡Œå:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.bankName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é é‡‘ç¨®åˆ¥:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.accountType || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.accountHolder || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æ”¯åº—å:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.branchName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å£åº§ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.accountNumber || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ç¤¾ä¼šä¿é™º -->
          <section class="detail-section">
            <h3 class="section-title">ç¤¾ä¼šä¿é™º</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå· <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ formatBasicPensionNumberForDisplay(selectedApplication.basicPensionNumber) }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <div class="basic-pension-number-container">
                    <input type="text" formControlName="basicPensionNumberPart1" class="form-input basic-pension-part" maxlength="4" placeholder="0000" (input)="formatOnboardingBasicPensionNumberInput($event, 1)">
                    <span class="basic-pension-separator">-</span>
                    <input type="text" formControlName="basicPensionNumberPart2" class="form-input basic-pension-part" maxlength="6" placeholder="000000" (input)="formatOnboardingBasicPensionNumberInput($event, 2)">
                  </div>
                  <div *ngIf="(onboardingApplicationForm.get('basicPensionNumberPart1')?.invalid || onboardingApplicationForm.get('basicPensionNumberPart2')?.invalid) && (onboardingApplicationForm.get('basicPensionNumberPart1')?.touched || onboardingApplicationForm.get('basicPensionNumberPart2')?.touched)" class="error-message">
                    <span *ngIf="onboardingApplicationForm.get('basicPensionNumberPart1')?.errors?.['required'] || onboardingApplicationForm.get('basicPensionNumberPart2')?.errors?.['required']">åŸºç¤å¹´é‡‘ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                    <span *ngIf="onboardingApplicationForm.get('basicPensionNumberPart1')?.errors?.['pattern'] || onboardingApplicationForm.get('basicPensionNumberPart2')?.errors?.['pattern']">åŠè§’æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                  </div>
                </div>
              </div>
              <div class="detail-item">
                <span class="detail-label">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.pensionHistoryStatus || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <select formControlName="pensionHistoryStatus" class="form-input" (change)="onPensionHistoryChange($event)">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option *ngFor="let option of pensionHistoryOptions" [value]="option">{{ option }}</option>
                  </select>
                </div>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.pensionHistoryStatus === 'æœ‰' || (isInEditMode() && onboardingApplicationForm.get('pensionHistoryStatus')?.value === 'æœ‰')">
                <span class="detail-label">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ï¼ˆè©³ç´°ï¼‰:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.pensionHistory || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <textarea formControlName="pensionHistory" class="form-input" rows="4"></textarea>
                </div>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡:</span>
                <span class="detail-value" *ngIf="isInViewMode() && selectedApplication.basicPensionNumberDocFileUrl">
                  <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.basicPensionNumberDocFile || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
                  </a>
                </span>
                <span class="detail-value" *ngIf="isInViewMode() && !selectedApplication.basicPensionNumberDocFileUrl">-</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <input 
                    type="file" 
                    accept=".pdf,.jpg,.jpeg,.png"
                    (change)="onFileSelected($event, 'basicPensionNumberDoc')"
                    class="form-input"
                  >
                  <div *ngIf="basicPensionNumberDocFile" class="file-name">{{ basicPensionNumberDocFile.name }}</div>
                  <div *ngIf="selectedApplication.basicPensionNumberDocFileUrl && !basicPensionNumberDocFile" class="file-info" style="margin-top: 0.5rem;">
                    <span>æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«: </span>
                    <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                      {{ selectedApplication.basicPensionNumberDocFile || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- æ‰¶é¤Šè€…æœ‰ç„¡ -->
          <section class="detail-section">
            <h3 class="section-title">æ‰¶é¤Šè€…æœ‰ç„¡</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">è¢«æ‰¶é¤Šè€… <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.dependentStatus || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <select formControlName="dependentStatus" class="form-input">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="æœ‰">æœ‰</option>
                    <option value="ç„¡">ç„¡</option>
                  </select>
                  <div *ngIf="onboardingApplicationForm.get('dependentStatus')?.invalid && onboardingApplicationForm.get('dependentStatus')?.touched" class="error-message">è¢«æ‰¶é¤Šè€…ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ -->
          <section class="detail-section">
            <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.qualificationCertificateRequired || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <div class="radio-group">
                    <label class="radio-label">
                      <input 
                        type="radio" 
                        formControlName="qualificationCertificateRequired" 
                        value="å¿…è¦"
                        name="qualificationCertificateRequired"
                      >
                      å¿…è¦
                    </label>
                    <label class="radio-label">
                      <input 
                        type="radio" 
                        formControlName="qualificationCertificateRequired" 
                        value="ä¸è¦"
                        name="qualificationCertificateRequired"
                      >
                      ä¸è¦
                    </label>
                  </div>
                  <div *ngIf="onboardingApplicationForm.get('qualificationCertificateRequired')?.invalid && onboardingApplicationForm.get('qualificationCertificateRequired')?.touched" class="error-message">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- å¹´é‡‘åŸºé‡‘åŠ å…¥ -->
          <section class="detail-section">
            <h3 class="section-title">å¹´é‡‘åŸºé‡‘åŠ å…¥</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">å¹´é‡‘åŸºé‡‘ã«åŠ å…¥ã—ã¦ã„ã‚‹ã‹ <span class="required" *ngIf="isInEditMode()">*</span>:</span>
                <span class="detail-value" *ngIf="isInViewMode()">{{ selectedApplication.pensionFundMembership || '-' }}</span>
                <div *ngIf="isInEditMode()" class="detail-edit-input">
                  <div class="radio-group">
                    <label class="radio-label">
                      <input 
                        type="radio" 
                        formControlName="pensionFundMembership" 
                        value="ã¯ã„"
                        name="pensionFundMembership"
                      >
                      ã¯ã„
                    </label>
                    <label class="radio-label">
                      <input 
                        type="radio" 
                        formControlName="pensionFundMembership" 
                        value="ã„ã„ãˆ"
                        name="pensionFundMembership"
                      >
                      ã„ã„ãˆ
                    </label>
                  </div>
                  <div *ngIf="onboardingApplicationForm.get('pensionFundMembership')?.invalid && onboardingApplicationForm.get('pensionFundMembership')?.touched" class="error-message">å¹´é‡‘åŸºé‡‘ã«åŠ å…¥ã—ã¦ã„ã‚‹ã‹ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                </div>
              </div>
            </div>
          </section>
        </form>
        
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ãªã„å ´åˆï¼‰ -->
        <ng-container *ngIf="!isEditModeForReapplication || selectedApplication.status !== 'å·®ã—æˆ»ã—'">
          <!-- åŸºæœ¬æƒ…å ± -->
          <section class="detail-section">
            <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æ°å:</span>
                <span class="detail-value">{{ selectedApplication.name || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.nameKana || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç”Ÿå¹´æœˆæ—¥:</span>
                <span class="detail-value">{{ selectedApplication.birthDate || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æˆ¸ç±ä¸Šã®æ€§åˆ¥:</span>
                <span class="detail-value">{{ selectedApplication.gender || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                <span class="detail-value">{{ selectedApplication.email || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.idDocumentFileUrl">
                <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.idDocumentFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.idDocumentFile || 'æœ¬äººç¢ºèªæ›¸é¡ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.idDocumentFileUrl">
                <span class="detail-label">æœ¬äººç¢ºèªæ›¸é¡:</span>
                <span class="detail-value">-</span>
              </div>
            </div>
          </section>
          
          <!-- ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ -->
          <section class="detail-section">
            <h3 class="section-title">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼:</span>
                <span class="detail-value">{{ selectedApplication.myNumber ? 'â—â—â—â—-â—â—â—â—-â—â—â—â—' : '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.myNumberCardFileUrl">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.myNumberCardFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.myNumberCardFile || 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.myNumberCardFileUrl">
                <span class="detail-label">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰:</span>
                <span class="detail-value">-</span>
              </div>
            </div>
          </section>
          
          <!-- ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">ç¾ä½æ‰€ã¨é€£çµ¡å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item full-width">
                <span class="detail-label">æµ·å¤–ã«åœ¨ä½:</span>
                <span class="detail-value">{{ selectedApplication.isOverseasResident ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
              </div>
              <div class="detail-item" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">éƒµä¾¿ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.postalCode || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">ç¾ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.currentAddress || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">ç¾ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.currentAddressKana || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.isOverseasResident">
                <span class="detail-label">ä½æ‰€ï¼ˆæµ·å¤–ï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.overseasAddress || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é›»è©±ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.phoneNumber || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ä½æ°‘ç¥¨ä½æ‰€ -->
          <section class="detail-section">
            <h3 class="section-title">ä½æ°‘ç¥¨ä½æ‰€</h3>
            <div class="detail-grid">
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident">
                <span class="detail-label">ä½æ‰€ï¼ˆç¾ä½æ‰€ã¨åŒã˜ï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.sameAsCurrentAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.isOverseasResident">
                <span class="detail-label">ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„:</span>
                <span class="detail-value">{{ selectedApplication.skipResidentAddress ? 'ã¯ã„' : 'ã„ã„ãˆ' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.isOverseasResident && selectedApplication.skipResidentAddress">
                <span class="detail-label">ä½æ°‘ç¥¨ä½æ‰€ã‚’è¨˜è¼‰ã—ãªã„ç†ç”±:</span>
                <span class="detail-value">{{ selectedApplication.residentAddressSkipReason || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident && !selectedApplication.skipResidentAddress">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.residentAddress || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.isOverseasResident && !selectedApplication.skipResidentAddress">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.residentAddressKana || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ç·Šæ€¥é€£çµ¡å…ˆ -->
          <section class="detail-section">
            <h3 class="section-title">ç·Šæ€¥é€£çµ¡å…ˆ</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æ°å:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.name || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æ°åï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.nameKana || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç¶šæŸ„:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.relationship || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ç·Šæ€¥é€£çµ¡å…ˆé›»è©±ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.phone || '-' }}</span>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">ä½æ‰€:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.address || '-' }}</span>
              </div>
              <div class="detail-item full-width">
                <span class="detail-label">ä½æ‰€ï¼ˆãƒ¨ãƒŸã‚¬ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.emergencyContact?.addressKana || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸ -->
          <section class="detail-section">
            <h3 class="section-title">å±¥æ­´æ›¸ãƒ»è·å‹™çµŒæ­´æ›¸</h3>
            <div class="detail-grid">
              <div class="detail-item full-width" *ngIf="selectedApplication.resumeFileUrl">
                <span class="detail-label">å±¥æ­´æ›¸:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.resumeFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.resumeFile || 'å±¥æ­´æ›¸ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.resumeFileUrl">
                <span class="detail-label">å±¥æ­´æ›¸:</span>
                <span class="detail-value">-</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.careerHistoryFileUrl">
                <span class="detail-label">è·å‹™çµŒæ­´æ›¸:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.careerHistoryFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.careerHistoryFile || 'è·å‹™çµŒæ­´æ›¸ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.careerHistoryFileUrl">
                <span class="detail-label">è·å‹™çµŒæ­´æ›¸:</span>
                <span class="detail-value">-</span>
              </div>
            </div>
          </section>
          
          <!-- å£åº§æƒ…å ± -->
          <section class="detail-section">
            <h3 class="section-title">å£åº§æƒ…å ±</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">éŠ€è¡Œå:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.bankName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é é‡‘ç¨®åˆ¥:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.accountType || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.accountHolder || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æ”¯åº—å:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.branchName || '-' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å£åº§ç•ªå·:</span>
                <span class="detail-value">{{ selectedApplication.bankAccount?.accountNumber || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- ç¤¾ä¼šä¿é™º -->
          <section class="detail-section">
            <h3 class="section-title">ç¤¾ä¼šä¿é™º</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·:</span>
                <span class="detail-value">{{ formatBasicPensionNumberForDisplay(selectedApplication.basicPensionNumber) }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´:</span>
                <span class="detail-value">{{ selectedApplication.pensionHistoryStatus || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.pensionHistoryStatus === 'æœ‰'">
                <span class="detail-label">åšç”Ÿå¹´é‡‘åŠ å…¥å±¥æ­´ï¼ˆè©³ç´°ï¼‰:</span>
                <span class="detail-value">{{ selectedApplication.pensionHistory || '-' }}</span>
              </div>
              <div class="detail-item full-width" *ngIf="selectedApplication.basicPensionNumberDocFileUrl">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡:</span>
                <span class="detail-value">
                  <a [href]="selectedApplication.basicPensionNumberDocFileUrl" target="_blank" class="file-link">
                    {{ selectedApplication.basicPensionNumberDocFile || 'åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡ã‚’é–‹ã' }}
                  </a>
                </span>
              </div>
              <div class="detail-item full-width" *ngIf="!selectedApplication.basicPensionNumberDocFileUrl">
                <span class="detail-label">åŸºç¤å¹´é‡‘ç•ªå·ãŒã‚ã‹ã‚‹æ›¸é¡:</span>
                <span class="detail-value">-</span>
              </div>
            </div>
          </section>
          
          <!-- æ‰¶é¤Šè€…æœ‰ç„¡ -->
          <section class="detail-section">
            <h3 class="section-title">æ‰¶é¤Šè€…æœ‰ç„¡</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">è¢«æ‰¶é¤Šè€…:</span>
                <span class="detail-value">{{ selectedApplication.dependentStatus || '-' }}</span>
              </div>
            </div>
          </section>
          
          <!-- è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦ -->
          <section class="detail-section">
            <h3 class="section-title">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">è³‡æ ¼ç¢ºèªæ›¸ç™ºè¡Œè¦å¦:</span>
                <span class="detail-value">{{ selectedApplication.qualificationCertificateRequired || '-' }}</span>
              </div>
            </div>
          </section>
        </ng-container>
      </ng-container>
      
      <!-- ãã®ä»–ã®ç”³è«‹ã‚¿ã‚¤ãƒ—ã®è©³ç´°ï¼ˆä»Šå¾Œå®Ÿè£…ï¼‰ -->
      <ng-container *ngIf="selectedApplication.applicationType !== 'æ‰¶é¤Šå®¶æ—è¿½åŠ ' && selectedApplication.applicationType !== 'æ‰¶é¤Šå‰Šé™¤ç”³è«‹' && selectedApplication.applicationType !== 'ä½æ‰€å¤‰æ›´ç”³è«‹' && selectedApplication.applicationType !== 'æ°åå¤‰æ›´ç”³è«‹' && selectedApplication.applicationType !== 'ç”£å‰ç”£å¾Œä¼‘æ¥­ç”³è«‹' && selectedApplication.applicationType !== 'é€€è·ç”³è«‹' && selectedApplication.applicationType !== 'ä¿é™ºè¨¼å†ç™ºè¡Œç”³è«‹' && selectedApplication.applicationType !== 'å…¥ç¤¾æ™‚ç”³è«‹' && selectedApplication.applicationType !== 'ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼å¤‰æ›´ç”³è«‹'">
        <section class="detail-section">
          <p class="no-detail-message">ã“ã®ç”³è«‹ã‚¿ã‚¤ãƒ—ã®è©³ç´°è¡¨ç¤ºã¯ä»Šå¾Œå®Ÿè£…äºˆå®šã§ã™ã€‚</p>
        </section>
      </ng-container>
    </div>
    
    <div class="modal-footer">
      <button 
        type="button" 
        class="close-detail-button" 
        (click)="closeApplicationDetailModal()"
        [disabled]="isSubmittingReapplication"
        [title]="isSubmittingReapplication ? 'å‡¦ç†ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚' : ''"
      >é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>
